{"version":3,"file":"static/js/460.f8bae615.chunk.js","mappings":"uLAMA,MAgFA,EAhFiCA,KAC/B,MAAMC,GAAWC,EAAAA,EAAAA,OACVC,EAAiBC,IAAsBC,EAAAA,EAAAA,UAAS,KAChDC,EAAaC,IAAkBF,EAAAA,EAAAA,UAAS,KACxCG,EAAiBC,IAAsBJ,EAAAA,EAAAA,UAAS,KAChDK,EAASC,IAAcN,EAAAA,EAAAA,WAAS,IAChCO,EAAOC,IAAYR,EAAAA,EAAAA,UAAwB,OAC3CS,EAASC,IAAcV,EAAAA,EAAAA,UAAwB,MAEhDW,GAAcC,EAAAA,EAAAA,MAwCpB,OACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uBAAsBC,UACnCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uBAAsBC,SAAA,EACnCF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,sCACJC,EAAAA,EAAAA,MAAA,QAAMC,SAnCSC,UACnBC,EAAEC,iBACFZ,EAAS,MACTE,EAAW,MACX,MAAMW,EAVDpB,GAAgBE,EACjBF,IAAgBE,EAAwB,wEACxCF,EAAYqB,OAAS,EAAU,qEAC5B,KAHsC,2EAW7C,GAAID,EACFb,EAASa,QAGX,GAAgB,OAAXV,QAAW,IAAXA,GAAAA,EAAaY,GAKlB,IACEjB,GAAW,SAELkB,EAAAA,EAAAA,IAAeb,EAAYY,GAAItB,GACrCS,EAAW,qGAEXe,WAAW,KACT7B,EAAS,WACR,KACL,CAAE,MAAO8B,GACPC,QAAQpB,MAAM,uBAAwBmB,GACtClB,EAASkB,EAAIE,SAAW,gDAC1B,CAAC,QACCtB,GAAW,EACb,MAlBEE,EAAS,6FAyBsBO,SAAA,EAC3BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,QAAOC,SAAA,EACpBF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,2CACPF,EAAAA,EAAAA,KAAA,SAAOgB,KAAK,WAAWC,MAAOhC,EAAiBiC,SAAUZ,GAAKpB,EAAmBoB,EAAEa,OAAOF,OAAQG,YAAY,yEAEhHjB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,QAAOC,SAAA,EACpBF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,iCACPF,EAAAA,EAAAA,KAAA,SAAOgB,KAAK,WAAWC,MAAO7B,EAAa8B,SAAUZ,GAAKjB,EAAeiB,EAAEa,OAAOF,OAAQG,YAAY,oCAExGjB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,QAAOC,SAAA,EACpBF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,kDACPF,EAAAA,EAAAA,KAAA,SAAOgB,KAAK,WAAWC,MAAO3B,EAAiB4B,SAAUZ,GAAKf,EAAmBe,EAAEa,OAAOF,OAAQG,YAAY,sDAG/G1B,IAASS,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,CAAC,UAAGR,KACtCE,IAAWO,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,CAAC,UAAGN,MAE3CO,EAAAA,EAAAA,MAAA,OAAKF,UAAU,UAASC,SAAA,EACtBF,EAAAA,EAAAA,KAAA,UAAQgB,KAAK,SAASK,SAAU7B,EAAQU,SAAEV,EAAU,6BAAgB,sCACpEQ,EAAAA,EAAAA,KAAA,UAAQgB,KAAK,SAASf,UAAU,aAAaqB,QAASA,IAAMvC,GAAU,GAAGmB,SAAC,wB","sources":["layouts/user/ChangePassword.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './ChangePassword.css';\nimport { getUserInfo } from '../../api/user/loginApi';\nimport { changePassword } from '../../api/user/userApi';\n\nconst ChangePassword: React.FC = () => {\n  const navigate = useNavigate();\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  const currentUser = getUserInfo();\n\n  const validate = (): string | null => {\n    if (!newPassword || !confirmPassword) return 'Vui lòng nhập mật khẩu mới và xác nhận';\n    if (newPassword !== confirmPassword) return 'Mật khẩu mới và xác nhận không khớp';\n    if (newPassword.length < 6) return 'Mật khẩu phải có ít nhất 6 ký tự';\n    return null;\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setSuccess(null);\n    const v = validate();\n    if (v) {\n      setError(v);\n      return;\n    }\n    if (!currentUser?.id) {\n      setError('Bạn cần đăng nhập để đổi mật khẩu');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      // Call API\n      await changePassword(currentUser.id, newPassword);\n      setSuccess('Đổi mật khẩu thành công. Vui lòng đăng nhập lại.');\n      // Optionally sign out user or redirect to login\n      setTimeout(() => {\n        navigate('/login');\n      }, 1200);\n    } catch (err: any) {\n      console.error('changePassword error', err);\n      setError(err.message || 'Lỗi khi đổi mật khẩu');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"change-password-page\">\n      <div className=\"change-password-card\">\n        <h2>Đổi mật khẩu</h2>\n        <form onSubmit={handleSubmit}>\n          <div className=\"field\">\n            <label>Mật khẩu hiện tại</label>\n            <input type=\"password\" value={currentPassword} onChange={e => setCurrentPassword(e.target.value)} placeholder=\"Nhập mật khẩu hiện tại (nếu có)\" />\n          </div>\n          <div className=\"field\">\n            <label>Mật khẩu mới</label>\n            <input type=\"password\" value={newPassword} onChange={e => setNewPassword(e.target.value)} placeholder=\"Mật khẩu mới\" />\n          </div>\n          <div className=\"field\">\n            <label>Xác nhận mật khẩu mới</label>\n            <input type=\"password\" value={confirmPassword} onChange={e => setConfirmPassword(e.target.value)} placeholder=\"Nhập lại mật khẩu mới\" />\n          </div>\n\n          {error && <div className=\"cp-error\">❌ {error}</div>}\n          {success && <div className=\"cp-success\">✅ {success}</div>}\n\n          <div className=\"actions\">\n            <button type=\"submit\" disabled={loading}>{loading ? 'Đang đổi...' : 'Đổi mật khẩu'}</button>\n            <button type=\"button\" className=\"btn-cancel\" onClick={() => navigate(-1)}>Hủy</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default ChangePassword;\n"],"names":["ChangePassword","navigate","useNavigate","currentPassword","setCurrentPassword","useState","newPassword","setNewPassword","confirmPassword","setConfirmPassword","loading","setLoading","error","setError","success","setSuccess","currentUser","getUserInfo","_jsx","className","children","_jsxs","onSubmit","async","e","preventDefault","v","length","id","changePassword","setTimeout","err","console","message","type","value","onChange","target","placeholder","disabled","onClick"],"sourceRoot":""}