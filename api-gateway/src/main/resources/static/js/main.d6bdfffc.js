/*! For license information please see main.d6bdfffc.js.LICENSE.txt */
(()=>{var e={68:(e,t,n)=>{"use strict";var r=n(4372).b,a=n(6329),o=n(5120);function i(e,t){r.call(this);var n=this,a=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var r,i;if(200===e){if(i=+new Date-a,t)try{r=JSON.parse(t)}catch(s){}o.isObject(r)||(r={})}n.emit("finish",r,i),n.removeAllListeners()})}a(i,r),i.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=i},433:(e,t,n)=>{e.exports=n.g.EventSource},527:(e,t,n)=>{"use strict";var r,a,o=n(4416),i=n(7526);e.exports=function(e,t,s){r||((r=n.g.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(a=n.g.document.createElement("textarea")).name="d",r.appendChild(a),n.g.document.body.appendChild(r));var l="a"+o.string(8);r.target=l,r.action=i.addQuery(i.addPath(e,"/jsonp_send"),"i="+l);var c=function(e){try{return n.g.document.createElement('<iframe name="'+e+'">')}catch(r){var t=n.g.document.createElement("iframe");return t.name=e,t}}(l);c.id=l,c.style.display="none",r.appendChild(c);try{a.value=t}catch(d){}r.submit();var u=function(e){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,setTimeout(function(){c.parentNode.removeChild(c),c=null},500),a.value="",s(e))};return c.onerror=function(){u()},c.onload=function(){u()},c.onreadystatechange=function(e){c.readyState,"complete"===c.readyState&&u()},function(){u(new Error("Aborted"))}}},579:(e,t,n)=>{"use strict";e.exports=n(2799)},684:(e,t,n)=>{"use strict";n.d(t,{BD:()=>l,Tp:()=>i,ec:()=>s,kl:()=>o});var r=n(1424),a=n(791);async function o(e){if(!e)return null;const t=(0,r.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(a.J,"/users/").concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(404===n.status)return null;if(!n.ok)throw new Error(await n.text()||"Failed to fetch user");return n.json()}async function i(e){if(!e)return null;const t=(0,r.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(a.J,"/friendships/search?phone=").concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(404===n.status)return null;if(!n.ok)throw new Error(await n.text()||"Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi d\xf9ng");return n.json()}async function s(e,t){if(!e)throw new Error("User id is required");const n=(0,r.gf)();if(!n)throw new Error("No JWT token found");const o="".concat(a.J,"/users/change-password"),i={Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},s=await fetch(o,{method:"PUT",headers:i,body:JSON.stringify({idUser:e,newPassword:t})});return await(async e=>{const t=await e.text();if(!e.ok){const n=t&&t.trim()?t:void 0;throw new Error(n||"Failed to change password (status ".concat(e.status,")"))}if(!t||""===t.trim())return{success:!0};try{return JSON.parse(t)}catch(n){return{message:t}}})(s)}async function l(e){if(!e)throw new Error("Email is required");const t=(0,r.gf)(),n={Accept:"application/json","Content-Type":"application/json"};t&&(n.Authorization="Bearer ".concat(t));const o=await fetch("".concat(a.J,"/users/forgot-password"),{method:"PUT",headers:n,body:JSON.stringify({email:e})}),i=await o.text();if(!o.ok){const e=i&&i.trim()?i:void 0;throw new Error(e||"Failed to request password reset")}if(!i||""===i.trim())return{success:!0};try{return JSON.parse(i)}catch(s){return{message:i}}}},791:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});const r="https://unpessimistically-unbewailed-christy.ngrok-free.dev/api"},1091:(e,t,n)=>{"use strict";var r=n(4416),a={},o=!1,i=n.g.chrome&&n.g.chrome.app&&n.g.chrome.app.runtime;e.exports={attachEvent:function(e,t){"undefined"!==typeof n.g.addEventListener?n.g.addEventListener(e,t,!1):n.g.document&&n.g.attachEvent&&(n.g.document.attachEvent("on"+e,t),n.g.attachEvent("on"+e,t))},detachEvent:function(e,t){"undefined"!==typeof n.g.addEventListener?n.g.removeEventListener(e,t,!1):n.g.document&&n.g.detachEvent&&(n.g.document.detachEvent("on"+e,t),n.g.detachEvent("on"+e,t))},unloadAdd:function(e){if(i)return null;var t=r.string(8);return a[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in a&&delete a[e]},triggerUnloadCallbacks:function(){for(var e in a)a[e](),delete a[e]}};i||e.exports.attachEvent("unload",function(){o||(o=!0,e.exports.triggerUnloadCallbacks())})},1200:(e,t,n)=>{"use strict";var r=n(6329),a=n(4372).b,o=n(433);function i(e){a.call(this);var t=this,n=this.es=new o(e);n.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},n.onerror=function(e){n.readyState;var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}r(i,a),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},i.prototype._close=function(e){var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},e.exports=i},1271:(e,t,n)=>{"use strict";var r=n(6329),a=n(7526),o=n(8982);function i(e,t,n,r){o.call(this,e,t,function(e){return function(t,n,r){var o={};"string"===typeof n&&(o.headers={"Content-type":"text/plain"});var i=a.addPath(t,"/xhr_send"),s=new e("POST",i,n,o);return s.once("finish",function(e){if(s=null,200!==e&&204!==e)return r(new Error("http status "+e));r()}),function(){s.close(),s=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}(r),n,r)}r(i,o),e.exports=i},1272:(e,t,n)=>{"use strict";var r=n(6329),a=n(4372).b;function o(e,t){a.call(this),this.sendBuffer=[],this.sender=t,this.url=e}r(o,a),o.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},o.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){t.sendStop=null,t.sendSchedule()},25)},o.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=o},1285:(e,t,n)=>{"use strict";var r=n(4372).b;function a(){var e=this;r.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},a.timeout)}n(6329)(a,r),a.prototype.close=function(){clearTimeout(this.to)},a.timeout=2e3,e.exports=a},1356:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},1395:(e,t,n)=>{"use strict";var r=n(6907),a=n(4416),o=n(7315),i=n(7526),s=n(6329),l=n(4372).b;function c(e){var t=this;l.call(this),r.polluteGlobalNamespace(),this.id="a"+a.string(6);var o=i.addQuery(e,"c="+encodeURIComponent(r.WPrefix+"."+this.id));n.g[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(o),this.timeoutId=setTimeout(function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))},c.timeout)}s(c,l),c.prototype.abort=function(){if(n.g[r.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},c.timeout=35e3,c.scriptErrorTimeout=1e3,c.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},c.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},c.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete n.g[r.WPrefix][this.id]},c.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},c.scriptErrorTimeout))},c.prototype._createScript=function(e){var t,r=this,i=this.script=n.g.document.createElement("script");if(i.id="a"+a.string(8),i.src=e,i.type="text/javascript",i.charset="UTF-8",i.onerror=this._scriptError.bind(this),i.onload=function(){r._abort(new Error("JSONP script loaded abnormally (onload)"))},i.onreadystatechange=function(){if(i.readyState,/loaded|closed/.test(i.readyState)){if(i&&i.htmlFor&&i.onclick){r.loadedOkay=!0;try{i.onclick()}catch(e){}}i&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"===typeof i.async&&n.g.document.attachEvent)if(o.isOpera())(t=this.script2=n.g.document.createElement("script")).text="try{var a = document.getElementById('"+i.id+"'); if(a)a.onerror();}catch(x){};",i.async=t.async=!1;else{try{i.htmlFor=i.id,i.event="onclick"}catch(l){}i.async=!0}"undefined"!==typeof i.async&&(i.async=!0);var s=n.g.document.getElementsByTagName("head")[0];s.insertBefore(i,s.firstChild),t&&s.insertBefore(t,s.firstChild)},e.exports=c},1408:(e,t,n)=>{"use strict";var r=n(6329),a=n(5507),o=n(5120);e.exports=function(e){function t(t,n){a.call(this,e.transportName,t,n)}return r(t,a),t.enabled=function(t,r){if(!n.g.document)return!1;var i=o.extend({},r);return i.sameOrigin=!0,e.enabled(i)&&a.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=a.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},1424:(e,t,n)=>{"use strict";n.d(t,{F6:()=>u,G6:()=>s,eF:()=>i,f7:()=>a,gf:()=>o,ug:()=>c});const r=e=>{try{const t=e.split(".");if(3!==t.length)throw new Error("Invalid JWT token");return JSON.parse((e=>{let t=e.replace(/-/g,"+").replace(/_/g,"/");const n=t.length%4;return n&&(t+="=".repeat(4-n)),atob(t)})(t[1]))}catch(t){return console.error("Error decoding JWT:",t),null}},a=e=>{localStorage.setItem("token",e),console.log("Token saved successfully")},o=()=>localStorage.getItem("token"),i=()=>{localStorage.removeItem("token"),console.log("Token removed")},s=()=>(()=>{const e=o();return null!==e&&""!==e})()&&!(e=>{const t=e||o();if(!t)return!0;const n=r(t);return!n||!n.exp||Math.floor(Date.now()/1e3)>=n.exp})(),l=e=>{const t=e||o();return t?r(t):null},c=()=>{const e=l();return e?{id:e.id,username:e.sub,role:e.role,avatar:e.avatar,firstName:e.firstName,lastName:e.lastName,enabled:e.enabled}:null},u=()=>{const e=l();return(null===e||void 0===e?void 0:e.id)||null}},1483:(e,t,n)=>{"use strict";var r=n(4372).b,a=n(6329),o=n(7526),i=n(5631),s=n(9333),l=n(8357),c=n(1285),u=n(7926),d=n(68);function h(e,t){var n=this;r.call(this),setTimeout(function(){n.doXhr(e,t)},0)}a(h,r),h._getReceiver=function(e,t,n){return n.sameOrigin?new d(t,l):s.enabled?new d(t,s):i.enabled&&n.sameScheme?new d(t,i):u.enabled()?new u(e,t):new d(t,c)},h.prototype.doXhr=function(e,t){var n=this,r=o.addPath(e,"/info");this.xo=h._getReceiver(e,r,t),this.timeoutRef=setTimeout(function(){n._cleanup(!1),n.emit("finish")},h.timeout),this.xo.once("finish",function(e,t){n._cleanup(!0),n.emit("finish",e,t)})},h.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},h.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},h.timeout=8e3,e.exports=h},2514:(e,t,n)=>{"use strict";var r=n(6329),a=n(9302);function o(e){a.call(this),this.initEvent("message",!1,!1),this.data=e}r(o,a),e.exports=o},2555:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>s})},2799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},2822:(e,t,n)=>{"use strict";var r=n(6329),a=n(4372).b,o=n(8357),i=n(68);function s(e){var t=this;a.call(this),this.ir=new i(e,o),this.ir.once("finish",function(e,n){t.ir=null,t.emit("message",JSON.stringify([e,n]))})}r(s,a),s.transportName="iframe-info-receiver",s.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=s},2840:(e,t,n)=>{"use strict";var r=n(6329),a=n(1271),o=n(3863),i=n(9333),s=n(8357),l=n(7315);function c(e){if(!s.enabled&&!i.enabled)throw new Error("Transport created when disabled");a.call(this,e,"/xhr_streaming",o,i)}r(c,a),c.enabled=function(e){return!e.nullOrigin&&(!l.isOpera()&&i.enabled)},c.transportName="xhr-streaming",c.roundTrips=2,c.needBody=!!n.g.document,e.exports=c},3190:(e,t,n)=>{"use strict";n.d(t,{A6:()=>k,C6:()=>o,FH:()=>S,Ni:()=>g,Nk:()=>f,P$:()=>m,RC:()=>N,RE:()=>h,S9:()=>p,U7:()=>c,Ye:()=>i,Zn:()=>s,p6:()=>w,sendFileMessage:()=>y,sendGroupFileMessage:()=>x,so:()=>u,t2:()=>d,wj:()=>l,yD:()=>b,z:()=>v});var r=n(791),a=n(1424);async function o(e,t){const n=(0,a.gf)();if(!n)throw new Error("No JWT token found");const o=await fetch("".concat(r.J,"/chats/ensure?userAId=").concat(encodeURIComponent(e),"&userBId=").concat(encodeURIComponent(t)),{method:"POST",headers:{Authorization:"Bearer ".concat(n)}});if(!o.ok)throw new Error(await o.text()||"Failed to ensure conversation");return(await o.text()).replace(/"/g,"")}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;const o=(0,a.gf)();if(!o)throw new Error("No JWT token found");const i=await fetch("".concat(r.J,"/chats/").concat(encodeURIComponent(e),"/messages/paginated?page=").concat(t,"&size=").concat(n),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(o)}});if(!i.ok)throw new Error(await i.text()||"Failed to get messages");return i.json()}async function s(e){const t=(0,a.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(r.J,"/chats/conversations?userId=").concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error(await n.text()||"Failed to list conversations");return n.json()}async function l(e,t,n){const o=(0,a.gf)();if(!o)throw new Error("No JWT token found");const i=await fetch("".concat(r.J,"/groups/create?creatorId=").concat(encodeURIComponent(e),"&groupName=").concat(encodeURIComponent(t)),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)});if(!i.ok)throw new Error(await i.text()||"Failed to create group");return i.json()}async function c(e,t){const n=(0,a.gf)();if(!n)throw new Error("No JWT token found");const o=await fetch("".concat(r.J,"/groups/").concat(encodeURIComponent(e),"/join?userId=").concat(encodeURIComponent(t)),{method:"POST",headers:{Authorization:"Bearer ".concat(n)}});if(!o.ok)throw new Error(await o.text()||"Failed to join group")}async function u(e,t){const n=(0,a.gf)();if(!n)throw new Error("No JWT token found");const o=await fetch("".concat(r.J,"/groups/").concat(encodeURIComponent(e),"/add-member-if-not-friend?userId=").concat(encodeURIComponent(t)),{method:"POST",headers:{Authorization:"Bearer ".concat(n)}});if(!o.ok)throw new Error(await o.text()||"Kh\xf4ng th\u1ec3 th\xeam th\xe0nh vi\xean v\xe0o nh\xf3m")}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;const o=(0,a.gf)();if(!o)throw new Error("No JWT token found");const i=await fetch("".concat(r.J,"/groups/").concat(encodeURIComponent(e),"/messages/paginated?page=").concat(t,"&size=").concat(n),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(o)}});if(!i.ok)throw new Error(await i.text()||"Failed to get group messages");return i.json()}async function h(e,t,n){const o=(0,a.gf)();if(!o)throw new Error("No JWT token found");const i=await fetch("".concat(r.J,"/groups/").concat(encodeURIComponent(e),"/messages?senderId=").concat(encodeURIComponent(t)),{method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8",Authorization:"Bearer ".concat(o)},body:n});if(!i.ok)throw new Error(await i.text()||"Failed to send group message");return i.json()}async function m(e){const t=(0,a.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(r.J,"/groups/user/").concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error(await n.text()||"Failed to list groups");return n.json()}async function f(e){const t=(0,a.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(r.J,"/groups/").concat(encodeURIComponent(e),"/members"),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error(await n.text()||"Failed to get group members");return n.json()}async function p(e,t,n){const o=(0,a.gf)();if(!o)throw new Error("No JWT token found");const i=await fetch("".concat(r.J,"/groups/").concat(encodeURIComponent(e),"/members/").concat(encodeURIComponent(t),"?requesterId=").concat(encodeURIComponent(n)),{method:"DELETE",headers:{Authorization:"Bearer ".concat(o)}});if(!i.ok){const e=await i.text();throw new Error(e||"Failed to remove member")}}async function g(e,t){const n=(0,a.gf)();if(!n)throw new Error("No JWT token found");const o=await fetch("".concat(r.J,"/groups/").concat(encodeURIComponent(e),"?requesterId=").concat(encodeURIComponent(t)),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});if(!o.ok){const e=await o.text();throw new Error(e||"Failed to delete group")}}async function v(e,t,n){const o=(0,a.gf)();if(!o)throw new Error("No JWT token found");const i=new FormData;i.append("image",n);const s=await fetch("".concat(r.J,"/chats/").concat(encodeURIComponent(e),"/send-image?senderId=").concat(encodeURIComponent(t)),{method:"POST",headers:{Authorization:"Bearer ".concat(o)},body:i});if(!s.ok){const e=await s.text();throw new Error(e||"Failed to send image message")}return s.json()}async function b(e,t,n){const o=(0,a.gf)();if(!o)throw new Error("No JWT token found");const i=new FormData;i.append("image",n);const s=await fetch("".concat(r.J,"/chats/group/").concat(encodeURIComponent(e),"/send-image?senderId=").concat(encodeURIComponent(t)),{method:"POST",headers:{Authorization:"Bearer ".concat(o)},body:i});if(!s.ok){const e=await s.text();throw new Error(e||"Failed to send group image message")}return s.json()}async function y(e,t,n){const o=(0,a.gf)();if(!o)throw new Error("No JWT token found");const i=new FormData;i.append("file",n);const s=await fetch("".concat(r.J,"/chats/").concat(encodeURIComponent(e),"/send-file?senderId=").concat(encodeURIComponent(t)),{method:"POST",headers:{Authorization:"Bearer ".concat(o)},body:i});if(!s.ok){const e=await s.text();throw new Error(e||"Failed to send file message")}return s.json()}async function x(e,t,n){const o=(0,a.gf)();if(!o)throw new Error("No JWT token found");const i=new FormData;i.append("file",n);const s=await fetch("".concat(r.J,"/chats/group/").concat(encodeURIComponent(e),"/send-file?senderId=").concat(encodeURIComponent(t)),{method:"POST",headers:{Authorization:"Bearer ".concat(o)},body:i});if(!s.ok){const e=await s.text();throw new Error(e||"Failed to send group file message")}return s.json()}async function w(e,t){const n=(0,a.gf)();if(!n)throw new Error("No JWT token found");const o=await fetch("".concat(r.J,"/chats/download-file?fileUrl=").concat(encodeURIComponent(e)),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}});if(!o.ok){const e=await o.text().catch(()=>"Unknown server error");throw new Error(e||"T\u1ea3i file th\u1ea5t b\u1ea1i")}const i=await o.blob();let s=t;const l=o.headers.get("Content-Disposition");if(!s&&l){const e=l.match(/filename="?([^";]+)"?/);e&&(s=decodeURIComponent(e[1]))}s||(s="file");const c=window.URL.createObjectURL(i),u=document.createElement("a");u.href=c,u.download=s,document.body.appendChild(u),u.click(),setTimeout(()=>{window.URL.revokeObjectURL(c),u.remove()},100)}async function N(e,t){const n=(0,a.gf)();if(!n)throw new Error("No JWT token found");const o=await fetch("".concat(r.J,"/chats/delete-message/").concat(encodeURIComponent(e),"?userId=").concat(encodeURIComponent(t)),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});if(!o.ok){const e=await o.text().catch(()=>"Unknown server error");throw new Error(e||"X\xf3a tin nh\u1eafn th\u1ea5t b\u1ea1i")}}async function k(e){const t=(0,a.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(r.J,"/chats/images/").concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!n.ok){const e=await n.text().catch(()=>"Unknown server error");throw new Error(e||"L\u1ea5y danh s\xe1ch \u1ea3nh th\u1ea5t b\u1ea1i")}return n.json()}async function S(e){const t=(0,a.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(r.J,"/chats/files/").concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!n.ok){const e=await n.text().catch(()=>"Unknown server error");throw new Error(e||"L\u1ea5y danh s\xe1ch file th\u1ea5t b\u1ea1i")}return n.json()}},3214:(e,t,n)=>{"use strict";var r=n(6329),a=n(9302);function o(){a.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}r(o,a),e.exports=o},3265:(e,t,n)=>{"use strict";var r={};["log","debug","warn"].forEach(function(e){var t;try{t=n.g.console&&n.g.console[e]&&n.g.console[e].apply}catch(a){}r[e]=t?function(){return n.g.console[e].apply(n.g.console,arguments)}:"log"===e?function(){}:r.log}),e.exports=r},3270:(e,t,n)=>{"use strict";var r=n(7526),a=n(1091),o=n(8359),i=n(2822),s=n(6907),l=n(6646);e.exports=function(e,t){var n,c={};t.forEach(function(e){e.facadeTransport&&(c[e.facadeTransport.transportName]=e.facadeTransport)}),c[i.transportName]=i,e.bootstrap_iframe=function(){var t;s.currentWindowId=l.hash.slice(1);a.attachEvent("message",function(a){if(a.source===parent&&("undefined"===typeof n&&(n=a.origin),a.origin===n)){var i;try{i=JSON.parse(a.data)}catch(p){return void a.data}if(i.windowId===s.currentWindowId)switch(i.type){case"s":var u;try{u=JSON.parse(i.data)}catch(p){i.data;break}var d=u[0],h=u[1],m=u[2],f=u[3];if(d!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+d+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(m,l.href)||!r.isOriginEqual(f,l.href))throw new Error("Can't connect to different domain from within an iframe. ("+l.href+", "+m+", "+f+")");t=new o(new c[h](m,f));break;case"m":t._send(i.data);break;case"c":t&&t._close(),t=null}}}),s.postMessage("s")}}},3331:(e,t,n)=>{"use strict";var r=n.g.WebSocket||n.g.MozWebSocket;e.exports=r?function(e){return new r(e)}:void 0},3447:e=>{"use strict";function t(){this._listeners={}}t.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},t.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);-1===r||(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e])}},t.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],a=0;a<r.length;a++)r[a].apply(this,n)},e.exports=t},3775:(e,t,n)=>{"use strict";var r=n(1356),a=n(7237),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(o,"")}var h=[["#","hash"],["?","query"],function(e,t){return p(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],m={hash:1,query:1};function f(e){var t,r=("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{}).location||{},a={},o=typeof(e=e||r);if("blob:"===e.protocol)a=new v(unescape(e.pathname),{});else if("string"===o)for(t in a=new v(e,{}),m)delete a[t];else if("object"===o){for(t in e)t in m||(a[t]=e[t]);void 0===a.slashes&&(a.slashes=s.test(e.href))}return a}function p(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=d(e)).replace(i,""),t=t||{};var n,r=c.exec(e),a=r[1]?r[1].toLowerCase():"",o=!!r[2],s=!!r[3],l=0;return o?s?(n=r[2]+r[3]+r[4],l=r[2].length+r[3].length):(n=r[2]+r[4],l=r[2].length):s?(n=r[3]+r[4],l=r[3].length):n=r[4],"file:"===a?l>=2&&(n=n.slice(2)):p(a)?n=r[4]:a?o&&(n=n.slice(2)):l>=2&&p(t.protocol)&&(n=r[4]),{protocol:a,slashes:o||p(a),slashesCount:l,rest:n}}function v(e,t,n){if(e=(e=d(e)).replace(i,""),!(this instanceof v))return new v(e,t,n);var o,s,l,c,m,b,y=h.slice(),x=typeof t,w=this,N=0;for("object"!==x&&"string"!==x&&(n=t,t=null),n&&"function"!==typeof n&&(n=a.parse),o=!(s=g(e||"",t=f(t))).protocol&&!s.slashes,w.slashes=s.slashes||o&&t.slashes,w.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!p(w.protocol)))&&(y[3]=[/(.*)/,"pathname"]);N<y.length;N++)"function"!==typeof(c=y[N])?(l=c[0],b=c[1],l!==l?w[b]=e:"string"===typeof l?~(m="@"===l?e.lastIndexOf(l):e.indexOf(l))&&("number"===typeof c[2]?(w[b]=e.slice(0,m),e=e.slice(m+c[2])):(w[b]=e.slice(m),e=e.slice(0,m))):(m=l.exec(e))&&(w[b]=m[1],e=e.slice(0,m.index)),w[b]=w[b]||o&&c[3]&&t[b]||"",c[4]&&(w[b]=w[b].toLowerCase())):e=c(e,w);n&&(w.query=n(w.query)),o&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,a=n[r-1],o=!1,i=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),i++):i&&(0===r&&(o=!0),n.splice(r,1),i--);return o&&n.unshift(""),"."!==a&&".."!==a||n.push(""),n.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&p(w.protocol)&&(w.pathname="/"+w.pathname),r(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(m=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,m),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(m+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&p(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}v.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"===typeof t&&t.length&&(t=(n||a.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,l.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";o[e]=t.charAt(0)!==i?i+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(o.username=t.slice(0,s),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(s+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<h.length;c++){var u=h[c];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&p(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"===typeof e||(e=a.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var i=o+(n.protocol&&n.slashes||p(n.protocol)?"//":"");return n.username?(i+=n.username,n.password&&(i+=":"+n.password),i+="@"):n.password?(i+=":"+n.password,i+="@"):"file:"!==n.protocol&&p(n.protocol)&&!r&&"/"!==n.pathname&&(i+="@"),(":"===r[r.length-1]||l.test(n.hostname)&&!n.port)&&(r+=":"),i+=r+n.pathname,(t="object"===typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},v.extractProtocol=g,v.location=f,v.trimLeft=d,v.qs=a,e.exports=v},3863:(e,t,n)=>{"use strict";var r=n(6329),a=n(4372).b,o=function(){};function i(e,t){a.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";n.emit("close",null,r),n._cleanup()})}r(i,a),i.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var a=r.slice(0,n);a&&(o(),this.emit("message",a))}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=i},3986:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n.d(t,{A:()=>r})},4288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=y.prototype=new b;x.constructor=y,p(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function S(e,t,r,a,o,i){return r=i.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(){}function A(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return A((u=e._init)(e._payload),t,a,o,i)}}if(u)return i=i(e),u=""===o?"."+_(e,0):o,w(i)?(a="",null!=u&&(a=u.replace(C,"$&/")+"/"),A(i,t,a,"",function(e){return e})):null!=i&&(j(i)&&(l=i,c=a+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+u,i=S(l.type,c,void 0,0,0,l.props)),t.push(i)),1;u=0;var d,f=""===o?".":o+":";if(w(e))for(var p=0;p<e.length;p++)u+=A(o=e[p],t,a,s=f+_(o,p),i);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(o=e.next()).done;)u+=A(o=o.value,t,a,s=f+_(o,p++),i);else if("object"===s){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,o,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function T(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",function(e){return t.call(n,e,a++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function O(){}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=y,t.StrictMode=o,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return N.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=p({},e.props),a=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!k.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var i=Array(o),s=0;s<o;s++)i[s]=arguments[s+2];r.children=i}return S(e.type,a,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,a={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+2];a.children=s}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===a[r]&&(a[r]=i[r]);return S(e,o,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.T,n={};N.T=n;try{var r=e(),a=N.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(O,R)}catch(o){R(o)}finally{N.T=t}},t.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},t.use=function(e){return N.H.use(e)},t.useActionState=function(e,t,n){return N.H.useActionState(e,t,n)},t.useCallback=function(e,t){return N.H.useCallback(e,t)},t.useContext=function(e){return N.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return N.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=N.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return N.H.useId()},t.useImperativeHandle=function(e,t,n){return N.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.H.useMemo(e,t)},t.useOptimistic=function(e,t){return N.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return N.H.useReducer(e,t,n)},t.useRef=function(e){return N.H.useRef(e)},t.useState=function(e){return N.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.H.useTransition()},t.version="19.1.1"},4372:(e,t,n)=>{"use strict";var r=n(6329),a=n(3447);function o(){a.call(this)}r(o,a),o.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},o.prototype.once=function(e,t){var n=this,r=!1;this.on(e,function a(){n.removeListener(e,a),r||(r=!0,t.apply(this,arguments))})},o.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),a=1;a<n;a++)r[a-1]=arguments[a];for(var o=0;o<t.length;o++)t[o].apply(this,r)}},o.prototype.on=o.prototype.addListener=a.prototype.addEventListener,o.prototype.removeListener=a.prototype.removeEventListener,e.exports.b=o},4391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4416:(e,t,n)=>{"use strict";var r=n(7429),a="abcdefghijklmnopqrstuvwxyz012345";e.exports={string:function(e){for(var t=r.randomBytes(e),n=[],o=0;o<e;o++)n.push(a.substr(t[o]%32,1));return n.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},4514:(e,t,n)=>{"use strict";var r=n(6329),a=n(1271),o=n(1200),i=n(9333),s=n(433);function l(e){if(!l.enabled())throw new Error("Transport created when disabled");a.call(this,e,"/eventsource",o,i)}r(l,a),l.enabled=function(){return!!s},l.transportName="eventsource",l.roundTrips=2,e.exports=l},4683:(e,t,n)=>{"use strict";var r=n(4372).b,a=n(6329),o=n(1091),i=n(7526),s=n.g.XMLHttpRequest;function l(e,t,n,a){var o=this;r.call(this),setTimeout(function(){o._start(e,t,n,a)},0)}a(l,r),l.prototype._start=function(e,t,n,r){var a=this;try{this.xhr=new s}catch(u){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=i.addQuery(t,"t="+ +new Date),this.unloadRef=o.unloadAdd(function(){a._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){a.emit("finish",0,""),a._cleanup(!1)})}catch(d){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!l.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var c in r.headers)this.xhr.setRequestHeader(c,r.headers[c]);this.xhr.onreadystatechange=function(){if(a.xhr){var e,t,n=a.xhr;switch(n.readyState,n.readyState){case 3:try{t=n.status,e=n.responseText}catch(d){}1223===t&&(t=204),200===t&&e&&e.length>0&&a.emit("chunk",t,e);break;case 4:1223===(t=n.status)&&(t=204),12005!==t&&12029!==t||(t=0),n.responseText,a.emit("finish",t,n.responseText),a._cleanup(!1)}}};try{a.xhr.send(n)}catch(d){a.emit("finish",0,""),a._cleanup(!1)}},l.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},l.prototype.close=function(){this._cleanup(!0)},l.enabled=!!s;var c=["Active"].concat("Object").join("X");!l.enabled&&c in n.g&&(s=function(){try{return new n.g[c]("Microsoft.XMLHTTP")}catch(e){return null}},l.enabled=!!new s);var u=!1;try{u="withCredentials"in new s}catch(d){}l.supportsCORS=u,e.exports=l},4892:(e,t,n)=>{"use strict";var r=n(6329),a=n(4372).b;function o(e,t,n){a.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}r(o,a),o.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){e.emit("message",t)}),t.once("close",function(n,r){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))})},o.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=o},5043:(e,t,n)=>{"use strict";e.exports=n(4288)},5081:(e,t,n)=>{"use strict";var r=n(7129);e.exports=n(7868)(r),"_sockjs_onload"in n.g&&setTimeout(n.g._sockjs_onload,1)},5120:e=>{"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,a=arguments.length;r<a;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},5352:(e,t,n)=>{"use strict";n.d(t,{BV:()=>Pe,C5:()=>Te,Kd:()=>mt,N_:()=>pt,Zp:()=>de,g:()=>me,k2:()=>gt,qh:()=>Re,sv:()=>Ie,zy:()=>le});var r=n(3986),a=n(2555),o=n(5043);const i=["sri"],s=["page"],l=["page","matches"],c=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],u=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],d=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var h="popstate";function m(){return x(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return v("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:b(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function f(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function g(e,t){return{usr:e.state,key:e.key,idx:t}}function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return(0,a.A)((0,a.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function b(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function x(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:o=document.defaultView,v5Compat:i=!1}=r,s=o.history,l="POP",c=null,u=d();function d(){return(s.state||{idx:null}).idx}function m(){l="POP";let e=d(),t=null==e?null:e-u;u=e,c&&c({action:l,location:p.location,delta:t})}function f(e){return w(e)}null==u&&(u=0,s.replaceState((0,a.A)((0,a.A)({},s.state),{},{idx:u}),""));let p={get action(){return l},get location(){return e(o,s)},listen(e){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(h,m),c=e,()=>{o.removeEventListener(h,m),c=null}},createHref:e=>t(o,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let r=v(p.location,e,t);n&&n(r,e),u=d()+1;let a=g(r,u),h=p.createHref(r);try{s.pushState(a,"",h)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;o.location.assign(h)}i&&c&&c({action:l,location:p.location,delta:1})},replace:function(e,t){l="REPLACE";let r=v(p.location,e,t);n&&n(r,e),u=d();let a=g(r,u),o=p.createHref(r);s.replaceState(a,"",o),i&&c&&c({action:l,location:p.location,delta:0})},go:e=>s.go(e)};return p}function w(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),f(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:b(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function N(e,t){return k(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function k(e,t,n,r){let a=F(("string"===typeof t?y(t):t).pathname||"/",n);if(null==a)return null;let o=S(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let i=null;for(let s=0;null==i&&s<o.length;++s){let e=D(a);i=P(o[s],e,r)}return i}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(e,o){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,s=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&i)return;f(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=W([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(f(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),S(e.children,t,u,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:O(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of j(e.path))o(e,t,!0,r);else o(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return a?[o,""]:[o];let i=j(r.join("/")),s=[];return s.push(...i.map(e=>""===e?o:[o,e].join("/"))),a&&s.push(...i),s.map(t=>e.startsWith("/")&&""===t?"/":t)}var C=/^:[\w-]+$/,_=3,E=2,A=1,T=10,I=-2,R=e=>"*"===e;function O(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=I),t&&(r+=E),n.filter(e=>!R(e)).reduce((e,t)=>e+(C.test(t)?_:""===t?A:T),r)}function P(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,a={},o="/",i=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:W([o,u.pathname]),pathnameBase:H(W([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=W([o,u.pathnameBase]))}return i}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=U(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=s[n]||"";i=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:i,pattern:e}}function U(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return p(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function F(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function z(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function M(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function B(e){let t=M(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function V(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=y(e):(r=(0,a.A)({},e),f(!r.pathname||!r.pathname.includes("?"),z("?","pathname","search",r)),f(!r.pathname||!r.pathname.includes("#"),z("#","pathname","hash",r)),f(!r.search||!r.search.includes("#"),z("#","search","hash",r)));let i,s=""===e||""===r.pathname,l=s?"/":r.pathname;if(null==l)i=n;else{let e=t.length-1;if(!o&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:a=""}="string"===typeof e?y(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:q(r),hash:J(a)}}(r,i),u=l&&"/"!==l&&l.endsWith("/"),d=(s||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}var W=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function K(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var G=["POST","PUT","PATCH","DELETE"],$=(new Set(G),["GET",...G]);new Set($),Symbol("ResetLoaderData");var Q=o.createContext(null);Q.displayName="DataRouter";var X=o.createContext(null);X.displayName="DataRouterState";var Y=o.createContext(!1);var Z=o.createContext({isTransitioning:!1});Z.displayName="ViewTransition";var ee=o.createContext(new Map);ee.displayName="Fetchers";var te=o.createContext(null);te.displayName="Await";var ne=o.createContext(null);ne.displayName="Navigation";var re=o.createContext(null);re.displayName="Location";var ae=o.createContext({outlet:null,matches:[],isDataRoute:!1});ae.displayName="Route";var oe=o.createContext(null);oe.displayName="RouteError";var ie=!0;function se(){return null!=o.useContext(re)}function le(){return f(se(),"useLocation() may be used only in the context of a <Router> component."),o.useContext(re).location}var ce="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ue(e){o.useContext(ne).static||o.useLayoutEffect(e)}function de(){let{isDataRoute:e}=o.useContext(ae);return e?function(){let{router:e}=Ne("useNavigate"),t=Se("useNavigate"),n=o.useRef(!1);ue(()=>{n.current=!0});let r=o.useCallback(async function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(n.current,ce),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,(0,a.A)({fromRouteId:t},o)))},[e,t]);return r}():function(){f(se(),"useNavigate() may be used only in the context of a <Router> component.");let e=o.useContext(Q),{basename:t,navigator:n}=o.useContext(ne),{matches:r}=o.useContext(ae),{pathname:a}=le(),i=JSON.stringify(B(r)),s=o.useRef(!1);ue(()=>{s.current=!0});let l=o.useCallback(function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(p(s.current,ce),!s.current)return;if("number"===typeof r)return void n.go(r);let l=V(r,JSON.parse(i),a,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:W([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,i,a,e]);return l}()}var he=o.createContext(null);function me(){let{matches:e}=o.useContext(ae),t=e[e.length-1];return t?t.params:{}}function fe(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=o.useContext(ae),{pathname:r}=le(),a=JSON.stringify(B(n));return o.useMemo(()=>V(e,JSON.parse(a),r,"path"===t),[e,a,r,t])}function pe(e,t,n,r,i){f(se(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=o.useContext(ne),{matches:l}=o.useContext(ae),c=l[l.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",m=c&&c.route;if(ie){let e=m&&m.path||"";_e(d,!m||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let g,v=le();if(t){var b;let e="string"===typeof t?y(t):t;f("/"===h||(null===(b=e.pathname)||void 0===b?void 0:b.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),g=e}else g=v;let x=g.pathname||"/",w=x;if("/"!==h){let e=h.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let k=N(e,{pathname:w});ie&&(p(m||null!=k,'No routes matched location "'.concat(g.pathname).concat(g.search).concat(g.hash,'" ')),p(null==k||void 0!==k[k.length-1].route.element||void 0!==k[k.length-1].route.Component||void 0!==k[k.length-1].route.lazy,'Matched leaf route at location "'.concat(g.pathname).concat(g.search).concat(g.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.')));let S=xe(k&&k.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:W([h,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:W([h,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,n,r,i);return t&&S?o.createElement(re.Provider,{value:{location:(0,a.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:"POP"}},S):S}function ge(){let e=je(),t=K(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},s=null;return ie&&(console.error("Error handled by React Router default ErrorBoundary:",e),s=o.createElement(o.Fragment,null,o.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),o.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",o.createElement("code",{style:i},"ErrorBoundary")," or"," ",o.createElement("code",{style:i},"errorElement")," prop on your route."))),o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:a},n):null,s)}var ve=o.createElement(ge,null),be=class extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?o.createElement(ae.Provider,{value:this.props.routeContext},o.createElement(oe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ye(e){let{routeContext:t,match:n,children:r}=e,a=o.useContext(Q);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(ae.Provider,{value:t},r)}function xe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let a=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=a.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));f(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,l=-1;if(n)for(let o=0;o<a.length;o++){let e=a[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=o),e.route.id){let{loaderData:t,errors:r}=n,o=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||o){s=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}return a.reduceRight((e,c,u)=>{let d,h=!1,m=null,f=null;n&&(d=i&&c.route.id?i[c.route.id]:void 0,m=c.route.errorElement||ve,s&&(l<0&&0===u?(_e("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,f=null):l===u&&(h=!0,f=c.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,u+1)),g=()=>{let t;return t=d?m:h?f:c.route.Component?o.createElement(c.route.Component,null):c.route.element?c.route.element:e,o.createElement(ye,{match:c,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?o.createElement(be,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0},unstable_onError:r}):g()},null)}function we(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ne(e){let t=o.useContext(Q);return f(t,we(e)),t}function ke(e){let t=o.useContext(X);return f(t,we(e)),t}function Se(e){let t=function(e){let t=o.useContext(ae);return f(t,we(e)),t}(e),n=t.matches[t.matches.length-1];return f(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function je(){var e;let t=o.useContext(oe),n=ke("useRouteError"),r=Se("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[r]}var Ce={};function _e(e,t,n){t||Ce[e]||(Ce[e]=!0,p(!1,n))}var Ee={};function Ae(e,t){e||Ee[t]||(Ee[t]=!0,console.warn(t))}o.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:a}=e;return pe(t,void 0,r,a,n)});function Te(e){let{to:t,replace:n,state:r,relative:a}=e;f(se(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=o.useContext(ne);p(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=o.useContext(ae),{pathname:l}=le(),c=de(),u=V(t,B(s),l,"path"===a),d=JSON.stringify(u);return o.useEffect(()=>{c(JSON.parse(d),{replace:n,state:r,relative:a})},[c,d,a,n,r]),null}function Ie(e){return function(e){let t=o.useContext(ae).outlet;return t?o.createElement(he.Provider,{value:e},t):t}(e.context)}function Re(e){f(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oe(e){let{basename:t="/",children:n=null,location:r,navigationType:a="POP",navigator:i,static:s=!1}=e;f(!se(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=o.useMemo(()=>({basename:l,navigator:i,static:s,future:{}}),[l,i,s]);"string"===typeof r&&(r=y(r));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:g="default"}=r,v=o.useMemo(()=>{let e=F(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:m,key:g},navigationType:a}},[l,u,d,h,m,g,a]);return p(null!=v,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:o.createElement(ne.Provider,{value:c},o.createElement(re.Provider,{children:n,value:v}))}function Pe(e){let{children:t,location:n}=e;return pe(Le(t),n)}o.Component;function Le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return o.Children.forEach(e,(e,r)=>{if(!o.isValidElement(e))return;let a=[...t,r];if(e.type===o.Fragment)return void n.push.apply(n,Le(e.props.children,a));f(e.type===Re,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),f(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Le(e.props.children,a)),n.push(i)}),n}var Ue="get",De="application/x-www-form-urlencoded";function Fe(e){return null!=e&&"string"===typeof e.tagName}var ze=null;var Me=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Be(e){return null==e||Me.has(e)?e:(p(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(De,'"')),null)}function Ve(e,t){let n,r,a,o,i;if(Fe(s=e)&&"form"===s.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?F(i,t):null,n=e.getAttribute("method")||Ue,a=Be(e.getAttribute("enctype"))||De,o=new FormData(e)}else if(function(e){return Fe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Fe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||i.getAttribute("action");if(r=s?F(s,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||Ue,a=Be(e.getAttribute("formenctype"))||Be(i.getAttribute("enctype"))||De,o=new FormData(i,e),!function(){if(null===ze)try{new FormData(document.createElement("form"),0),ze=!1}catch(e){ze=!0}return ze}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,r)}}else{if(Fe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ue,r=null,a=De,i=e}var s;return o&&"text/plain"===a&&(i=o,o=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:o,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function We(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function He(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===F(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function qe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Je(e){return null!=e&&"string"===typeof e.page}function Ke(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ge(e,t,n,r,a,o){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>i(e,t)||s(e,t)):"data"===o?t.filter((t,o)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,o)||s(t,o))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function $e(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1),[...new Set(r)];var r}function Qe(e,t){let n=new Set,r=new Set(t);return e.reduce((e,a)=>{if(t&&!Je(a)&&"script"===a.as&&a.href&&r.has(a.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(a));return n.has(o)||(n.add(o),e.push({key:o,link:a})),e},[])}function Xe(e,t){return"lazy"===e.mode&&!0===t}function Ye(){let e=o.useContext(Q);return We(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ze(){let e=o.useContext(X);return We(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var et=o.createContext(void 0);function tt(){let e=o.useContext(et);return We(e,"You must render this element inside a <HydratedRouter> element"),e}function nt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function rt(e,t,n){if(n&&!st)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}et.displayName="FrameworkContext";function at(e){let{page:t}=e,n=(0,r.A)(e,s),{router:i}=Ye(),l=o.useMemo(()=>N(i.routes,t,i.basename),[i.routes,t,i.basename]);return l?o.createElement(it,(0,a.A)({page:t,matches:l},n)):null}function ot(e){let{manifest:t,routeModules:n}=tt(),[r,i]=o.useState([]);return o.useEffect(()=>{let r=!1;return async function(e,t,n){return Qe((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await qe(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ke).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,a.A)((0,a.A)({},e),{},{rel:"prefetch",as:"style"}):(0,a.A)((0,a.A)({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}function it(e){let{page:t,matches:n}=e,i=(0,r.A)(e,l),s=le(),{manifest:c,routeModules:u}=tt(),{basename:d}=Ye(),{loaderData:h,matches:m}=Ze(),f=o.useMemo(()=>Ge(t,n,m,c,s,"data"),[t,n,m,c,s]),p=o.useMemo(()=>Ge(t,n,m,c,s,"assets"),[t,n,m,c,s]),g=o.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let a=c.routes[t.route.id];a&&a.hasLoader&&(!f.some(e=>e.route.id===t.route.id)&&t.route.id in h&&null!==(n=u[t.route.id])&&void 0!==n&&n.shouldRevalidate||a.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let a=He(t,d,"data");return r&&e.size>0&&a.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[d,h,s,c,f,n,t,u]),v=o.useMemo(()=>$e(p,c),[p,c]),b=ot(p);return o.createElement(o.Fragment,null,g.map(e=>o.createElement("link",(0,a.A)({key:e,rel:"prefetch",as:"fetch",href:e},i))),v.map(e=>o.createElement("link",(0,a.A)({key:e,rel:"modulepreload",href:e},i))),b.map(e=>{let{key:t,link:n}=e;return o.createElement("link",(0,a.A)({key:t,nonce:i.nonce},n))}))}var st=!1;function lt(e){let{manifest:t,serverHandoffString:n,isSpaMode:s,renderMeta:l,routeDiscovery:c,ssr:u}=tt(),{router:d,static:h,staticContext:m}=Ye(),{matches:f}=Ze(),p=o.useContext(Y),g=Xe(c,u);l&&(l.didRenderScripts=!0);let v=rt(f,null,s);o.useEffect(()=>{st=!0},[]);let b=o.useMemo(()=>{var s;if(p)return null;let l=m?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",c=h?"".concat(null!==(s=t.hmr)&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(v.map((e,n)=>{let r="route".concat(n),a=t.routes[e.route.id];We(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:i,clientMiddlewareModule:s,hydrateFallbackModule:l,module:c}=a,u=[...o?[{module:o,varName:"".concat(r,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(r,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,o=(0,r.A)(e,i),s=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),c=["/"];for(l.pop();l.length>0;)c.push("/".concat(l.join("/"))),l.pop();c.forEach(e=>{let n=N(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let u=[...s].reduce((e,t)=>Object.assign(e,{[t]:o.routes[t]}),{});return(0,a.A)((0,a.A)({},o),{},{routes:u,sri:!!n||void 0})}(t,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return o.createElement(o.Fragment,null,o.createElement("script",(0,a.A)((0,a.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:void 0})),o.createElement("script",(0,a.A)((0,a.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:c},type:"module",async:!0})))},[]),y=st||p?[]:(x=t.entry.imports.concat($e(v,t,{includeHydrateFallback:!0})),[...new Set(x)]);var x;let w="object"===typeof t.sri?t.sri:{};return Ae(!p,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),st||p?null:o.createElement(o.Fragment,null,"object"===typeof t.sri?o.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:o.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),o.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>o.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),b)}function ct(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}o.Component;function ut(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,a=o.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(K(t))return o.createElement(dt,{title:"Unhandled Thrown Response!"},o.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),ie?a:null);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return o.createElement(dt,{title:"Application Error!",isOutsideRemixApp:n},o.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),o.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),a)}function dt(e){var t;let{title:n,renderScripts:r,isOutsideRemixApp:a,children:i}=e,{routeModules:s}=tt();return null!==(t=s.root)&&void 0!==t&&t.Layout&&!a?i:o.createElement("html",{lang:"en"},o.createElement("head",null,o.createElement("meta",{charSet:"utf-8"}),o.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),o.createElement("title",null,n)),o.createElement("body",null,o.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,r?o.createElement(lt,null):null)))}var ht="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ht&&(window.__reactRouterVersion="7.9.1")}catch(kt){}function mt(e){let{basename:t,children:n,window:r}=e,a=o.useRef();null==a.current&&(a.current=m({window:r,v5Compat:!0}));let i=a.current,[s,l]=o.useState({action:i.action,location:i.location}),c=o.useCallback(e=>{o.startTransition(()=>l(e))},[l]);return o.useLayoutEffect(()=>i.listen(c),[i,c]),o.createElement(Oe,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:i})}var ft=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pt=o.forwardRef(function(e,t){let n,{onClick:i,discover:s="render",prefetch:l="none",relative:u,reloadDocument:d,replace:h,state:m,target:g,to:v,preventScrollReset:y,viewTransition:x}=e,w=(0,r.A)(e,c),{basename:N}=o.useContext(ne),k="string"===typeof v&&ft.test(v),S=!1;if("string"===typeof v&&k&&(n=v,ht))try{let e=new URL(window.location.href),t=v.startsWith("//")?new URL(e.protocol+v):new URL(v),n=F(t.pathname,N);t.origin===e.origin&&null!=n?v=n+t.search+t.hash:S=!0}catch(kt){p(!1,'<Link to="'.concat(v,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let j=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(se(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=o.useContext(ne),{hash:a,pathname:i,search:s}=fe(e,{relative:t}),l=i;return"/"!==n&&(l="/"===i?n:W([n,i])),r.createHref({pathname:l,search:s,hash:a})}(v,{relative:u}),[C,_,E]=function(e,t){let n=o.useContext(et),[r,a]=o.useState(!1),[i,s]=o.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,m=o.useRef(null);o.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[e]),o.useEffect(()=>{if(r){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{a(!0)},p=()=>{a(!1),s(!1)};return n?"intent"!==e?[i,m,{}]:[i,m,{onFocus:nt(l,f),onBlur:nt(c,p),onMouseEnter:nt(u,f),onMouseLeave:nt(d,p),onTouchStart:nt(h,f)}]:[!1,m,{}]}(l,w),A=function(e){let{target:t,replace:n,state:r,preventScrollReset:a,relative:i,viewTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=de(),c=le(),u=fe(e,{relative:i});return o.useCallback(o=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(o,t)){o.preventDefault();let t=void 0!==n?n:b(c)===b(u);l(e,{replace:t,state:r,preventScrollReset:a,relative:i,viewTransition:s})}},[c,l,u,n,r,t,e,a,i,s])}(v,{replace:h,state:m,target:g,preventScrollReset:y,relative:u,viewTransition:x});let T=o.createElement("a",(0,a.A)((0,a.A)((0,a.A)({},w),E),{},{href:n||j,onClick:S||d?i:function(e){i&&i(e),e.defaultPrevented||A(e)},ref:ct(t,_),target:g,"data-discover":k||"render"!==s?void 0:"true"}));return C&&!k?o.createElement(o.Fragment,null,T,o.createElement(at,{page:j})):T});pt.displayName="Link";var gt=o.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:l=!1,style:c,to:d,viewTransition:h,children:m}=e,p=(0,r.A)(e,u),g=fe(d,{relative:p.relative}),v=le(),b=o.useContext(X),{navigator:y,basename:x}=o.useContext(ne),w=null!=b&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.useContext(Z);f(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=yt("useViewTransitionState"),a=fe(e,{relative:t});if(!n.isTransitioning)return!1;let i=F(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=F(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=L(a.pathname,s)||null!=L(a.pathname,i)}(g)&&!0===h,N=y.encodeLocation?y.encodeLocation(g).pathname:g.pathname,k=v.pathname,S=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(k=k.toLowerCase(),S=S?S.toLowerCase():null,N=N.toLowerCase()),S&&x&&(S=F(S,x)||S);const j="/"!==N&&N.endsWith("/")?N.length-1:N.length;let C,_=k===N||!l&&k.startsWith(N)&&"/"===k.charAt(j),E=null!=S&&(S===N||!l&&S.startsWith(N)&&"/"===S.charAt(N.length)),A={isActive:_,isPending:E,isTransitioning:w},T=_?n:void 0;C="function"===typeof s?s(A):[s,_?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let I="function"===typeof c?c(A):c;return o.createElement(pt,(0,a.A)((0,a.A)({},p),{},{"aria-current":T,className:C,ref:t,style:I,to:d,viewTransition:h}),"function"===typeof m?m(A):m)});gt.displayName="NavLink";var vt=o.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:s,reloadDocument:l,replace:c,state:u,method:h=Ue,action:m,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:y}=e,x=(0,r.A)(e,d),w=Nt(),N=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=o.useContext(ne),r=o.useContext(ae);f(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s=(0,a.A)({},fe(e||".",{relative:t})),l=le();if(null==e){s.search=l.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}e&&"."!==e||!i.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:W([n,s.pathname]));return b(s)}(m,{relative:g}),k="get"===h.toLowerCase()?"get":"post",S="string"===typeof m&&ft.test(m);return o.createElement("form",(0,a.A)((0,a.A)({ref:t,method:k,action:N,onSubmit:l?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||h;w(t||e.currentTarget,{fetcherKey:i,method:n,navigate:s,replace:c,state:u,relative:g,preventScrollReset:v,viewTransition:y})}},x),{},{"data-discover":S||"render"!==n?void 0:"true"}))});function bt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function yt(e){let t=o.useContext(Q);return f(t,bt(e)),t}vt.displayName="Form";var xt=0,wt=()=>"__".concat(String(++xt),"__");function Nt(){let{router:e}=yt("useSubmit"),{basename:t}=o.useContext(ne),n=Se("useRouteId");return o.useCallback(async function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:i,encType:s,formData:l,body:c}=Ve(r,t);if(!1===a.navigate){let t=a.fetcherKey||wt();await e.fetch(t,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||s,flushSync:a.flushSync})}else await e.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||s,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}},5507:(e,t,n)=>{"use strict";var r=n(6329),a=n(4372).b,o=n(7525),i=n(7526),s=n(6907),l=n(1091),c=n(4416);function u(e,t,n){if(!u.enabled())throw new Error("Transport created when disabled");a.call(this);var r=this;this.origin=i.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=c.string(8);var o=i.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=s.createIframe(o,function(e){r.emit("close",1006,"Unable to load an iframe ("+e+")"),r.close()}),this.onmessageCallback=this._message.bind(this),l.attachEvent("message",this.onmessageCallback)}r(u,a),u.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){l.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},u.prototype._message=function(e){if(e.data,!i.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=JSON.parse(e.data)}catch(r){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch(r){return void t.data}this.emit("close",n[0],n[1]),this.close()}},u.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},u.prototype.send=function(e){this.postMessage("m",e)},u.enabled=function(){return s.iframeEnabled},u.transportName="iframe",u.roundTrips=2,e.exports=u},5631:(e,t,n)=>{"use strict";var r=n(4372).b,a=n(6329),o=n(1091),i=n(7315),s=n(7526);function l(e,t,n){var a=this;r.call(this),setTimeout(function(){a._start(e,t,n)},0)}a(l,r),l.prototype._start=function(e,t,r){var a=this,i=new n.g.XDomainRequest;t=s.addQuery(t,"t="+ +new Date),i.onerror=function(){a._error()},i.ontimeout=function(){a._error()},i.onprogress=function(){i.responseText,a.emit("chunk",200,i.responseText)},i.onload=function(){a.emit("finish",200,i.responseText),a._cleanup(!1)},this.xdr=i,this.unloadRef=o.unloadAdd(function(){a._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(l){this._error()}},l.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},l.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},l.prototype.close=function(){this._cleanup(!0)},l.enabled=!(!n.g.XDomainRequest||!i.hasDomain()),e.exports=l},5768:(e,t,n)=>{"use strict";var r=n(1091),a=n(7526),o=n(6329),i=n(4372).b,s=n(3331);function l(e,t,n){if(!l.enabled())throw new Error("Transport created when disabled");i.call(this);var o=this,c=a.addPath(e,"/websocket");c="https"===c.slice(0,5)?"wss"+c.slice(5):"ws"+c.slice(4),this.url=c,this.ws=new s(this.url,[],n),this.ws.onmessage=function(e){e.data,o.emit("message",e.data)},this.unloadRef=r.unloadAdd(function(){o.ws.close()}),this.ws.onclose=function(e){e.code,e.reason,o.emit("close",e.code,e.reason),o._cleanup()},this.ws.onerror=function(e){o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}o(l,i),l.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},l.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},l.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},l.enabled=function(){return!!s},l.transportName="websocket",l.roundTrips=2,e.exports=l},5896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<a&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<a&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,m=3,f=!1,p=!1,g=!1,v=!1,b="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function N(e){if(g=!1,w(e),!p)if(null!==r(c))p=!0,S||(S=!0,k());else{var t=r(u);null!==t&&R(N,t.startTime-e)}}var k,S=!1,j=-1,C=5,_=-1;function E(){return!!v||!(t.unstable_now()-_<C)}function A(){if(v=!1,S){var e=t.unstable_now();_=e;var n=!0;try{e:{p=!1,g&&(g=!1,y(j),j=-1),f=!0;var o=m;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&E());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var s=i(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,w(e),n=!0;break t}h===r(c)&&a(c),w(e)}else a(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&R(N,l.startTime-e),n=!1}}break e}finally{h=null,m=o,f=!1}n=void 0}}finally{n?k():S=!1}}}if("function"===typeof x)k=function(){x(A)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,I=T.port2;T.port1.onmessage=A,k=function(){I.postMessage(null)}}else k=function(){b(A,0)};function R(e,n){j=b(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(j),j=-1):g=!0,R(N,o-i))):(e.sortIndex=s,n(c,e),p||f||(p=!0,S||(S=!0,k()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},6263:(e,t,n)=>{"use strict";var r=n(6329),a=n(8982),o=n(1395),i=n(527);function s(e){if(!s.enabled())throw new Error("Transport created when disabled");a.call(this,e,"/jsonp",i,o)}r(s,a),s.enabled=function(){return!!n.g.document},s.transportName="jsonp-polling",s.roundTrips=1,s.needBody=!0,e.exports=s},6329:e=>{"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},6348:(e,t,n)=>{"use strict";var r=n(6329),a=n(1271),o=n(3863),i=n(5631);function s(e){if(!i.enabled)throw new Error("Transport created when disabled");a.call(this,e,"/xhr_streaming",o,i)}r(s,a),s.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(i.enabled&&e.sameScheme)},s.transportName="xdr-streaming",s.roundTrips=2,e.exports=s},6583:(e,t,n)=>{"use strict";var r=n(6329),a=n(1271),o=n(3863),i=n(9333),s=n(8357);function l(e){if(!s.enabled&&!i.enabled)throw new Error("Transport created when disabled");a.call(this,e,"/xhr",o,i)}r(l,a),l.enabled=function(e){return!e.nullOrigin&&(!(!s.enabled||!e.sameOrigin)||i.enabled)},l.transportName="xhr-polling",l.roundTrips=2,e.exports=l},6646:(e,t,n)=>{"use strict";e.exports=n.g.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},6672:(e,t,n)=>{"use strict";var r=n(5043);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var i={d:{f:o,r:function(){throw Error(a(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=i.p;try{if(l.T=null,i.p=2,e)return e()}finally{l.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},6907:(e,t,n)=>{"use strict";var r=n(1091),a=n(7315);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in n.g||(n.g[e.exports.WPrefix]={})},postMessage:function(t,r){n.g.parent!==n.g&&n.g.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:t,data:r||""}),"*")},createIframe:function(e,t){var a,o,i=n.g.document.createElement("iframe"),s=function(){clearTimeout(a);try{i.onload=null}catch(e){}i.onerror=null},l=function(){i&&(s(),setTimeout(function(){i&&i.parentNode.removeChild(i),i=null},0),r.unloadDel(o))},c=function(e){i&&(l(),t(e))};return i.src=e,i.style.display="none",i.style.position="absolute",i.onerror=function(){c("onerror")},i.onload=function(){clearTimeout(a),a=setTimeout(function(){c("onload timeout")},2e3)},n.g.document.body.appendChild(i),a=setTimeout(function(){c("timeout")},15e3),o=r.unloadAdd(l),{post:function(e,t){setTimeout(function(){try{i&&i.contentWindow&&i.contentWindow.postMessage(e,t)}catch(n){}},0)},cleanup:l,loaded:s}},createHtmlfile:function(t,a){var o,i,s,l=["Active"].concat("Object").join("X"),c=new n.g[l]("htmlfile"),u=function(){clearTimeout(o),s.onerror=null},d=function(){c&&(u(),r.unloadDel(i),s.parentNode.removeChild(s),s=c=null,CollectGarbage())},h=function(e){c&&(d(),a(e))};c.open(),c.write('<html><script>document.domain="'+n.g.document.domain+'";<\/script></html>'),c.close(),c.parentWindow[e.exports.WPrefix]=n.g[e.exports.WPrefix];var m=c.createElement("div");return c.body.appendChild(m),s=c.createElement("iframe"),m.appendChild(s),s.src=t,s.onerror=function(){h("onerror")},o=setTimeout(function(){h("timeout")},15e3),i=r.unloadAdd(d),{post:function(e,t){try{setTimeout(function(){s&&s.contentWindow&&s.contentWindow.postMessage(e,t)},0)}catch(n){}},cleanup:d,loaded:u}}},e.exports.iframeEnabled=!1,n.g.document&&(e.exports.iframeEnabled=("function"===typeof n.g.postMessage||"object"===typeof n.g.postMessage)&&!a.isKonqueror())},7004:(e,t,n)=>{"use strict";var r=n(8853),a=n(5043),o=n(7950);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(i(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var _=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case S:return"SuspenseList";case _:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case p:return"Portal";case w:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var O=Array.isArray,P=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},D=[],F=-1;function z(e){return{current:e}}function M(e){0>F||(e.current=D[F],D[F]=null,F--)}function B(e,t){F++,D[F]=e.current,e.current=t}var V=z(null),W=z(null),H=z(null),q=z(null);function J(e,t){switch(B(H,t),B(W,e),B(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ad(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=ad(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(V),B(V,e)}function K(){M(V),M(W),M(H)}function G(e){null!==e.memoizedState&&B(q,e);var t=V.current,n=od(t,e.type);t!==n&&(B(W,e),B(V,n))}function $(e){W.current===e&&(M(V),M(W)),q.current===e&&(M(q),Gd._currentValue=U)}var Q=Object.prototype.hasOwnProperty,X=r.unstable_scheduleCallback,Y=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ae=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,ie=r.unstable_LowPriority,se=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var me=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/pe|0)|0},fe=Math.log,pe=Math.LN2;var ge=256,ve=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ye(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?a=be(r):0!==(i&=s)?a=be(i):n||0!==(n=s&~e)&&(a=be(n)):0!==(s=r&~o)?a=be(s):0!==i?a=be(i):n||0!==(n=r&~e)&&(a=be(n)),0===a?0:0!==t&&t!==a&&0===(t&o)&&((o=a&-a)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:a}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ne(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function ke(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function je(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-me(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function _e(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-me(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Te(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Ie=Math.random().toString(36).slice(2),Re="__reactFiber$"+Ie,Oe="__reactProps$"+Ie,Pe="__reactContainer$"+Ie,Le="__reactEvents$"+Ie,Ue="__reactListeners$"+Ie,De="__reactHandles$"+Ie,Fe="__reactResources$"+Ie,ze="__reactMarker$"+Ie;function Me(e){delete e[Re],delete e[Oe],delete e[Le],delete e[Ue],delete e[De]}function Be(e){var t=e[Re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pe]||n[Re]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yd(e);null!==e;){if(n=e[Re])return n;e=yd(e)}return t}n=(e=n).parentNode}return null}function Ve(e){if(e=e[Re]||e[Pe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function We(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[ze]=!0}var Je=new Set,Ke={};function Ge(e,t){$e(e,t),$e(e+"Capture",t)}function $e(e,t){for(Ke[e]=t,e=0;e<t.length;e++)Je.add(t[e])}var Qe,Xe,Ye=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(a=t,Q.call(et,a)||!Q.call(Ze,a)&&(Ye.test(a)?et[a]=!0:(Ze[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function at(e){if(void 0===Qe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qe=t&&t[1]||"",Xe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Qe+e+Xe}var ot=!1;function it(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){r=o}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),i=o[0],s=o[1];if(i&&s){var l=i.split("\n"),c=s.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===c.length)for(r=l.length-1,a=c.length-1;1<=r&&0<=a&&l[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==c[a]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?at(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return at("Activity");default:return""}}function lt(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function pt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,a,o,i,s){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?bt(e,i,ct(t)):null!=n?bt(e,i,ct(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=o&&(e.defaultChecked=!!o),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ct(s):e.removeAttribute("name")}function vt(e,t,n,r,a,o,i,s){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function yt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(O(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Nt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function jt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&St(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&St(e,o,t[o])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Tt=null;function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,Ot=null;function Pt(e){var t=Ve(e);if(t&&(e=t.stateNode)){var n=e[Oe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[Oe]||null;if(!a)throw Error(i(90));gt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&yt(e,!!n.multiple,t,!1)}}}var Lt=!1;function Ut(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Rt||null!==Ot)&&(Bc(),Rt&&(t=Rt,e=Ot,Ot=Rt=null,Pt(t),e)))for(t=0;t<e.length;t++)Pt(e[t])}}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Oe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),zt=!1;if(Ft)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch(Oh){zt=!1}var Bt=null,Vt=null,Wt=null;function Ht(){if(Wt)return Wt;var e,t,n=Vt,r=n.length,a="value"in Bt?Bt.value:Bt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Wt=a.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function Kt(){return!1}function Gt(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Jt:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var $t,Qt,Xt,Yt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Gt(Yt),en=h({},Yt,{view:0,detail:0}),tn=Gt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?($t=e.screenX-Xt.screenX,Qt=e.screenY-Xt.screenY):Qt=$t=0,Xt=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),rn=Gt(nn),an=Gt(h({},nn,{dataTransfer:0})),on=Gt(h({},en,{relatedTarget:0})),sn=Gt(h({},Yt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Gt(h({},Yt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Gt(h({},Yt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function fn(){return mn}var pn=Gt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Gt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Gt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),bn=Gt(h({},Yt,{propertyName:0,elapsedTime:0,pseudoElement:0})),yn=Gt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Gt(h({},Yt,{newState:0,oldState:0})),wn=[9,13,27,32],Nn=Ft&&"CompositionEvent"in window,kn=null;Ft&&"documentMode"in document&&(kn=document.documentMode);var Sn=Ft&&"TextEvent"in window&&!kn,jn=Ft&&(!Nn||kn&&8<kn&&11>=kn),Cn=String.fromCharCode(32),_n=!1;function En(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Tn=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function On(e,t,n,r){Rt?Ot?Ot.push(r):Ot=[r]:Rt=r,0<(t=Hu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Pn=null,Ln=null;function Un(e){Uu(e,0)}function Dn(e){if(ht(We(e)))return e}function Fn(e,t){if("change"===e)return t}var zn=!1;if(Ft){var Mn;if(Ft){var Bn="oninput"in document;if(!Bn){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),Bn="function"===typeof Vn.oninput}Mn=Bn}else Mn=!1;zn=Mn&&(!document.documentMode||9<document.documentMode)}function Wn(){Pn&&(Pn.detachEvent("onpropertychange",Hn),Ln=Pn=null)}function Hn(e){if("value"===e.propertyName&&Dn(Ln)){var t=[];On(t,Ln,e,It(e)),Ut(Un,t)}}function qn(e,t,n){"focusin"===e?(Wn(),Ln=n,(Pn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Wn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dn(Ln)}function Kn(e,t){if("click"===e)return Dn(t)}function Gn(e,t){if("input"===e||"change"===e)return Dn(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Q.call(t,a)||!$n(e[a],t[a]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yn(e,t){var n,r=Xn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,ar=null,or=null,ir=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ir||null==rr||rr!==mt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Qn(or,r)||(or=r,0<(r=Hu(ar,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var mr=hr("animationend"),fr=hr("animationiteration"),pr=hr("animationstart"),gr=hr("transitionrun"),vr=hr("transitionstart"),br=hr("transitioncancel"),yr=hr("transitionend"),xr=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){xr.set(e,t),Ge(t,[e])}wr.push("scrollEnd");var kr=new WeakMap;function Sr(e,t){if("object"===typeof e&&null!==e){var n=kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},kr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var jr=[],Cr=0,_r=0;function Er(){for(var e=Cr,t=_r=Cr=0;t<e;){var n=jr[t];jr[t++]=null;var r=jr[t];jr[t++]=null;var a=jr[t];jr[t++]=null;var o=jr[t];if(jr[t++]=null,null!==r&&null!==a){var i=r.pending;null===i?a.next=a:(a.next=i.next,i.next=a),r.pending=a}0!==o&&Rr(n,a,o)}}function Ar(e,t,n,r){jr[Cr++]=e,jr[Cr++]=t,jr[Cr++]=n,jr[Cr++]=r,_r|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Tr(e,t,n,r){return Ar(e,t,n,r),Or(e)}function Ir(e,t){return Ar(e,null,null,t),Or(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(a=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,a&&null!==t&&(a=31-me(n),null===(r=(e=o.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),o):null}function Or(e){if(50<Rc)throw Rc=0,Oc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pr={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,n,r){return new Lr(e,t,n,r)}function Dr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Ur(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Mr(e,t,n,r,a,o){var s=0;if(r=e,"function"===typeof e)Dr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=Ur(31,n,t,a)).elementType=_,e.lanes=o,e;case g:return Br(n.children,a,o,t);case v:s=8,a|=24;break;case b:return(e=Ur(12,n,t,2|a)).elementType=b,e.lanes=o,e;case k:return(e=Ur(13,n,t,a)).elementType=k,e.lanes=o,e;case S:return(e=Ur(19,n,t,a)).elementType=S,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:case w:s=10;break e;case x:s=9;break e;case N:s=11;break e;case j:s=14;break e;case C:s=16,r=null;break e}s=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Ur(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Br(e,t,n,r){return(e=Ur(7,e,r,t)).lanes=n,e}function Vr(e,t,n){return(e=Ur(6,e,null,t)).lanes=n,e}function Wr(e,t,n){return(t=Ur(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],qr=0,Jr=null,Kr=0,Gr=[],$r=0,Qr=null,Xr=1,Yr="";function Zr(e,t){Hr[qr++]=Kr,Hr[qr++]=Jr,Jr=e,Kr=t}function ea(e,t,n){Gr[$r++]=Xr,Gr[$r++]=Yr,Gr[$r++]=Qr,Qr=e;var r=Xr;e=Yr;var a=32-me(r)-1;r&=~(1<<a),n+=1;var o=32-me(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Xr=1<<32-me(t)+a|n<<a|r,Yr=o+e}else Xr=1<<o|n<<a|r,Yr=e}function ta(e){null!==e.return&&(Zr(e,1),ea(e,1,0))}function na(e){for(;e===Jr;)Jr=Hr[--qr],Hr[qr]=null,Kr=Hr[--qr],Hr[qr]=null;for(;e===Qr;)Qr=Gr[--$r],Gr[$r]=null,Yr=Gr[--$r],Gr[$r]=null,Xr=Gr[--$r],Gr[$r]=null}var ra=null,aa=null,oa=!1,ia=null,sa=!1,la=Error(i(519));function ca(e){throw pa(Sr(Error(i(418,"")),e)),la}function ua(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Re]=e,t[Oe]=r,n){case"dialog":Du("cancel",t),Du("close",t);break;case"iframe":case"object":case"embed":Du("load",t);break;case"video":case"audio":for(n=0;n<Pu.length;n++)Du(Pu[n],t);break;case"source":Du("error",t);break;case"img":case"image":case"link":Du("error",t),Du("load",t);break;case"details":Du("toggle",t);break;case"input":Du("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Du("invalid",t);break;case"textarea":Du("invalid",t),wt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Qu(t.textContent,n)?(null!=r.popover&&(Du("beforetoggle",t),Du("toggle",t)),null!=r.onScroll&&Du("scroll",t),null!=r.onScrollEnd&&Du("scrollend",t),null!=r.onClick&&(t.onclick=Xu),t=!0):t=!1,t||ca(e)}function da(e){for(ra=e.return;ra;)switch(ra.tag){case 5:case 13:return void(sa=!1);case 27:case 3:return void(sa=!0);default:ra=ra.return}}function ha(e){if(e!==ra)return!1;if(!oa)return da(e),oa=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||id(e.type,e.memoizedProps)),t=!t),t&&aa&&ca(e),da(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){aa=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}aa=null}}else 27===n?(n=aa,md(e.type)?(e=bd,bd=null,aa=e):aa=n):aa=ra?vd(e.stateNode.nextSibling):null;return!0}function ma(){aa=ra=null,oa=!1}function fa(){var e=ia;return null!==e&&(null===yc?yc=e:yc.push.apply(yc,e),ia=null),e}function pa(e){null===ia?ia=[e]:ia.push(e)}var ga=z(null),va=null,ba=null;function ya(e,t,n){B(ga,t._currentValue),t._currentValue=n}function xa(e){e._currentValue=ga.current,M(ga)}function wa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Na(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var o=a.dependencies;if(null!==o){var s=a.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),wa(o.return,n,e),r||(s=null);break e}o=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),wa(s,n,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function ka(e,t,n,r){e=null;for(var a=t,o=!1;null!==a;){if(!o)if(0!==(524288&a.flags))o=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var s=a.alternate;if(null===s)throw Error(i(387));if(null!==(s=s.memoizedProps)){var l=a.type;$n(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===q.current){if(null===(s=a.alternate))throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Gd):e=[Gd])}a=a.return}null!==e&&Na(t,e,n,r),t.flags|=262144}function Sa(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ja(e){va=e,ba=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ca(e){return Ea(va,e)}function _a(e,t){return null===va&&ja(e),Ea(e,t)}function Ea(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ba){if(null===e)throw Error(i(308));ba=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ba=ba.next=t;return n}var Aa="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ta=r.unstable_scheduleCallback,Ia=r.unstable_NormalPriority,Ra={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oa(){return{controller:new Aa,data:new Map,refCount:0}}function Pa(e){e.refCount--,0===e.refCount&&Ta(Ia,function(){e.controller.abort()})}var La=null,Ua=0,Da=0,Fa=null;function za(){if(0===--Ua&&null!==La){null!==Fa&&(Fa.status="fulfilled");var e=La;La=null,Da=0,Fa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ma=P.S;P.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===La){var n=La=[];Ua=0,Da=Au(),Fa={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ua++,t.then(za,za)}(0,t),null!==Ma&&Ma(e,t)};var Ba=z(null);function Va(){var e=Ba.current;return null!==e?e:rc.pooledCache}function Wa(e,t){B(Ba,null===t?Ba.current:t.pool)}function Ha(){var e=Va();return null===e?null:{parent:Ra._currentValue,pool:e}}var qa=Error(i(460)),Ja=Error(i(474)),Ka=Error(i(542)),Ga={then:function(){}};function $a(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Qa(){}function Xa(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Qa,Qa),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then(Qa,Qa);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Ya=t,qa}}var Ya=null;function Za(){if(null===Ya)throw Error(i(459));var e=Ya;return Ya=null,e}function eo(e){if(e===qa||e===Ka)throw Error(i(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ao(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Or(e),Rr(e,null,n),t}return Ar(e,r,t,n),Or(e)}function io(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_e(e,n)}}function so(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function co(){if(lo){if(null!==Fa)throw Fa}}function uo(e,t,n,r){lo=!1;var a=e.updateQueue;to=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===i?o=c:i.next=c,i=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=a.baseState;for(i=0,u=c=l=null,s=o;;){var m=-536870913&s.lane,f=m!==s.lane;if(f?(oc&m)===m:(r&m)===m){0!==m&&m===Da&&(lo=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var p=e,g=s;m=t;var v=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(v,d,m);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=g.payload)?p.call(v,d,m):p)||void 0===m)break e;d=h({},d,m);break e;case 2:to=!0}}null!==(m=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=a.callbacks)?a.callbacks=[m]:f.push(m))}else f={lane:m,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=m;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===o&&(a.shared.lanes=0),mc|=i,e.lanes=i,e.memoizedState=d}}function ho(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function mo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ho(n[e],t)}var fo=z(null),po=z(0);function go(e,t){B(po,e=dc),B(fo,t),dc=e|t.baseLanes}function vo(){B(po,dc),B(fo,fo.current)}function bo(){dc=po.current,M(fo),M(po)}var yo=0,xo=null,wo=null,No=null,ko=!1,So=!1,jo=!1,Co=0,_o=0,Eo=null,Ao=0;function To(){throw Error(i(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function Ro(e,t,n,r,a,o){return yo=o,xo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?Ji:Ki,jo=!1,o=n(r,a),jo=!1,So&&(o=Po(t,n,r,a)),Oo(e),o}function Oo(e){P.H=qi;var t=null!==wo&&null!==wo.next;if(yo=0,No=wo=xo=null,ko=!1,_o=0,Eo=null,t)throw Error(i(300));null===e||_s||null!==(e=e.dependencies)&&Sa(e)&&(_s=!0)}function Po(e,t,n,r){xo=e;var a=0;do{if(So&&(Eo=null),_o=0,So=!1,25<=a)throw Error(i(301));if(a+=1,No=wo=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}P.H=Gi,o=t(n,r)}while(So);return o}function Lo(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?Bo(t):t,e=e.useState()[0],(null!==wo?wo.memoizedState:null)!==e&&(xo.flags|=1024),t}function Uo(){var e=0!==Co;return Co=0,e}function Do(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fo(e){if(ko){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ko=!1}yo=0,No=wo=xo=null,So=!1,_o=Co=0,Eo=null}function zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===No?xo.memoizedState=No=e:No=No.next=e,No}function Mo(){if(null===wo){var e=xo.alternate;e=null!==e?e.memoizedState:null}else e=wo.next;var t=null===No?xo.memoizedState:No.next;if(null!==t)No=t,wo=e;else{if(null===e){if(null===xo.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(wo=e).memoizedState,baseState:wo.baseState,baseQueue:wo.baseQueue,queue:wo.queue,next:null},null===No?xo.memoizedState=No=e:No=No.next=e}return No}function Bo(e){var t=_o;return _o+=1,null===Eo&&(Eo=[]),e=Xa(Eo,e,t),t=xo,null===(null===No?t.memoizedState:No.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?Ji:Ki),e}function Vo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Bo(e);if(e.$$typeof===w)return Ca(e)}throw Error(i(438,String(e)))}function Wo(e){var t=null,n=xo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=xo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=E;return t.index++,n}function Ho(e,t){return"function"===typeof t?t(e):t}function qo(e){return Jo(Mo(),wo,e)}function Jo(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,null===a)e.memoizedState=o;else{var l=s=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(oc&h)===h:(yo&h)===h){var m=u.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Da&&(d=!0);else{if((yo&m)===m){u=u.next,m===Da&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,s=o):c=c.next=h,xo.lanes|=m,mc|=m}h=u.action,jo&&n(o,h),o=u.hasEagerState?u.eagerState:n(o,h)}else m={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=m,s=o):c=c.next=m,xo.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?s=o:c.next=l,!$n(o,e.memoizedState)&&(_s=!0,d&&null!==(n=Fa)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=c,r.lastRenderedState=o}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ko(e){var t=Mo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);$n(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Go(e,t,n){var r=xo,a=Mo(),o=oa;if(o){if(void 0===n)throw Error(i(407));n=n()}else n=t();var s=!$n((wo||a).memoizedState,n);if(s&&(a.memoizedState=n,_s=!0),a=a.queue,vi(2048,8,Xo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==No&&1&No.memoizedState.tag){if(r.flags|=2048,fi(9,{destroy:void 0,resource:void 0},Qo.bind(null,r,a,n,t),null),null===rc)throw Error(i(349));o||0!==(124&yo)||$o(r,t,n)}return n}function $o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=xo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qo(e,t,n,r){t.value=n,t.getSnapshot=r,Yo(t)&&Zo(e)}function Xo(e,t,n){return n(function(){Yo(t)&&Zo(e)})}function Yo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function Zo(e){var t=Ir(e,2);null!==t&&Uc(t,e,2)}function ei(e){var t=zo();if("function"===typeof e){var n=e;if(e=n(),jo){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:e},t}function ti(e,t,n,r){return e.baseState=n,Jo(e,wo,"function"===typeof r?r:Ho)}function ni(e,t,n,r,a){if(Vi(e))throw Error(i(485));if(null!==(e=t.action)){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==P.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ri(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ri(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var o=P.T,i={};P.T=i;try{var s=n(a,r),l=P.S;null!==l&&l(i,s),ai(e,t,s)}catch(c){ii(e,t,c)}finally{P.T=o}}else try{ai(e,t,o=n(a,r))}catch(u){ii(e,t,u)}}function ai(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){oi(e,t,n)},function(n){return ii(e,t,n)}):oi(e,t,n)}function oi(e,t,n){t.status="fulfilled",t.value=n,si(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ri(e,n)))}function ii(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,si(t),t=t.next}while(t!==r)}e.action=null}function si(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function li(e,t){return t}function ci(e,t){if(oa){var n=rc.formState;if(null!==n){e:{var r=xo;if(oa){if(aa){t:{for(var a=aa,o=sa;8!==a.nodeType;){if(!o){a=null;break t}if(null===(a=vd(a.nextSibling))){a=null;break t}}a="F!"===(o=a.data)||"F"===o?a:null}if(a){aa=vd(a.nextSibling),r="F!"===a.data;break e}}ca(r)}r=!1}r&&(t=n[0])}}return(n=zo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:t},n.queue=r,n=zi.bind(null,xo,r),r.dispatch=n,r=ei(!1),o=Bi.bind(null,xo,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=zo()).queue=a,n=ni.bind(null,xo,a,o,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function ui(e){return di(Mo(),wo,e)}function di(e,t,n){if(t=Jo(e,t,li)[0],e=qo(Ho)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Bo(t)}catch(i){if(i===qa)throw Ka;throw i}else r=t;var a=(t=Mo()).queue,o=a.dispatch;return n!==t.memoizedState&&(xo.flags|=2048,fi(9,{destroy:void 0,resource:void 0},hi.bind(null,a,n),null)),[r,o,e]}function hi(e,t){e.action=t}function mi(e){var t=Mo(),n=wo;if(null!==n)return di(t,n,e);Mo(),t=t.memoizedState;var r=(n=Mo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function fi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=xo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function pi(){return Mo().memoizedState}function gi(e,t,n,r){var a=zo();r=void 0===r?null:r,xo.flags|=e,a.memoizedState=fi(1|t,{destroy:void 0,resource:void 0},n,r)}function vi(e,t,n,r){var a=Mo();r=void 0===r?null:r;var o=a.memoizedState.inst;null!==wo&&null!==r&&Io(r,wo.memoizedState.deps)?a.memoizedState=fi(t,o,n,r):(xo.flags|=e,a.memoizedState=fi(1|t,o,n,r))}function bi(e,t){gi(8390656,8,e,t)}function yi(e,t){vi(2048,8,e,t)}function xi(e,t){return vi(4,2,e,t)}function wi(e,t){return vi(4,4,e,t)}function Ni(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ki(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vi(4,4,Ni.bind(null,t,e),n)}function Si(){}function ji(e,t){var n=Mo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ci(e,t){var n=Mo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Io(t,r[1]))return r[0];if(r=e(),jo){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function _i(e,t,n){return void 0===n||0!==(1073741824&yo)?e.memoizedState=t:(e.memoizedState=n,e=Lc(),xo.lanes|=e,mc|=e,n)}function Ei(e,t,n,r){return $n(n,t)?n:null!==fo.current?(e=_i(e,n,r),$n(e,t)||(_s=!0),e):0===(42&yo)?(_s=!0,e.memoizedState=n):(e=Lc(),xo.lanes|=e,mc|=e,t)}function Ai(e,t,n,r,a){var o=L.p;L.p=0!==o&&8>o?o:8;var i=P.T,s={};P.T=s,Bi(e,!1,t,n);try{var l=a(),c=P.S;if(null!==c&&c(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Mi(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Pc());else Mi(e,t,r,Pc())}catch(u){Mi(e,t,{then:function(){},status:"rejected",reason:u},Pc())}finally{L.p=o,P.T=i}}function Ti(){}function Ii(e,t,n,r){if(5!==e.tag)throw Error(i(476));var a=Ri(e).queue;Ai(e,a,t,U,null===n?Ti:function(){return Oi(e),n(r)})}function Ri(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:U},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Oi(e){Mi(e,Ri(e).next.queue,{},Pc())}function Pi(){return Ca(Gd)}function Li(){return Mo().memoizedState}function Ui(){return Mo().memoizedState}function Di(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Pc(),r=oo(t,e=ao(n),n);return null!==r&&(Uc(r,t,n),io(r,t,n)),t={cache:Oa()},void(e.payload=t)}t=t.return}}function Fi(e,t,n){var r=Pc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Vi(e)?Wi(t,n):null!==(n=Tr(e,t,n,r))&&(Uc(n,e,r),Hi(n,t,r))}function zi(e,t,n){Mi(e,t,n,Pc())}function Mi(e,t,n,r){var a={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vi(e))Wi(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.hasEagerState=!0,a.eagerState=s,$n(s,i))return Ar(e,t,a,0),null===rc&&Er(),!1}catch(l){}if(null!==(n=Tr(e,t,a,r)))return Uc(n,e,r),Hi(n,t,r),!0}return!1}function Bi(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},Vi(e)){if(t)throw Error(i(479))}else null!==(t=Tr(e,n,r,2))&&Uc(t,e,2)}function Vi(e){var t=e.alternate;return e===xo||null!==t&&t===xo}function Wi(e,t){So=ko=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hi(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_e(e,n)}}var qi={readContext:Ca,use:Vo,useCallback:To,useContext:To,useEffect:To,useImperativeHandle:To,useLayoutEffect:To,useInsertionEffect:To,useMemo:To,useReducer:To,useRef:To,useState:To,useDebugValue:To,useDeferredValue:To,useTransition:To,useSyncExternalStore:To,useId:To,useHostTransitionStatus:To,useFormState:To,useActionState:To,useOptimistic:To,useMemoCache:To,useCacheRefresh:To},Ji={readContext:Ca,use:Vo,useCallback:function(e,t){return zo().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:bi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,gi(4194308,4,Ni.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gi(4194308,4,e,t)},useInsertionEffect:function(e,t){gi(4,2,e,t)},useMemo:function(e,t){var n=zo();t=void 0===t?null:t;var r=e();if(jo){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=zo();if(void 0!==n){var a=n(t);if(jo){he(!0);try{n(t)}finally{he(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=Fi.bind(null,xo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zo().memoizedState=e},useState:function(e){var t=(e=ei(e)).queue,n=zi.bind(null,xo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Si,useDeferredValue:function(e,t){return _i(zo(),e,t)},useTransition:function(){var e=ei(!1);return e=Ai.bind(null,xo,e.queue,!0,!1),zo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=xo,a=zo();if(oa){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===rc)throw Error(i(349));0!==(124&oc)||$o(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,bi(Xo.bind(null,r,o,e),[e]),r.flags|=2048,fi(9,{destroy:void 0,resource:void 0},Qo.bind(null,r,o,n,t),null),n},useId:function(){var e=zo(),t=rc.identifierPrefix;if(oa){var n=Yr;t="\xab"+t+"R"+(n=(Xr&~(1<<32-me(Xr)-1)).toString(32)+n),0<(n=Co++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ao++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Pi,useFormState:ci,useActionState:ci,useOptimistic:function(e){var t=zo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Bi.bind(null,xo,!0,n),n.dispatch=t,[e,t]},useMemoCache:Wo,useCacheRefresh:function(){return zo().memoizedState=Di.bind(null,xo)}},Ki={readContext:Ca,use:Vo,useCallback:ji,useContext:Ca,useEffect:yi,useImperativeHandle:ki,useInsertionEffect:xi,useLayoutEffect:wi,useMemo:Ci,useReducer:qo,useRef:pi,useState:function(){return qo(Ho)},useDebugValue:Si,useDeferredValue:function(e,t){return Ei(Mo(),wo.memoizedState,e,t)},useTransition:function(){var e=qo(Ho)[0],t=Mo().memoizedState;return["boolean"===typeof e?e:Bo(e),t]},useSyncExternalStore:Go,useId:Li,useHostTransitionStatus:Pi,useFormState:ui,useActionState:ui,useOptimistic:function(e,t){return ti(Mo(),0,e,t)},useMemoCache:Wo,useCacheRefresh:Ui},Gi={readContext:Ca,use:Vo,useCallback:ji,useContext:Ca,useEffect:yi,useImperativeHandle:ki,useInsertionEffect:xi,useLayoutEffect:wi,useMemo:Ci,useReducer:Ko,useRef:pi,useState:function(){return Ko(Ho)},useDebugValue:Si,useDeferredValue:function(e,t){var n=Mo();return null===wo?_i(n,e,t):Ei(n,wo.memoizedState,e,t)},useTransition:function(){var e=Ko(Ho)[0],t=Mo().memoizedState;return["boolean"===typeof e?e:Bo(e),t]},useSyncExternalStore:Go,useId:Li,useHostTransitionStatus:Pi,useFormState:mi,useActionState:mi,useOptimistic:function(e,t){var n=Mo();return null!==wo?ti(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Wo,useCacheRefresh:Ui},$i=null,Qi=0;function Xi(e){var t=Qi;return Qi+=1,null===$i&&($i=[]),Xa($i,e,t)}function Yi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zi(e,t){if(t.$$typeof===m)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vr(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===C&&es(o)===t.type)?(Yi(t=a(t,n.props),n),t.return=e,t):(Yi(t=Mr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Br(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Vr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return Yi(n=Mr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=Wr(t,e.mode,n)).return=e,t;case C:return h(e,t=(0,t._init)(t._payload),n)}if(O(t)||T(t))return(t=Br(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Xi(t),n);if(t.$$typeof===w)return h(e,_a(e,t),n);Zi(e,t)}return null}function m(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===a?c(e,t,n,r):null;case p:return n.key===a?u(e,t,n,r):null;case C:return m(e,t,n=(a=n._init)(n._payload),r)}if(O(n)||T(n))return null!==a?null:d(e,t,n,r,null);if("function"===typeof n.then)return m(e,t,Xi(n),r);if(n.$$typeof===w)return m(e,t,_a(e,n),r);Zi(e,n)}return null}function v(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case C:return v(e,t,n,r=(0,r._init)(r._payload),a)}if(O(r)||T(r))return d(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return v(e,t,n,Xi(r),a);if(r.$$typeof===w)return v(e,t,n,_a(t,r),a);Zi(t,r)}return null}function b(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var y=u.key;null!==c;){if(c.key===y){if((y=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=a(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===C&&es(y)===c.type){n(l,c.sibling),Yi(d=a(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Br(u.props.children,l.mode,d,u.key)).return=l,l=d):(Yi(d=Mr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return s(l);case p:e:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=a(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Wr(u,l.mode,d)).return=l,l=d}return s(l);case C:return b(l,c,u=(y=u._init)(u._payload),d)}if(O(u))return function(a,i,s,l){for(var c=null,u=null,d=i,f=i=0,p=null;null!==d&&f<s.length;f++){d.index>f?(p=d,d=null):p=d.sibling;var g=m(a,d,s[f],l);if(null===g){null===d&&(d=p);break}e&&d&&null===g.alternate&&t(a,d),i=o(g,i,f),null===u?c=g:u.sibling=g,u=g,d=p}if(f===s.length)return n(a,d),oa&&Zr(a,f),c;if(null===d){for(;f<s.length;f++)null!==(d=h(a,s[f],l))&&(i=o(d,i,f),null===u?c=d:u.sibling=d,u=d);return oa&&Zr(a,f),c}for(d=r(d);f<s.length;f++)null!==(p=v(d,a,f,s[f],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?f:p.key),i=o(p,i,f),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(a,e)}),oa&&Zr(a,f),c}(l,c,u,d);if(T(u)){if("function"!==typeof(y=T(u)))throw Error(i(150));return function(a,s,l,c){if(null==l)throw Error(i(151));for(var u=null,d=null,f=s,p=s=0,g=null,b=l.next();null!==f&&!b.done;p++,b=l.next()){f.index>p?(g=f,f=null):g=f.sibling;var y=m(a,f,b.value,c);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(a,f),s=o(y,s,p),null===d?u=y:d.sibling=y,d=y,f=g}if(b.done)return n(a,f),oa&&Zr(a,p),u;if(null===f){for(;!b.done;p++,b=l.next())null!==(b=h(a,b.value,c))&&(s=o(b,s,p),null===d?u=b:d.sibling=b,d=b);return oa&&Zr(a,p),u}for(f=r(f);!b.done;p++,b=l.next())null!==(b=v(f,a,p,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?p:b.key),s=o(b,s,p),null===d?u=b:d.sibling=b,d=b);return e&&f.forEach(function(e){return t(a,e)}),oa&&Zr(a,p),u}(l,c,u=y.call(u),d)}if("function"===typeof u.then)return b(l,c,Xi(u),d);if(u.$$typeof===w)return b(l,c,_a(l,u),d);Zi(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=a(c,u)).return=l,l=d):(n(l,c),(d=Vr(u,l.mode,d)).return=l,l=d),s(l)):n(l,c)}return function(e,t,n,r){try{Qi=0;var a=b(e,t,n,r);return $i=null,a}catch(i){if(i===qa||i===Ka)throw i;var o=Ur(29,i,null,e.mode);return o.lanes=r,o.return=e,o}}}var ns=ts(!0),rs=ts(!1),as=z(null),os=null;function is(e){var t=e.alternate;B(us,1&us.current),B(as,e),null===os&&(null===t||null!==fo.current||null!==t.memoizedState)&&(os=e)}function ss(e){if(22===e.tag){if(B(us,us.current),B(as,e),null===os){var t=e.alternate;null!==t&&null!==t.memoizedState&&(os=e)}}else ls()}function ls(){B(us,us.current),B(as,as.current)}function cs(e){M(as),os===e&&(os=null),M(us)}var us=z(0);function ds(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ms={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pc(),a=ao(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=oo(e,a,r))&&(Uc(t,e,r),io(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pc(),a=ao(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=oo(e,a,r))&&(Uc(t,e,r),io(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pc(),r=ao(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,n))&&(Uc(t,e,n),io(t,e,n))}};function fs(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,r)||!Qn(a,o))}function ps(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ms.enqueueReplaceState(t,t.state,null)}function gs(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=h({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}var vs="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bs(e){vs(e)}function ys(e){console.error(e)}function xs(e){vs(e)}function ws(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ns(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function ks(e,t,n){return(n=ao(n)).tag=3,n.payload={element:null},n.callback=function(){ws(e,t)},n}function Ss(e){return(e=ao(e)).tag=3,e}function js(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var o=r.value;e.payload=function(){return a(o)},e.callback=function(){Ns(t,n,r)}}var i=n.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){Ns(t,n,r),"function"!==typeof a&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Cs=Error(i(461)),_s=!1;function Es(e,t,n,r){t.child=null===e?rs(t,null,n,r):ns(t,e.child,n,r)}function As(e,t,n,r,a){n=n.render;var o=t.ref;if("ref"in r){var i={};for(var s in r)"ref"!==s&&(i[s]=r[s])}else i=r;return ja(t),r=Ro(e,t,n,i,o,a),s=Uo(),null===e||_s?(oa&&s&&ta(t),t.flags|=1,Es(e,t,r,a),t.child):(Do(e,t,a),$s(e,t,a))}function Ts(e,t,n,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Dr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Mr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Is(e,t,o,r,a))}if(o=e.child,!Qs(e,a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(i,r)&&e.ref===t.ref)return $s(e,t,a)}return t.flags|=1,(e=Fr(o,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(Qn(o,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=o,!Qs(e,a))return t.lanes=e.lanes,$s(e,t,a);0!==(131072&e.flags)&&(_s=!0)}}return Ls(e,t,n,r,a)}function Rs(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(a=t.child=e.child,o=0;null!==a;)o=o|a.lanes|a.childLanes,a=a.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Os(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Os(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Wa(0,null!==o?o.cachePool:null),null!==o?go(t,o):vo(),ss(t)}else null!==o?(Wa(0,o.cachePool),go(t,o),ls(),t.memoizedState=null):(null!==e&&Wa(0,null),vo(),ls());return Es(e,t,a,n),t.child}function Os(e,t,n,r){var a=Va();return a=null===a?null:{parent:Ra._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Wa(0,null),vo(),ss(t),null!==e&&ka(e,t,r,!0),null}function Ps(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ls(e,t,n,r,a){return ja(t),n=Ro(e,t,n,r,void 0,a),r=Uo(),null===e||_s?(oa&&r&&ta(t),t.flags|=1,Es(e,t,n,a),t.child):(Do(e,t,a),$s(e,t,a))}function Us(e,t,n,r,a,o){return ja(t),t.updateQueue=null,n=Po(t,r,n,a),Oo(e),r=Uo(),null===e||_s?(oa&&r&&ta(t),t.flags|=1,Es(e,t,n,o),t.child):(Do(e,t,o),$s(e,t,o))}function Ds(e,t,n,r,a){if(ja(t),null===t.stateNode){var o=Pr,i=n.contextType;"object"===typeof i&&null!==i&&(o=Ca(i)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ms,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),i=n.contextType,o.context="object"===typeof i&&null!==i?Ca(i):Pr,o.state=t.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(hs(t,n,i,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(i=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),i!==o.state&&ms.enqueueReplaceState(o,o.state,null),uo(t,r,o,a),co(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=gs(n,s);o.props=l;var c=o.context,u=n.contextType;i=Pr,"object"===typeof u&&null!==u&&(i=Ca(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s||c!==i)&&ps(t,o,r,i),to=!1;var h=t.memoizedState;o.state=h,uo(t,r,o,a),co(),c=t.memoizedState,s||h!==c||to?("function"===typeof d&&(hs(t,n,d,r),c=t.memoizedState),(l=to||fs(t,n,l,r,h,c,i))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=i,r=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),u=gs(n,i=t.memoizedProps),o.props=u,d=t.pendingProps,h=o.context,c=n.contextType,l=Pr,"object"===typeof c&&null!==c&&(l=Ca(c)),(c="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==d||h!==l)&&ps(t,o,r,l),to=!1,h=t.memoizedState,o.state=h,uo(t,r,o,a),co();var m=t.memoizedState;i!==d||h!==m||to||null!==e&&null!==e.dependencies&&Sa(e.dependencies)?("function"===typeof s&&(hs(t,n,s,r),m=t.memoizedState),(u=to||fs(t,n,u,r,h,m,l)||null!==e&&null!==e.dependencies&&Sa(e.dependencies))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,m,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Ps(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=ns(t,e.child,null,a),t.child=ns(t,null,n,a)):Es(e,t,n,a),t.memoizedState=o.state,e=t.child):e=$s(e,t,a),e}function Fs(e,t,n,r){return ma(),t.flags|=256,Es(e,t,n,r),t.child}var zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ms(e){return{baseLanes:e,cachePool:Ha()}}function Bs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Vs(e,t,n){var r,a=t.pendingProps,o=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&us.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oa){if(o?is(t):ls(),oa){var l,c=aa;if(l=c){e:{for(l=c,c=sa;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Qr?{id:Xr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},(l=Ur(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ra=t,aa=null,l=!0):l=!1}l||ca(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;cs(t)}return c=a.children,a=a.fallback,o?(ls(),c=Hs({mode:"hidden",children:c},o=t.mode),a=Br(a,o,n,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(o=t.child).memoizedState=Ms(n),o.childLanes=Bs(e,r,n),t.memoizedState=zs,a):(is(t),Ws(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(s)256&t.flags?(is(t),t.flags&=-257,t=qs(e,t,n)):null!==t.memoizedState?(ls(),t.child=e.child,t.flags|=128,t=null):(ls(),o=a.fallback,c=t.mode,a=Hs({mode:"visible",children:a.children},c),(o=Br(o,c,n,null)).flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,ns(t,e.child,null,n),(a=t.child).memoizedState=Ms(n),a.childLanes=Bs(e,r,n),t.memoizedState=zs,t=o);else if(is(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(a=Error(i(419))).stack="",a.digest=r,pa({value:a,source:null,stack:null}),t=qs(e,t,n)}else if(_s||ka(e,t,n,!1),r=0!==(n&e.childLanes),_s||r){if(null!==(r=rc)&&(0!==(a=0!==((a=0!==(42&(a=n&-n))?1:Ee(a))&(r.suspendedLanes|n))?0:a)&&a!==l.retryLane))throw l.retryLane=a,Ir(e,a),Uc(r,e,a),Cs;"$?"===c.data||Kc(),t=qs(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,aa=vd(c.nextSibling),ra=t,oa=!0,ia=null,sa=!1,null!==e&&(Gr[$r++]=Xr,Gr[$r++]=Yr,Gr[$r++]=Qr,Xr=e.id,Yr=e.overflow,Qr=t),(t=Ws(t,a.children)).flags|=4096);return t}return o?(ls(),o=a.fallback,c=t.mode,u=(l=e.child).sibling,(a=Fr(l,{mode:"hidden",children:a.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?o=Fr(u,o):(o=Br(o,c,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,null===(c=e.child.memoizedState)?c=Ms(n):(null!==(l=c.cachePool)?(u=Ra._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ha(),c={baseLanes:c.baseLanes|n,cachePool:l}),o.memoizedState=c,o.childLanes=Bs(e,r,n),t.memoizedState=zs,a):(is(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ws(e,t){return(t=Hs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Hs(e,t){return(e=Ur(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qs(e,t,n){return ns(t,e.child,null,n),(e=Ws(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wa(e.return,t,n)}function Ks(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Gs(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Es(e,t,r.children,n),0!==(2&(r=us.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Js(e,n,t);else if(19===e.tag)Js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(B(us,r),a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ds(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Ks(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ds(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Ks(t,!0,n,null,o);break;case"together":Ks(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $s(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ka(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Sa(e))}function Xs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)_s=!0;else{if(!Qs(e,n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:J(t,t.stateNode.containerInfo),ya(0,Ra,e.memoizedState.cache),ma();break;case 27:case 5:G(t);break;case 4:J(t,t.stateNode.containerInfo);break;case 10:ya(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(is(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Vs(e,t,n):(is(t),null!==(e=$s(e,t,n))?e.sibling:null);is(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ka(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),B(us,us.current),r)break;return null;case 22:case 23:return t.lanes=0,Rs(e,t,n);case 24:ya(0,Ra,e.memoizedState.cache)}return $s(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,oa&&0!==(1048576&t.flags)&&ea(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((a=r.$$typeof)===N){t.tag=11,t=As(null,t,r,e,n);break e}if(a===j){t.tag=14,t=Ts(null,t,r,e,n);break e}}throw t=R(r)||r,Error(i(306,t,""))}Dr(r)?(e=gs(r,e),t.tag=1,t=Ds(null,t,r,e,n)):(t.tag=0,t=Ls(null,t,r,e,n))}return t;case 0:return Ls(e,t,t.type,t.pendingProps,n);case 1:return Ds(e,t,r=t.type,a=gs(r,t.pendingProps),n);case 3:e:{if(J(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,ro(e,t),uo(t,r,null,n);var s=t.memoizedState;if(r=s.cache,ya(0,Ra,r),r!==o.cache&&Na(t,[Ra],n,!0),co(),r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Fs(e,t,r,n);break e}if(r!==a){pa(a=Sr(Error(i(424)),t)),t=Fs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(aa=vd(e.firstChild),ra=t,oa=!0,ia=null,sa=!0,n=rs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ma(),r===a){t=$s(e,t,n);break e}Es(e,t,r,n)}t=t.child}return t;case 26:return Ps(e,t),null===e?(n=Ed(t.type,null,t.pendingProps,null))?t.memoizedState=n:oa||(n=t.type,e=t.pendingProps,(r=rd(H.current).createElement(n))[Re]=t,r[Oe]=e,ed(r,n,e),qe(r),t.stateNode=r):t.memoizedState=Ed(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&oa&&(r=t.stateNode=xd(t.type,t.pendingProps,H.current),ra=t,sa=!0,a=aa,md(t.type)?(bd=a,aa=vd(r.firstChild)):aa=a),Es(e,t,t.pendingProps.children,n),Ps(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oa&&((a=r=aa)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[ze])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===o)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,sa))?(t.stateNode=r,ra=t,aa=vd(r.firstChild),sa=!1,a=!0):a=!1),a||ca(t)),G(t),a=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,r=o.children,id(a,o)?r=null:null!==s&&id(a,s)&&(t.flags|=32),null!==t.memoizedState&&(a=Ro(e,t,Lo,null,null,n),Gd._currentValue=a),Ps(e,t),Es(e,t,r,n),t.child;case 6:return null===e&&oa&&((e=n=aa)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,sa))?(t.stateNode=n,ra=t,aa=null,e=!0):e=!1),e||ca(t)),null;case 13:return Vs(e,t,n);case 4:return J(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ns(t,null,r,n):Es(e,t,r,n),t.child;case 11:return As(e,t,t.type,t.pendingProps,n);case 7:return Es(e,t,t.pendingProps,n),t.child;case 8:case 12:return Es(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ya(0,t.type,r.value),Es(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,ja(t),r=r(a=Ca(a)),t.flags|=1,Es(e,t,r,n),t.child;case 14:return Ts(e,t,t.type,t.pendingProps,n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 19:return Gs(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Hs(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Rs(e,t,n);case 24:return ja(t),r=Ca(Ra),null===e?(null===(a=Va())&&(a=rc,o=Oa(),a.pooledCache=o,o.refCount++,null!==o&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},no(t),ya(0,Ra,a)):(0!==(e.lanes&n)&&(ro(e,t),uo(t,null,null,n),co()),a=e.memoizedState,o=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ya(0,Ra,r)):(r=o.cache,ya(0,Ra,r),r!==a.cache&&Na(t,[Ra],n,!0))),Es(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Ys(e){e.flags|=4}function Zs(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Bd(t)){if(null!==(t=as.current)&&((4194048&oc)===oc?null!==os:(62914560&oc)!==oc&&0===(536870912&oc)||t!==os))throw Ya=Ga,Ja;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!oa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xa(Ra),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ha(t)?Ys(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fa())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ys(t),null!==n?(nl(t),Zs(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ys(t),nl(t),Zs(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ys(t),nl(t),t.flags&=-16777217),null;case 27:$(t),n=H.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ys(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return nl(t),null}e=V.current,ha(t)?ua(t):(e=xd(a,r,n),t.stateNode=e,Ys(t))}return nl(t),null;case 5:if($(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ys(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return nl(t),null}if(e=V.current,ha(t))ua(t);else{switch(a=rd(H.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?a.createElement(n,{is:r.is}):a.createElement(n)}}e[Re]=t,e[Oe]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ys(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ys(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(e=H.current,ha(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ra))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Qu(e.nodeValue,n)))||ca(t)}else(e=rd(e).createTextNode(r))[Re]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[Re]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),a=!1}else a=fa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(cs(t),t):(cs(t),null)}if(cs(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return K(),null===e&&Mu(t.stateNode.containerInfo),nl(t),null;case 10:return xa(t.type),nl(t),null;case 19:if(M(us),null===(a=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(o=a.rendering))if(r)tl(a,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ds(e))){for(t.flags|=128,tl(a,!1),e=o.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return B(us,1&us.current|2),t.child}e=e.sibling}null!==a.tail&&te()>Nc&&(t.flags|=128,r=!0,tl(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ds(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate&&!oa)return nl(t),null}else 2*te()-a.renderingStartTime>Nc&&536870912!==n&&(t.flags|=128,r=!0,tl(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=a.last)?e.sibling=o:t.child=o,a.last=o)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=us.current,B(us,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return cs(t),bo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&M(Ba),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xa(Ra),nl(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function al(e,t){switch(na(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xa(Ra),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 13:if(cs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return M(us),null;case 4:return K(),null;case 10:return xa(t.type),null;case 22:case 23:return cs(t),bo(),null!==e&&M(Ba),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xa(Ra),null;default:return null}}function ol(e,t){switch(na(t),t.tag){case 3:xa(Ra),K();break;case 26:case 27:case 5:$(t);break;case 4:K();break;case 13:cs(t);break;case 19:M(us);break;case 10:xa(t.type);break;case 22:case 23:cs(t),bo(),null!==e&&M(Ba);break;case 24:xa(Ra)}}function il(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var o=n.create,i=n.inst;r=o(),i.destroy=r}n=n.next}while(n!==a)}}catch(s){uu(t,t.return,s)}}function sl(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var o=a.next;r=o;do{if((r.tag&e)===e){var i=r.inst,s=i.destroy;if(void 0!==s){i.destroy=void 0,a=t;var l=n,c=s;try{c()}catch(u){uu(a,l,u)}}}r=r.next}while(r!==o)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{mo(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=gs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){uu(e,t,a)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){uu(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){uu(e,t,o)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){uu(e,e.return,a)}}function ml(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,o=null,s=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||Yu(e,t,f,null,r,h)}}for(var m in r){var f=r[m];if(h=n[m],r.hasOwnProperty(m)&&(null!=f||null!=h))switch(m){case"type":o=f;break;case"name":a=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:f!==h&&Yu(e,t,m,f,r,h)}}return void gt(e,s,l,c,u,d,o,a);case"select":for(o in f=s=l=m=null,n)if(c=n[o],n.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(o)||Yu(e,t,o,null,r,c)}for(a in r)if(o=r[a],c=n[a],r.hasOwnProperty(a)&&(null!=o||null!=c))switch(a){case"value":m=o;break;case"defaultValue":l=o;break;case"multiple":s=o;default:o!==c&&Yu(e,t,a,o,r,c)}return t=l,n=s,r=f,void(null!=m?yt(e,!!n,m,!1):!!r!==!!n&&(null!=t?yt(e,!!n,t,!0):yt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=m=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Yu(e,t,l,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(null!=a||null!=o))switch(s){case"value":m=a;break;case"defaultValue":f=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(i(91));break;default:a!==o&&Yu(e,t,s,a,r,o)}return void xt(e,m,f);case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&null!=m&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else Yu(e,t,p,null,r,m);for(c in r)if(m=r[c],f=n[c],r.hasOwnProperty(c)&&m!==f&&(null!=m||null!=f))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else Yu(e,t,c,m,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)m=n[g],n.hasOwnProperty(g)&&null!=m&&!r.hasOwnProperty(g)&&Yu(e,t,g,null,r,m);for(u in r)if(m=r[u],f=n[u],r.hasOwnProperty(u)&&m!==f&&(null!=m||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(i(137,t));break;default:Yu(e,t,u,m,r,f)}return;default:if(Ct(t)){for(var v in n)m=n[v],n.hasOwnProperty(v)&&void 0!==m&&!r.hasOwnProperty(v)&&Zu(e,t,v,void 0,r,m);for(d in r)m=r[d],f=n[d],!r.hasOwnProperty(d)||m===f||void 0===m&&void 0===f||Zu(e,t,d,m,r,f);return}}for(var b in n)m=n[b],n.hasOwnProperty(b)&&null!=m&&!r.hasOwnProperty(b)&&Yu(e,t,b,null,r,m);for(h in r)m=r[h],f=n[h],!r.hasOwnProperty(h)||m===f||null==m&&null==f||Yu(e,t,h,m,r,f)}(r,e.type,n,t),r[Oe]=t}catch(a){uu(e,e.return,a)}}function fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function pl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xu));else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ed(t,r,n),t[Re]=e,t[Oe]=n}catch(o){uu(e,e.return,o)}}var yl=!1,xl=!1,wl=!1,Nl="function"===typeof WeakSet?WeakSet:Set,kl=null;function Sl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Dl(e,n),4&r&&il(5,n);break;case 1:if(Dl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){uu(n,n.return,i)}else{var a=gs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){uu(n,n.return,s)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Dl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{mo(e,t)}catch(i){uu(n,n.return,i)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Dl(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Dl(e,n);break;case 13:Dl(e,n),4&r&&Tl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=fu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||yl)){t=null!==t&&null!==t.memoizedState||xl,a=yl;var o=xl;yl=r,(xl=t)&&!o?zl(e,n,0!==(8772&n.subtreeFlags)):Dl(e,n),yl=a,xl=o}break;case 30:break;default:Dl(e,n)}}function jl(e){var t=e.alternate;null!==t&&(e.alternate=null,jl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Me(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,_l=!1;function El(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(o){}switch(n.tag){case 26:xl||dl(n,t),El(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||dl(n,t);var r=Cl,a=_l;md(n.type)&&(Cl=n.stateNode,_l=!1),El(e,t,n),wd(n.stateNode),Cl=r,_l=a;break;case 5:xl||dl(n,t);case 6:if(r=Cl,a=_l,Cl=null,El(e,t,n),_l=a,null!==(Cl=r))if(_l)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(i){uu(n,t,i)}else try{Cl.removeChild(n.stateNode)}catch(i){uu(n,t,i)}break;case 18:null!==Cl&&(_l?(fd(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),_h(e)):fd(Cl,n.stateNode));break;case 4:r=Cl,a=_l,Cl=n.stateNode.containerInfo,_l=!0,El(e,t,n),Cl=r,_l=a;break;case 0:case 11:case 14:case 15:xl||sl(2,n,t),xl||sl(4,n,t),El(e,t,n);break;case 1:xl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),El(e,t,n);break;case 21:El(e,t,n);break;case 22:xl=(r=xl)||null!==n.memoizedState,El(e,t,n),xl=r;break;default:El(e,t,n)}}function Tl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{_h(e)}catch(n){uu(t,t.return,n)}}function Il(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Nl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Nl),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var r=pu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){Cl=l.stateNode,_l=!1;break e}break;case 5:Cl=l.stateNode,_l=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,_l=!0;break e}l=l.return}if(null===Cl)throw Error(i(160));Al(o,s,a),Cl=null,_l=!1,null!==(o=a.alternate)&&(o.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Pl(t,e),t=t.sibling}var Ol=null;function Pl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ll(e),4&r&&(sl(3,e,e.return),il(3,e),sl(5,e,e.return));break;case 1:Rl(t,e),Ll(e),512&r&&(xl||null===n||dl(n,n.return)),64&r&&yl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Ol;if(Rl(t,e),Ll(e),512&r&&(xl||null===n||dl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(o=a.getElementsByTagName("title")[0])||o[ze]||o[Re]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector("head > title"))),ed(o,r,n),o[Re]=e,qe(o),r=o;break e;case"link":var s=zd("link","href",a).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((o=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}ed(o=a.createElement(r),r,n),a.head.appendChild(o);break;case"meta":if(s=zd("meta","content",a).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((o=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}ed(o=a.createElement(r),r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[Re]=e,qe(o),r=o}e.stateNode=r}else Md(a,e.type,e.stateNode);else e.stateNode=Pd(a,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?Md(a,e.type,e.stateNode):Pd(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ll(e),512&r&&(xl||null===n||dl(n,n.return)),null!==n&&4&r&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ll(e),512&r&&(xl||null===n||dl(n,n.return)),32&e.flags){a=e.stateNode;try{Nt(a,"")}catch(f){uu(e,e.return,f)}}4&r&&null!=e.stateNode&&ml(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(wl=!0);break;case 6:if(Rl(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(f){uu(e,e.return,f)}}break;case 3:if(Fd=null,a=Ol,Ol=Sd(t.containerInfo),Rl(t,e),Ol=a,Ll(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{_h(t.containerInfo)}catch(f){uu(e,e.return,f)}wl&&(wl=!1,Ul(e));break;case 4:r=Ol,Ol=Sd(e.stateNode.containerInfo),Rl(t,e),Ll(e),Ol=r;break;case 12:default:Rl(t,e),Ll(e);break;case 13:Rl(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Il(e,r)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=yl,d=xl;if(yl=u||a,xl=d||c,Rl(t,e),xl=d,yl=u,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||yl||xl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(o=c.stateNode,a)"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(f){uu(c,c.return,f)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(f){uu(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Il(e,n))));break;case 19:Rl(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Il(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(fl(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;vl(e,pl(e),a);break;case 5:var o=n.stateNode;32&n.flags&&(Nt(o,""),n.flags&=-33),vl(e,pl(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;gl(e,pl(e),s);break;default:throw Error(i(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ul(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ul(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Dl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sl(4,t,t.return),Fl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:wd(t.stateNode);case 26:case 5:dl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:zl(a,o,n),il(4,o);break;case 1:if(zl(a,o,n),"function"===typeof(a=(r=o).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(a=(r=o).updateQueue)){var s=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)ho(l[a],s)}catch(c){uu(r,r.return,c)}}n&&64&i&&ll(o),ul(o,o.return);break;case 27:bl(o);case 26:case 5:zl(a,o,n),n&&null===r&&4&i&&hl(o),ul(o,o.return);break;case 12:zl(a,o,n);break;case 13:zl(a,o,n),n&&4&i&&Tl(a,o);break;case 22:null===o.memoizedState&&zl(a,o,n),ul(o,o.return);break;case 30:break;default:zl(a,o,n)}t=t.sibling}}function Ml(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Pa(n))}function Bl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Pa(e))}function Vl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Wl(e,t,n,r),t=t.sibling}function Wl(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Vl(e,t,n,r),2048&a&&il(9,t);break;case 1:case 13:default:Vl(e,t,n,r);break;case 3:Vl(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Pa(e)));break;case 12:if(2048&a){Vl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,s=o.onPostCommit;"function"===typeof s&&s(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Vl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,null!==t.memoizedState?2&o._visibility?Vl(e,t,n,r):ql(e,t):2&o._visibility?Vl(e,t,n,r):(o._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&a&&Ml(i,t);break;case 24:Vl(e,t,n,r),2048&a&&Bl(t.alternate,t)}}function Hl(e,t,n,r,a){for(a=a&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,i=t,s=n,l=r,c=i.flags;switch(i.tag){case 0:case 11:case 15:Hl(o,i,s,l,a),il(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?Hl(o,i,s,l,a):ql(o,i):(u._visibility|=2,Hl(o,i,s,l,a)),a&&2048&c&&Ml(i.alternate,i);break;case 24:Hl(o,i,s,l,a),a&&2048&c&&Bl(i.alternate,i);break;default:Hl(o,i,s,l,a)}t=t.sibling}}function ql(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:ql(n,r),2048&a&&Ml(r.alternate,r);break;case 24:ql(n,r),2048&a&&Bl(r.alternate,r);break;default:ql(n,r)}t=t.sibling}}var Jl=8192;function Kl(e){if(e.subtreeFlags&Jl)for(e=e.child;null!==e;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 26:Kl(e),e.flags&Jl&&null!==e.memoizedState&&function(e,t,n){if(null===Vd)throw Error(i(475));var r=Vd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var a=Ad(n.href),o=e.querySelector(Td(a));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Hd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void qe(o);o=e.ownerDocument||e,n=Id(n),(a=Nd.get(a))&&Ud(n,a),qe(o=o.createElement("link"));var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Hd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ol,e.memoizedState,e.memoizedProps);break;case 5:default:Kl(e);break;case 3:case 4:var t=Ol;Ol=Sd(e.stateNode.containerInfo),Kl(e),Ol=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Jl,Jl=16777216,Kl(e),Jl=t):Kl(e))}}function $l(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,Zl(r,e)}$l(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Ql(e),2048&e.flags&&sl(9,e,e.return);break;case 3:case 12:default:Ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Yl(e)):Ql(e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,Zl(r,e)}$l(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:sl(8,t,t.return),Yl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Yl(t));break;default:Yl(t)}e=e.sibling}}function Zl(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:sl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Pa(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,kl=r;else e:for(n=e;null!==kl;){var a=(r=kl).sibling,o=r.return;if(jl(r),r===n){kl=null;break e}if(null!==a){a.return=o,kl=a;break e}kl=o}}}var ec={getCacheForType:function(e){var t=Ca(Ra),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ac=null,oc=0,ic=0,sc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,mc=0,fc=0,pc=0,gc=0,vc=0,bc=null,yc=null,xc=!1,wc=0,Nc=1/0,kc=null,Sc=null,jc=0,Cc=null,_c=null,Ec=0,Ac=0,Tc=null,Ic=null,Rc=0,Oc=null;function Pc(){if(0!==(2&nc)&&0!==oc)return oc&-oc;if(null!==P.T){return 0!==Da?Da:Au()}return Te()}function Lc(){0===gc&&(gc=0===(536870912&oc)||oa?Ne():536870912);var e=as.current;return null!==e&&(e.flags|=32),gc}function Uc(e,t,n){(e!==rc||2!==ic&&9!==ic)&&null===e.cancelPendingCommit||(Wc(e,0),Mc(e,oc,gc,!1)),je(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(fc|=n),4===hc&&Mc(e,oc,gc,!1)),Nu(e))}function Dc(e,t,n){if(0!==(6&nc))throw Error(i(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||xe(e,t),a=r?function(e,t){var n=nc;nc|=2;var r=qc(),a=Jc();rc!==e||oc!==t?(kc=null,Nc=te()+500,Wc(e,t)):cc=xe(e,t);e:for(;;)try{if(0!==ic&&null!==ac){t=ac;var o=sc;t:switch(ic){case 1:ic=0,sc=null,Zc(e,t,o,1);break;case 2:case 9:if($a(o)){ic=0,sc=null,Yc(t);break}t=function(){2!==ic&&9!==ic||rc!==e||(ic=7),Nu(e)},o.then(t,t);break e;case 3:ic=7;break e;case 4:ic=5;break e;case 7:$a(o)?(ic=0,sc=null,Yc(t)):(ic=0,sc=null,Zc(e,t,o,7));break;case 5:var s=null;switch(ac.tag){case 26:s=ac.memoizedState;case 5:case 27:var l=ac;if(!s||Bd(s)){ic=0,sc=null;var c=l.sibling;if(null!==c)ac=c;else{var u=l.return;null!==u?(ac=u,eu(u)):ac=null}break t}}ic=0,sc=null,Zc(e,t,o,5);break;case 6:ic=0,sc=null,Zc(e,t,o,6);break;case 8:Vc(),hc=6;break e;default:throw Error(i(462))}}Qc();break}catch(d){Hc(e,d)}return ba=va=null,P.H=r,P.A=a,nc=n,null!==ac?0:(rc=null,oc=0,Er(),hc)}(e,t):Gc(e,t,!0),o=r;;){if(0===a){cc&&!r&&Mc(e,t,0,!1);break}if(n=e.current.alternate,!o||zc(n)){if(2===a){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;a=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Wc(l,s).flags|=256),2!==(s=Gc(l,s,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=o,fc|=o,a=4;break e}o=yc,yc=a,null!==o&&(null===yc?yc=o:yc.push.apply(yc,o))}a=s}if(o=!1,2!==a)continue}}if(1===a){Wc(e,0),Mc(e,t,0,!0);break}e:{switch(r=e,o=a){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Mc(r,t,gc,!lc);break e;case 2:yc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(a=wc+300-te())){if(Mc(r,t,gc,!lc),0!==ye(r,0,!0))break e;r.timeoutHandle=ld(Fc.bind(null,r,n,yc,kc,xc,t,gc,fc,vc,lc,o,2,-0,0),a)}else Fc(r,n,yc,kc,xc,t,gc,fc,vc,lc,o,0,-0,0)}break}a=Gc(e,t,!1),o=!1}Nu(e)}function Fc(e,t,n,r,a,o,s,l,c,u,d,h,m,f){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Vd={stylesheets:null,count:0,unsuspend:Wd},Gl(t),null!==(h=function(){if(null===Vd)throw Error(i(475));var e=Vd;return e.stylesheets&&0===e.count&&Jd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Jd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,o,n,r,a,s,l,c,d,1,m,f)),void Mc(e,o,s,!u);nu(e,t,o,n,r,a,s,l,c)}function zc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!$n(o(),a))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mc(e,t,n,r){t&=~pc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var o=31-me(a),i=1<<o;r[o]=-1,a&=~i}0!==n&&Ce(e,n,t)}function Bc(){return 0!==(6&nc)||(ku(0,!1),!1)}function Vc(){if(null!==ac){if(0===ic)var e=ac.return;else ba=va=null,Fo(e=ac),$i=null,Qi=0,e=ac;for(;null!==e;)ol(e.alternate,e),e=e.return;ac=null}}function Wc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vc(),rc=e,ac=n=Fr(e.current,null),oc=t,ic=0,sc=null,lc=!1,cc=xe(e,t),uc=!1,vc=gc=pc=fc=mc=hc=0,yc=bc=null,xc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-me(r),o=1<<a;t|=e[a],r&=~o}return dc=t,Er(),n}function Hc(e,t){xo=null,P.H=qi,t===qa||t===Ka?(t=Za(),ic=3):t===Ja?(t=Za(),ic=4):ic=t===Cs?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,sc=t,null===ac&&(hc=1,ws(e,Sr(t,e.current)))}function qc(){var e=P.H;return P.H=qi,null===e?qi:e}function Jc(){var e=P.A;return P.A=ec,e}function Kc(){hc=4,lc||(4194048&oc)!==oc&&null!==as.current||(cc=!0),0===(134217727&mc)&&0===(134217727&fc)||null===rc||Mc(rc,oc,gc,!1)}function Gc(e,t,n){var r=nc;nc|=2;var a=qc(),o=Jc();rc===e&&oc===t||(kc=null,Wc(e,t)),t=!1;var i=hc;e:for(;;)try{if(0!==ic&&null!==ac){var s=ac,l=sc;switch(ic){case 8:Vc(),i=6;break e;case 3:case 2:case 9:case 6:null===as.current&&(t=!0);var c=ic;if(ic=0,sc=null,Zc(e,s,l,c),n&&cc){i=0;break e}break;default:c=ic,ic=0,sc=null,Zc(e,s,l,c)}}$c(),i=hc;break}catch(u){Hc(e,u)}return t&&e.shellSuspendCounter++,ba=va=null,nc=r,P.H=a,P.A=o,null===ac&&(rc=null,oc=0,Er()),i}function $c(){for(;null!==ac;)Xc(ac)}function Qc(){for(;null!==ac&&!Z();)Xc(ac)}function Xc(e){var t=Xs(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):ac=t}function Yc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Us(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Us(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Fo(t);default:ol(n,t),t=Xs(n,t=ac=zr(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ac=t}function Zc(e,t,n,r){ba=va=null,Fo(t),$i=null,Qi=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ka(t,n,a,!0),null!==(n=as.current)){switch(n.tag){case 13:return null===os?Kc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Ga?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,a)),!1;case 22:return n.flags|=65536,r===Ga?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,a)),!1}throw Error(i(435,n.tag))}return du(e,r,a),Kc(),!1}if(oa)return null!==(t=as.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==la&&pa(Sr(e=Error(i(422),{cause:r}),n))):(r!==la&&pa(Sr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Sr(r,n),so(e,a=ks(e.stateNode,r,a)),4!==hc&&(hc=2)),!1;var o=Error(i(520),{cause:r});if(o=Sr(o,n),null===bc?bc=[o]:bc.push(o),4!==hc&&(hc=2),null===t)return!0;r=Sr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,so(n,e=ks(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Sc||!Sc.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,js(a=Ss(a),e,n,r),so(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,oc))return hc=1,ws(e,Sr(n,e.current)),void(ac=null)}catch(o){if(null!==a)throw ac=a,o;return hc=1,ws(e,Sr(n,e.current)),void(ac=null)}32768&t.flags?(oa||1===r?e=!0:cc||0!==(536870912&oc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=as.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(ac=n);if(null!==(t=t.sibling))return void(ac=t);ac=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=al(e.alternate,e);if(null!==n)return n.flags&=32767,void(ac=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ac=e);ac=e=n}while(null!==e);hc=6,ac=null}function nu(e,t,n,r,a,o,s,l,c){e.cancelPendingCommit=null;do{su()}while(0!==jc);if(0!==(6&nc))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,a,o){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-me(n),d=1<<u;s[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];null!==m&&(m.lane&=-536870913)}n&=~d}0!==r&&Ce(e,r,0),0!==o&&0===a&&0!==e.tag&&(e.suspendedLanes|=o&~(i&~t))}(e,n,o|=_r,s,l,c),e===rc&&(ac=rc=null,oc=0),_c=t,Cc=e,Ec=n,Ac=o,Tc=a,Ic=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(oe,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=P.T,P.T=null,a=L.p,L.p=2,s=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(g){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var f;h!==n||0!==a&&3!==h.nodeType||(l=s+a),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)m=h,h=f;for(;;){if(h===e)break t;if(m===n&&++u===a&&(l=s),m===o&&++d===r&&(c=s),null!==(f=h.nextSibling))break;m=(h=m).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(o=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var p=gs(n.type,a,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(p,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){uu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))pd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{nc=s,L.p=a,P.T=r}}jc=1,ru(),au(),ou()}}function ru(){if(1===jc){jc=0;var e=Cc,t=_c,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null;var r=L.p;L.p=2;var a=nc;nc|=4;try{Pl(t,e);var o=nd,i=er(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(i!==s&&s&&s.ownerDocument&&Zn(s.ownerDocument.documentElement,s)){if(null!==l&&tr(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),f=s.textContent.length,p=Math.min(l.start,f),g=void 0===l.end?p:Math.min(l.end,f);!m.extend&&p>g&&(i=g,g=p,p=i);var v=Yn(s,p),b=Yn(s,g);if(v&&b&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==b.node||m.focusOffset!==b.offset)){var y=d.createRange();y.setStart(v.node,v.offset),m.removeAllRanges(),p>g?(m.addRange(y),m.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),m.addRange(y))}}}}for(d=[],m=s;m=m.parentNode;)1===m.nodeType&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var x=d[s];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}nh=!!td,nd=td=null}finally{nc=a,L.p=r,P.T=n}}e.current=t,jc=2}}function au(){if(2===jc){jc=0;var e=Cc,t=_c,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=P.T,P.T=null;var r=L.p;L.p=2;var a=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=a,L.p=r,P.T=n}}jc=3}}function ou(){if(4===jc||3===jc){jc=0,ee();var e=Cc,t=_c,n=Ec,r=Ic;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?jc=5:(jc=0,_c=Cc=null,iu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Sc=null),Ae(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=P.T,a=L.p,L.p=2,P.T=null;try{for(var o=e.onRecoverableError,i=0;i<r.length;i++){var s=r[i];o(s.value,{componentStack:s.stack})}}finally{P.T=t,L.p=a}}0!==(3&Ec)&&su(),Nu(e),a=e.pendingLanes,0!==(4194090&n)&&0!==(42&a)?e===Oc?Rc++:(Rc=0,Oc=e):Rc=0,ku(0,!1)}}function iu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Pa(t)))}function su(e){return ru(),au(),ou(),lu()}function lu(){if(5!==jc)return!1;var e=Cc,t=Ac;Ac=0;var n=Ae(Ec),r=P.T,a=L.p;try{L.p=32>n?32:n,P.T=null,n=Tc,Tc=null;var o=Cc,s=Ec;if(jc=0,_c=Cc=null,Ec=0,0!==(6&nc))throw Error(i(331));var l=nc;if(nc|=4,Xl(o.current),Wl(o,o.current,s,n),nc=l,ku(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,o)}catch(c){}return!0}finally{L.p=a,P.T=r,iu(e,t)}}function cu(e,t,n){t=Sr(n,t),null!==(e=oo(e,t=ks(e.stateNode,t,2),2))&&(je(e,2),Nu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))){e=Sr(n,e),null!==(r=oo(t,n=Ss(2),2))&&(js(n,r,t,e),je(r,2),Nu(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(uc=!0,a.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(oc&n)===n&&(4===hc||3===hc&&(62914560&oc)===oc&&300>te()-wc?0===(2&nc)&&Wc(e,0):pc|=n,vc===oc&&(vc=0)),Nu(e)}function mu(e,t){0===t&&(t=ke()),null!==(e=Ir(e,t))&&(je(e,t),Nu(e))}function fu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function pu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),mu(e,n)}var gu=null,vu=null,bu=!1,yu=!1,xu=!1,wu=0;function Nu(e){e!==vu&&null===e.next&&(null===vu?gu=vu=e:vu=vu.next=e),yu=!0,bu||(bu=!0,dd(function(){0!==(6&nc)?X(re,Su):ju()}))}function ku(e,t){if(!xu&&yu){xu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var o=0;else{var i=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-me(42|e)+1)-1,o=201326741&(o&=a&~(i&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Eu(r,o))}else o=oc,0===(3&(o=ye(r,r===rc?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||xe(r,o)||(n=!0,Eu(r,o));r=r.next}}while(n);xu=!1}}function Su(){ju()}function ju(){yu=bu=!1;var e=0;0!==wu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sd&&(sd=e,!0);return sd=null,!1}()&&(e=wu),wu=0);for(var t=te(),n=null,r=gu;null!==r;){var a=r.next,o=Cu(r,t);0===o?(r.next=null,null===n?gu=a:n.next=a,null===a&&(vu=n)):(n=r,(0!==e||0!==(3&o))&&(yu=!0)),r=a}ku(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var i=31-me(o),s=1<<i,l=a[i];-1===l?0!==(s&n)&&0===(s&r)||(a[i]=we(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=oc,n=ye(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ic||9===ic)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Y(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||xe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Y(r),Ae(n)){case 2:case 8:n=ae;break;case 32:default:n=oe;break;case 268435456:n=se}return r=_u.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Y(r),e.callbackPriority=2,e.callbackNode=null,2}function _u(e,t){if(0!==jc&&5!==jc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(su()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=ye(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Dc(e,r,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?_u.bind(null,e):null)}function Eu(e,t){if(su())return null;Dc(e,t,!0)}function Au(){return 0===wu&&(wu=Ne()),wu}function Tu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Iu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ru=0;Ru<wr.length;Ru++){var Ou=wr[Ru];Nr(Ou.toLowerCase(),"on"+(Ou[0].toUpperCase()+Ou.slice(1)))}Nr(mr,"onAnimationEnd"),Nr(fr,"onAnimationIteration"),Nr(pr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(gr,"onTransitionRun"),Nr(vr,"onTransitionStart"),Nr(br,"onTransitionCancel"),Nr(yr,"onTransitionEnd"),$e("onMouseEnter",["mouseout","mouseover"]),$e("onMouseLeave",["mouseout","mouseover"]),$e("onPointerEnter",["pointerout","pointerover"]),$e("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function Uu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&a.isPropagationStopped())break e;o=s,a.currentTarget=c;try{o(a)}catch(u){vs(u)}a.currentTarget=null,o=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==o&&a.isPropagationStopped())break e;o=s,a.currentTarget=c;try{o(a)}catch(u){vs(u)}a.currentTarget=null,o=l}}}}function Du(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(Bu(t,e,2,!1),n.add(r))}function Fu(e,t,n){var r=0;t&&(r|=4),Bu(n,e,r,t)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Mu(e){if(!e[zu]){e[zu]=!0,Je.forEach(function(t){"selectionchange"!==t&&(Lu.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zu]||(t[zu]=!0,Fu("selectionchange",!1,t))}}function Bu(e,t,n,r){switch(ch(t)){case 2:var a=rh;break;case 8:a=ah;break;default:a=oh}n=a.bind(null,t,n,e),a=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Vu(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===a)return;i=i.return}for(;null!==s;){if(null===(i=Be(s)))return;if(5===(c=i.tag)||6===c||26===c||27===c){r=o=i;continue e}s=s.parentNode}}r=r.return}Ut(function(){var r=o,a=It(n),i=[];e:{var s=xr.get(e);if(void 0!==s){var c=Zt,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=pn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case mr:case fr:case pr:c=sn;break;case yr:c=bn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=yn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=xn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),m=d?null!==s?s+"Capture":null:s;d=[];for(var f,p=r;null!==p;){var g=p;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===m||null!=(g=Dt(p,m))&&d.push(Wu(p,g,f)),h)break;p=p.return}0<d.length&&(s=new c(s,u,null,n,a),i.push({event:s,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Tt||!(u=n.relatedTarget||n.fromElement)||!Be(u)&&!u[Pe])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Be(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",m="onPointerEnter",p="pointer"),h=null==c?s:We(c),f=null==u?s:We(u),(s=new d(g,p+"leave",c,n,a)).target=h,s.relatedTarget=f,g=null,Be(a)===r&&((d=new d(m,p+"enter",u,n,a)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(m=u,p=0,f=d=c;f;f=qu(f))p++;for(f=0,g=m;g;g=qu(g))f++;for(;0<p-f;)d=qu(d),p--;for(;0<f-p;)m=qu(m),f--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=qu(d),m=qu(m)}d=null}else d=null;null!==c&&Ju(i,s,c,d,!1),null!==u&&null!==h&&Ju(i,h,u,d,!0)}if("select"===(c=(s=r?We(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var v=Fn;else if(Rn(s))if(zn)v=Gn;else{v=Jn;var b=qn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Ct(r.elementType)&&(v=Fn):v=Kn;switch(v&&(v=v(e,r))?On(i,v,n,a):(b&&b(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&bt(s,"number",s.value)),b=r?We(r):window,e){case"focusin":(Rn(b)||"true"===b.contentEditable)&&(rr=b,ar=r,or=null);break;case"focusout":or=ar=rr=null;break;case"mousedown":ir=!0;break;case"contextmenu":case"mouseup":case"dragend":ir=!1,sr(i,n,a);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(i,n,a)}var y;if(Nn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Tn?En(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(jn&&"ko"!==n.locale&&(Tn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Tn&&(y=Ht()):(Vt="value"in(Bt=a)?Bt.value:Bt.textContent,Tn=!0)),0<(b=Hu(r,x)).length&&(x=new cn(x,e,null,n,a),i.push({event:x,listeners:b}),y?x.data=y:null!==(y=An(n))&&(x.data=y))),(y=Sn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(_n=!0,Cn);case"textInput":return(e=t.data)===Cn&&_n?null:e;default:return null}}(e,n):function(e,t){if(Tn)return"compositionend"===e||!Nn&&En(e,t)?(e=Ht(),Wt=Vt=Bt=null,Tn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Hu(r,"onBeforeInput")).length&&(b=new cn("onBeforeInput","beforeinput",null,n,a),i.push({event:b,listeners:x}),b.data=y)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var o=Tu((a[Oe]||null).action),i=r.submitter;i&&null!==(t=(t=i[Oe]||null)?Tu(t.formAction):i.getAttribute("formAction"))&&(o=t,i=null);var s=new Zt("action","action",null,r,a);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wu){var e=i?Iu(a,i):new FormData(a);Ii(n,{pending:!0,data:e,method:a.method,action:o},null,e)}}else"function"===typeof o&&(s.preventDefault(),e=i?Iu(a,i):new FormData(a),Ii(n,{pending:!0,data:e,method:a.method,action:o},o,e))},currentTarget:a}]})}}(i,e,r,n,a)}Uu(i,t)})}function Wu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hu(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===o||(null!=(a=Dt(e,n))&&r.unshift(Wu(e,a,o)),null!=(a=Dt(e,t))&&r.push(Wu(e,a,o))),3===e.tag)return r;e=e.return}return[]}function qu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ju(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===c||(l=c,a?null!=(c=Dt(n,o))&&i.unshift(Wu(n,c,l)):a||null!=(c=Dt(n,o))&&i.push(Wu(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Ku=/\r\n?/g,Gu=/\u0000|\uFFFD/g;function $u(e){return("string"===typeof e?e:""+e).replace(Ku,"\n").replace(Gu,"")}function Qu(e,t){return t=$u(t),$u(e)===t}function Xu(){}function Yu(e,t,n,r,a,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Nt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Nt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":jt(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&Yu(e,t,"name",a.name,a,null),Yu(e,t,"formEncType",a.formEncType,a,null),Yu(e,t,"formMethod",a.formMethod,a,null),Yu(e,t,"formTarget",a.formTarget,a,null)):(Yu(e,t,"encType",a.encType,a,null),Yu(e,t,"method",a.method,a,null),Yu(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"onScroll":null!=r&&Du("scroll",e);break;case"onScrollEnd":null!=r&&Du("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Du("beforetoggle",e),Du("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=_t.get(n)||n,r)}}function Zu(e,t,n,r,a,o){switch(n){case"style":jt(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Nt(e,r):("number"===typeof r||"bigint"===typeof r)&&Nt(e,""+r);break;case"onScroll":null!=r&&Du("scroll",e);break;case"onScrollEnd":null!=r&&Du("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Oe]||null)?o[n]:null)&&e.removeEventListener(t,o,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Du("error",e),Du("load",e);var r,a=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":a=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Yu(e,t,r,s,n,null)}}return o&&Yu(e,t,"srcSet",n.srcSet,n,null),void(a&&Yu(e,t,"src",n.src,n,null));case"input":Du("invalid",e);var l=r=s=o=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(null!=d)switch(a){case"name":o=d;break;case"type":s=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:Yu(e,t,a,d,n,null)}}return vt(e,r,l,c,u,s,o,!1),void dt(e);case"select":for(o in Du("invalid",e),a=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:Yu(e,t,o,l,n,null)}return t=r,n=s,e.multiple=!!a,void(null!=t?yt(e,!!a,t,!1):null!=n&&yt(e,!!a,n,!0));case"textarea":for(s in Du("invalid",e),r=o=a=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":a=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:Yu(e,t,s,l,n,null)}return wt(e,a,o,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else Yu(e,t,c,a,n,null);return;case"dialog":Du("beforetoggle",e),Du("toggle",e),Du("cancel",e),Du("close",e);break;case"iframe":case"object":Du("load",e);break;case"video":case"audio":for(a=0;a<Pu.length;a++)Du(Pu[a],e);break;case"image":Du("error",e),Du("load",e);break;case"details":Du("toggle",e);break;case"embed":case"source":case"link":Du("error",e),Du("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Yu(e,t,u,a,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(a=n[d])&&Zu(e,t,d,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(a=n[l])&&Yu(e,t,l,a,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function ad(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function id(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sd=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function fd(e,t){var n=t,r=0,a=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&wd(i.documentElement),2&n&&wd(i.body),4&n)for(wd(n=i.head),i=n.firstChild;i;){var s=i.nextSibling,l=i.nodeName;i[ze]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=s}}if(0===a)return e.removeChild(o),void _h(t);a--}else"$"===n||"$?"===n||"$!"===n?a++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);_h(t)}function pd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":pd(n),Me(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function yd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function wd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Me(e)}var Nd=new Map,kd=new Set;function Sd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var jd=L.d;L.d={f:function(){var e=jd.f(),t=Bc();return e||t},r:function(e){var t=Ve(e);null!==t&&5===t.tag&&"form"===t.type?Oi(t):jd.r(e)},D:function(e){jd.D(e),_d("dns-prefetch",e,null)},C:function(e,t){jd.C(e,t),_d("preconnect",e,t)},L:function(e,t,n){jd.L(e,t,n);var r=Cd;if(r&&e&&t){var a='link[rel="preload"][as="'+pt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+pt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+pt(n.imageSizes)+'"]')):a+='[href="'+pt(e)+'"]';var o=a;switch(t){case"style":o=Ad(e);break;case"script":o=Rd(e)}Nd.has(o)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Nd.set(o,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Td(o))||"script"===t&&r.querySelector(Od(o))||(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}},m:function(e,t){jd.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+pt(r)+'"][href="'+pt(e)+'"]',o=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Rd(e)}if(!Nd.has(o)&&(e=h({rel:"modulepreload",href:e},t),Nd.set(o,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Od(o)))return}ed(r=n.createElement("link"),"link",e),qe(r),n.head.appendChild(r)}}},X:function(e,t){jd.X(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,a=Rd(e),o=r.get(a);o||((o=n.querySelector(Od(a)))||(e=h({src:e,async:!0},t),(t=Nd.get(a))&&Dd(e,t),qe(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}},S:function(e,t,n){jd.S(e,t,n);var r=Cd;if(r&&e){var a=He(r).hoistableStyles,o=Ad(e);t=t||"default";var i=a.get(o);if(!i){var s={loading:0,preload:null};if(i=r.querySelector(Td(o)))s.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Nd.get(o))&&Ud(e,n);var l=i=r.createElement("link");qe(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Ld(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:s},a.set(o,i)}}},M:function(e,t){jd.M(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,a=Rd(e),o=r.get(a);o||((o=n.querySelector(Od(a)))||(e=h({src:e,async:!0,type:"module"},t),(t=Nd.get(a))&&Dd(e,t),qe(o=n.createElement("script")),ed(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}}};var Cd="undefined"===typeof document?null:document;function _d(e,t,n){var r=Cd;if(r&&"string"===typeof t&&t){var a=pt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),kd.has(a)||(kd.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}}function Ed(e,t,n,r){var a,o,s,l,c=(c=H.current)?Sd(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Td(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Nd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Nd.set(e,n),u||(a=c,o=e,s=n,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=a.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),ed(o,"link",s),qe(o),a.head.appendChild(o))))),t&&null===r)throw Error(i(528,""));return d}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rd(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Ad(e){return'href="'+pt(e)+'"'}function Td(e){return'link[rel="stylesheet"]['+e+"]"}function Id(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Rd(e){return'[src="'+pt(e)+'"]'}function Od(e){return"script[async]"+e}function Pd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+pt(n.href)+'"]');if(r)return t.instance=r,qe(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",a),Ld(r,n.precedence,e),t.instance=r;case"stylesheet":a=Ad(n.href);var o=e.querySelector(Td(a));if(o)return t.state.loading|=4,t.instance=o,qe(o),o;r=Id(n),(a=Nd.get(a))&&Ud(r,a),qe(o=(e.ownerDocument||e).createElement("link"));var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ed(o,"link",r),t.state.loading|=4,Ld(o,n.precedence,e),t.instance=o;case"script":return o=Rd(n.src),(a=e.querySelector(Od(o)))?(t.instance=a,qe(a),a):(r=n,(a=Nd.get(o))&&Dd(r=h({},n),a),qe(a=(e=e.ownerDocument||e).createElement("script")),ed(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ld(r,n.precedence,e));return t.instance}function Ld(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,o=a,i=0;i<r.length;i++){var s=r[i];if(s.dataset.precedence===t)o=s;else if(o!==a)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Ud(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Dd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fd=null;function zd(e,t,n){if(null===Fd){var r=new Map,a=Fd=new Map;a.set(n,r)}else(r=(a=Fd).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var o=n[a];if(!(o[ze]||o[Re]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var i=o.getAttribute(t)||"";i=e+i;var s=r.get(i);s?s.push(o):r.set(i,[o])}}return r}function Md(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Bd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Vd=null;function Wd(){}function Hd(){if(this.count--,0===this.count)if(this.stylesheets)Jd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var qd=null;function Jd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,qd=new Map,t.forEach(Kd,e),qd=null,Hd.call(e))}function Kd(e,t){if(!(4&t.state.loading)){var n=qd.get(e);if(n)var r=n.get(null);else{n=new Map,qd.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<a.length;o++){var i=a[o];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(a=t.instance).getAttribute("data-precedence"),(o=n.get(i)||r)===r&&n.set(null,a),n.set(i,a),this.count++,r=Hd.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),o?o.parentNode.insertBefore(a,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Gd={$$typeof:w,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function $d(e,t,n,r,a,o,i,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Qd(e,t,n,r,a,o,i,s,l,c,u,d){return e=new $d(e,t,n,i,s,l,c,d),t=1,!0===o&&(t|=24),o=Ur(3,null,null,t),e.current=o,o.stateNode=e,(t=Oa()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Xd(e){return e?e=Pr:Pr}function Yd(e,t,n,r,a,o){a=Xd(a),null===r.context?r.context=a:r.pendingContext=a,(r=ao(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(Uc(n,0,t),io(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Ir(e,67108864);null!==t&&Uc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var a=P.T;P.T=null;var o=L.p;try{L.p=2,oh(e,t,n,r)}finally{L.p=o,P.T=a}}function ah(e,t,n,r){var a=P.T;P.T=null;var o=L.p;try{L.p=8,oh(e,t,n,r)}finally{L.p=o,P.T=a}}function oh(e,t,n,r){if(nh){var a=ih(r);if(null===a)Vu(e,t,r,sh,n),bh(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return dh=yh(dh,e,t,n,r,a),!0;case"dragenter":return hh=yh(hh,e,t,n,r,a),!0;case"mouseover":return mh=yh(mh,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return fh.set(o,yh(fh.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,ph.set(o,yh(ph.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<vh.indexOf(e)){for(;null!==a;){var o=Ve(a);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var i=be(o.pendingLanes);if(0!==i){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;i;){var l=1<<31-me(i);s.entanglements[1]|=l,i&=~l}Nu(o),0===(6&nc)&&(Nc=te()+500,ku(0,!1))}}break;case 13:null!==(s=Ir(o,2))&&Uc(s,0,2),Bc(),eh(o,2)}if(null===(o=ih(r))&&Vu(e,t,r,sh,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Vu(e,t,r,null,n)}}function ih(e){return lh(e=It(e))}var sh=null;function lh(e){if(sh=null,null!==(e=Be(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ae:return 8;case oe:case ie:return 32;case se:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,mh=null,fh=new Map,ph=new Map,gh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":fh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ph.delete(t.pointerId)}}function yh(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=Ve(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function xh(e){var t=Be(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,function(){if(13===n.tag){var e=Pc();e=Ee(e);var t=Ir(n,e);null!==t&&Uc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ih(e.nativeEvent);if(null!==n)return null!==(t=Ve(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Tt=r,n.target.dispatchEvent(r),Tt=null,t.shift()}return!0}function Nh(e,t,n){wh(e)&&n.delete(t)}function kh(){uh=!1,null!==dh&&wh(dh)&&(dh=null),null!==hh&&wh(hh)&&(hh=null),null!==mh&&wh(mh)&&(mh=null),fh.forEach(Nh),ph.forEach(Nh)}function Sh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kh)))}var jh=null;function Ch(e){jh!==e&&(jh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){jh===e&&(jh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var o=Ve(n);null!==o&&(e.splice(t,3),t-=3,Ii(o,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function _h(e){function t(t){return Sh(t,e)}null!==dh&&Sh(dh,e),null!==hh&&Sh(hh,e),null!==mh&&Sh(mh,e),fh.forEach(t),ph.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)xh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],o=n[r+1],i=a[Oe]||null;if("function"===typeof o)i||Ch(n);else if(i){var s=null;if(o&&o.hasAttribute("formAction")){if(a=o,i=o[Oe]||null)s=i.formAction;else if(null!==lh(a))continue}else s=i.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Ch(n)}}}function Eh(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Eh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Yd(t.current,Pc(),e,t,null,null)},Ah.prototype.unmount=Eh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Yd(e.current,2,null,e,null,null),Bc(),t[Pe]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Te();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&xh(e)}};var Th=a.version;if("19.1.1"!==Th)throw Error(i(527,Th,"19.1.1"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return u(a),e;if(o===r)return u(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,c=a.child;c;){if(c===n){s=!0,n=a,r=o;break}if(c===r){s=!0,r=a,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=a;break}if(c===r){s=!0,r=o,n=a;break}c=c.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ih={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ue=Rh.inject(Ih),de=Rh}catch(Ph){}}t.createRoot=function(e,t){if(!s(e))throw Error(i(299));var n=!1,r="",a=bs,o=ys,l=xs;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Qd(e,1,!1,null,0,n,r,a,o,l,0,null),e[Pe]=t.current,Mu(e),new Eh(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(i(299));var r=!1,a="",o=bs,l=ys,c=xs,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Qd(e,1,!0,t,0,r,a,o,l,c,0,u)).context=Xd(null),n=t.current,(a=ao(r=Ee(r=Pc()))).callback=null,oo(n,a,r),n=r,t.current.lanes=n,je(t,n),Nu(t),e[Pe]=t.current,Mu(e),new Ah(t)},t.version="19.1.1"},7074:e=>{"use strict";e.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"===typeof t&&(t=[t]):t=[],e.forEach(function(e){e&&("websocket"===e.transportName&&!1===n.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(n)?(e.transportName,r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)):e.transportName))}),r}}}},7129:(e,t,n)=>{"use strict";e.exports=[n(5768),n(2840),n(6348),n(4514),n(1408)(n(4514)),n(9260),n(1408)(n(9260)),n(6583),n(7883),n(1408)(n(6583)),n(6263)]},7237:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function a(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){t=t||"";var r,o,i=[];for(o in"string"!==typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!==r&&undefined!==r&&!isNaN(r)||(r=""),o=a(o),r=a(r),null===o||null===r)continue;i.push(o+"="+r)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,a={};t=n.exec(e);){var o=r(t[1]),i=r(t[2]);null===o||null===i||o in a||(a[o]=i)}return a}},7315:(e,t,n)=>{"use strict";e.exports={isOpera:function(){return n.g.navigator&&/opera/i.test(n.g.navigator.userAgent)},isKonqueror:function(){return n.g.navigator&&/konqueror/i.test(n.g.navigator.userAgent)},hasDomain:function(){if(!n.g.document)return!0;try{return!!n.g.document.domain}catch(e){return!1}}}},7429:(e,t,n)=>{"use strict";n.g.crypto&&n.g.crypto.getRandomValues?e.exports.randomBytes=function(e){var t=new Uint8Array(e);return n.g.crypto.getRandomValues(t),t}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}},7525:e=>{e.exports="1.6.1"},7526:(e,t,n)=>{"use strict";var r=n(3775);e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},7868:(e,t,n)=>{"use strict";n(7943);var r,a=n(3775),o=n(6329),i=n(4416),s=n(9892),l=n(7526),c=n(1091),u=n(7074),d=n(5120),h=n(7315),m=n(3265),f=n(9302),p=n(3447),g=n(6646),v=n(3214),b=n(2514),y=n(1483),x=function(){};function w(e,t,n){if(!(this instanceof w))return new w(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");p.call(this),this.readyState=w.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&m.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if("function"===typeof r)this._generateSessionId=r;else{if("number"!==typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return i.string(r)}}this._server=n.server||i.numberString(1e3);var o=new a(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var s="https:"===o.protocol;if("https:"===g.protocol&&!s&&!l.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var c=t.sort();c.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<c.length-1&&e===c[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var u=l.getOrigin(g.href);this._origin=u?u.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,this.url,this._urlInfo={nullOrigin:!h.hasDomain(),sameOrigin:l.isOriginEqual(this.url,g.href),sameScheme:l.isSchemeEqual(this.url,g.href)},this._ir=new y(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function N(e){return 1e3===e||e>=3e3&&e<=4999}o(w,p),w.prototype.close=function(e,t){if(e&&!N(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==w.CLOSING&&this.readyState!==w.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},w.prototype.send=function(e){if("string"!==typeof e&&(e=""+e),this.readyState===w.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===w.OPEN&&this._transport.send(s.quote(e))},w.version=n(7525),w.CONNECTING=0,w.OPEN=1,w.CLOSING=2,w.CLOSED=3,w.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=d.extend(e,this._urlInfo);var n=r.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},w.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(x(e.transportName),e.needBody&&(!n.g.document.body||"undefined"!==typeof n.g.document.readyState&&"complete"!==n.g.document.readyState&&"interactive"!==n.g.document.readyState))return x(),this._transports.unshift(e),void c.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),x();var r=l.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),a=this._transportOptions[e.transportName];x();var o=new e(r,this._transUrl,a);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},w.prototype._transportTimeout=function(){this.readyState===w.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},w.prototype._transportMessage=function(e){var t,n=this,r=e.slice(0,1),a=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new f("heartbeat")),void this.transport}if(a)try{t=JSON.parse(a)}catch(o){}if("undefined"!==typeof t)switch(r){case"a":Array.isArray(t)&&t.forEach(function(e){n.transport,n.dispatchEvent(new b(e))});break;case"m":this.transport,this.dispatchEvent(new b(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},w.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),N(e)||2e3===e||this.readyState!==w.CONNECTING?this._close(e,t):this._connect()},w.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===w.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=w.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new f("open")),this.transport):this._close(1006,"Server lost session")},w.prototype._close=function(e,t,n){this.transport,this.readyState;var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===w.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=w.CLOSING,setTimeout(function(){this.readyState=w.CLOSED,r&&this.dispatchEvent(new f("error"));var a=new v("close");a.wasClean=n||!1,a.code=e||1e3,a.reason=t,this.dispatchEvent(a),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},w.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return r=u(e),n(3270)(w,e),w}},7883:(e,t,n)=>{"use strict";var r=n(6329),a=n(1271),o=n(6348),i=n(3863),s=n(5631);function l(e){if(!s.enabled)throw new Error("Transport created when disabled");a.call(this,e,"/xhr",i,s)}r(l,a),l.enabled=o.enabled,l.transportName="xdr-polling",l.roundTrips=2,e.exports=l},7926:(e,t,n)=>{"use strict";var r=n(4372).b,a=n(6329),o=n(1091),i=n(5507),s=n(2822);function l(e,t){var a=this;r.call(this);var l=function(){var n=a.ifr=new i(s.transportName,t,e);n.once("message",function(e){if(e){var t;try{t=JSON.parse(e)}catch(o){return a.emit("finish"),void a.close()}var n=t[0],r=t[1];a.emit("finish",n,r)}a.close()}),n.once("close",function(){a.emit("finish"),a.close()})};n.g.document.body?l():o.attachEvent("load",l)}a(l,r),l.enabled=function(){return i.enabled()},l.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=l},7943:()=>{"use strict";var e,t=Array.prototype,n=Object.prototype,r=Function.prototype,a=String.prototype,o=t.slice,i=n.toString,s=function(e){return"[object Function]"===n.toString.call(e)},l=function(e){return"[object String]"===i.call(e)},c=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();e=c?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var u=function(t,r,a){for(var o in r)n.hasOwnProperty.call(r,o)&&e(t,o,r[o],a)},d=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function h(){}u(r,{bind:function(e){var t=this;if(!s(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=o.call(arguments,1),r=Math.max(0,t.length-n.length),a=[],i=0;i<r;i++)a.push("$"+i);var l=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof l){var r=t.apply(this,n.concat(o.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(o.call(arguments)))});return t.prototype&&(h.prototype=t.prototype,l.prototype=new h,h.prototype=null),l}}),u(Array,{isArray:function(e){return"[object Array]"===i.call(e)}});var m=Object("a"),f="a"!==m[0]||!(0 in m);u(t,{forEach:function(e){var t=d(this),n=f&&l(this)?this.split(""):t,r=arguments[1],a=-1,o=n.length>>>0;if(!s(e))throw new TypeError;for(;++a<o;)a in n&&e.call(r,n[a],a,t)}},!function(e){var t=!0,n=!0;return e&&(e.call("foo",function(e,n,r){"object"!==typeof r&&(t=!1)}),e.call([1],function(){n="string"===typeof this},"x")),!!e&&t&&n}(t.forEach));var p=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);u(t,{indexOf:function(e){var t=f&&l(this)?this.split(""):d(this),n=t.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=function(e){var t=+e;return t!==t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}(arguments[1])),r=r>=0?r:Math.max(0,n+r);r<n;r++)if(r in t&&t[r]===e)return r;return-1}},p);var g=a.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=void 0===/()??/.exec("")[1];a.split=function(n,r){var a=this;if(void 0===n&&0===r)return[];if("[object RegExp]"!==i.call(n))return g.call(this,n,r);var o,s,l,c,u=[],d=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.extended?"x":"")+(n.sticky?"y":""),h=0;for(n=new RegExp(n.source,d+"g"),a+="",e||(o=new RegExp("^"+n.source+"$(?!\\s)",d)),r=void 0===r?-1>>>0:r>>>0;(s=n.exec(a))&&!((l=s.index+s[0].length)>h&&(u.push(a.slice(h,s.index)),!e&&s.length>1&&s[0].replace(o,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(s[e]=void 0)}),s.length>1&&s.index<a.length&&t.push.apply(u,s.slice(1)),c=s[0].length,h=l,u.length>=r));)n.lastIndex===s.index&&n.lastIndex++;return h===a.length?!c&&n.test("")||u.push(""):u.push(a.slice(h)),u.length>r?u.slice(0,r):u}}():"0".split(void 0,0).length&&(a.split=function(e,t){return void 0===e&&0===t?[]:g.call(this,e,t)});var v=a.substr,b="".substr&&"b"!=="0b".substr(-1);u(a,{substr:function(e,t){return v.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},b)},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},8357:(e,t,n)=>{"use strict";var r=n(6329),a=n(4683);function o(e,t,n){a.call(this,e,t,n,{noCredentials:!0})}r(o,a),o.enabled=a.enabled,e.exports=o},8359:(e,t,n)=>{"use strict";var r=n(6907);function a(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}a.prototype._transportClose=function(e,t){r.postMessage("c",JSON.stringify([e,t]))},a.prototype._transportMessage=function(e){r.postMessage("t",e)},a.prototype._send=function(e){this._transport.send(e)},a.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=a},8853:(e,t,n)=>{"use strict";e.exports=n(5896)},8982:(e,t,n)=>{"use strict";var r=n(6329),a=n(7526),o=n(1272),i=n(4892);function s(e,t,n,r,s){var l=a.addPath(e,t),c=this;o.call(this,e,n),this.poll=new i(r,l,s),this.poll.on("message",function(e){c.emit("message",e)}),this.poll.once("close",function(e,t){c.poll=null,c.emit("close",e,t),c.close()})}r(s,o),s.prototype.close=function(){o.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=s},9260:(e,t,n)=>{"use strict";var r=n(6329),a=n(9546),o=n(8357),i=n(1271);function s(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/htmlfile",a,o)}r(s,i),s.enabled=function(e){return a.enabled&&e.sameOrigin},s.transportName="htmlfile",s.roundTrips=2,e.exports=s},9302:e=>{"use strict";function t(e){this.type=e}t.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,e.exports=t},9333:(e,t,n)=>{"use strict";var r=n(6329),a=n(4683);function o(e,t,n,r){a.call(this,e,t,n,r)}r(o,a),o.enabled=a.enabled&&a.supportsCORS,e.exports=o},9546:(e,t,n)=>{"use strict";var r=n(6329),a=n(6907),o=n(7526),i=n(4372).b,s=n(4416);function l(e){i.call(this);var t=this;a.polluteGlobalNamespace(),this.id="a"+s.string(6),e=o.addQuery(e,"c="+decodeURIComponent(a.WPrefix+"."+this.id)),l.htmlfileEnabled;var r=l.htmlfileEnabled?a.createHtmlfile:a.createIframe;n.g[a.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=r(e,function(){t._cleanup(),t._close("permanent")})}r(l,i),l.prototype.abort=function(){this._cleanup(),this._close("user")},l.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n.g[a.WPrefix][this.id]},l.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},l.htmlfileEnabled=!1;var c=["Active"].concat("Object").join("X");if(c in n.g)try{l.htmlfileEnabled=!!new n.g[c]("htmlfile")}catch(u){}l.enabled=l.htmlfileEnabled||a.iframeEnabled,e.exports=l},9892:e=>{"use strict";var t,n=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var r=JSON.stringify(e);return n.lastIndex=0,n.test(r)?(t||(t=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n}(n)),r.replace(n,function(e){return t[e]})):r}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{453:"58d80086",460:"f8bae615",740:"febd0112"}[e]+".chunk.js",n.miniCssF=e=>"static/css/"+e+"."+{460:"378c384d",740:"9a384fef"}[e]+".chunk.css",n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="chatwebfe:";n.l=(r,a,o,i)=>{if(e[r])e[r].push(a);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[a];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(m);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach(e=>e(n)),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{if("undefined"!==typeof document){var e=e=>new Promise((t,r)=>{var a=n.miniCssF(e),o=n.p+a;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=(i=n[r]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(a===e||a===t))return i}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var i;if((a=(i=o[r]).getAttribute("data-href"))===e||a===t)return i}})(a,o))return t();((e,t,r,a,o)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",n.nc&&(i.nonce=n.nc),i.onerror=i.onload=n=>{if(i.onerror=i.onload=null,"load"===n.type)a();else{var r=n&&n.type,s=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+s+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=s,i.parentNode&&i.parentNode.removeChild(i),o(l)}},i.href=t,r?r.parentNode.insertBefore(i,r.nextSibling):document.head.appendChild(i)})(e,o,null,t,r)}),t={792:0};n.f.miniCss=(n,r)=>{t[n]?r.push(t[n]):0!==t[n]&&{460:1,740:1}[n]&&r.push(t[n]=e(n).then(()=>{t[n]=0},e=>{throw delete t[n],e}))}}})(),(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=o);var i=n.p+n.u(t),s=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,o,i=r[0],s=r[1],l=r[2],c=0;if(i.some(t=>0!==e[t])){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)l(n)}for(t&&t(r);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkchatwebfe=self.webpackChunkchatwebfe||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>lt,hasStandardBrowserEnv:()=>ut,hasStandardBrowserWebWorkerEnv:()=>dt,navigator:()=>ct,origin:()=>ht});var t=n(5043),r=n(4391),a=n(5352),o=n(3986),i=n(2555),s=n(791);const l=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);var c=n(579);const u=["confirmPassword"],d=()=>{const[e,n]=(0,t.useState)({username:"",password:"",confirmPassword:"",firstName:"",lastName:"",email:"",phoneNumber:"",dateOfBirth:"",gender:""}),[r,a]=(0,t.useState)("Ch\xe0o m\u1eebng b\u1ea1n \u0111\u1ebfn v\u1edbi k\xeanh \u0111\u0103ng k\xfd!"),[d,h]=(0,t.useState)(!1),[m,f]=(0,t.useState)([]),p=t=>{const{name:r,value:a}=t.target;n((0,i.A)((0,i.A)({},e),{},{[r]:a}))};return(0,c.jsx)("div",{className:"chat-register-container",children:(0,c.jsxs)("div",{className:"chat-box",children:[(0,c.jsx)("div",{className:"register-logo",children:(0,c.jsx)("img",{src:"http://res.cloudinary.com/dytdhvf3s/image/upload/v1760508458/User_5e3ca275-4ec3-45c3-8f53-f173871d002e.jpg",alt:"ChatWeb Logo"})}),(0,c.jsx)("div",{className:"chat-message",children:r}),m.length>0&&(0,c.jsx)("div",{className:"error-messages",children:m.map((e,t)=>(0,c.jsxs)("div",{className:"error-message",children:["\u274c ",e]},t))}),(0,c.jsxs)("form",{className:"chat-form",onSubmit:async t=>{if(t.preventDefault(),h(!0),a("\u0110ang x\u1eed l\xfd \u0111\u0103ng k\xfd..."),f([]),e.password!==e.confirmPassword)return f(["M\u1eadt kh\u1ea9u v\xe0 nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp"]),a("Vui l\xf2ng ki\u1ec3m tra l\u1ea1i th\xf4ng tin!"),void h(!1);const{confirmPassword:n}=e,r=(0,o.A)(e,u);console.log("Original form:",e),console.log("Data to send:",r);const i=(e=>{const t=[];return(!e.username||e.username.length<3)&&t.push("T\xean \u0111\u0103ng nh\u1eadp ph\u1ea3i c\xf3 \xedt nh\u1ea5t 3 k\xfd t\u1ef1"),(!e.password||e.password.length<6)&&t.push("M\u1eadt kh\u1ea9u ph\u1ea3i c\xf3 \xedt nh\u1ea5t 6 k\xfd t\u1ef1"),e.firstName.trim()||t.push("H\u1ecd kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),e.lastName.trim()||t.push("T\xean kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),e.email&&l(e.email)||t.push("Email kh\xf4ng h\u1ee3p l\u1ec7"),(!e.phoneNumber||e.phoneNumber.length<10)&&t.push("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i c\xf3 \xedt nh\u1ea5t 10 s\u1ed1"),e.dateOfBirth||t.push("Ng\xe0y sinh kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),t})(r);if(i.length>0)return f(i),a("Vui l\xf2ng ki\u1ec3m tra l\u1ea1i th\xf4ng tin!"),void h(!1);try{console.log("Form data to send:",r);const e=await(async e=>{try{console.log("Sending registration data:",e);const t=await fetch("".concat(s.J,"/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=t.headers.get("content-type");let r;if(n&&n.includes("application/json"))r=await t.json();else{const e=await t.text();r={success:t.ok,message:e||"\u0110\u0103ng k\xfd th\xe0nh c\xf4ng!"}}if(!t.ok)throw new Error(r.message);return r}catch(t){return console.error("Register API Error:",t),{success:!1,message:t instanceof Error?t.message:"C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u0103ng k\xfd"}}})(r);e.success?(a("\ud83c\udf89 \u0110\u0103ng k\xfd th\xe0nh c\xf4ng! H\xe3y m\u1edf mail v\xe0 x\xe1c th\u1ef1c \u0111\u1ec3 ho\xe0n t\u1ea5t \u0111\u0103ng k\xfd."),f([])):(a("\u274c ".concat(e.message)),f([e.message]))}catch(c){console.error("Registration error:",c);const e=c instanceof Error?c.message:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!";a("\u274c ".concat(e)),f([e])}h(!1)},children:[(0,c.jsx)("input",{type:"text",name:"username",placeholder:"T\xean \u0111\u0103ng nh\u1eadp",value:e.username,onChange:p,required:!0}),(0,c.jsx)("input",{type:"text",name:"firstName",placeholder:"H\u1ecd",value:e.firstName,onChange:p,required:!0}),(0,c.jsx)("input",{type:"text",name:"lastName",placeholder:"T\xean",value:e.lastName,onChange:p,required:!0}),(0,c.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:e.email,onChange:p,required:!0}),(0,c.jsx)("input",{type:"password",name:"password",placeholder:"M\u1eadt kh\u1ea9u",value:e.password,onChange:p,required:!0}),(0,c.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u",value:e.confirmPassword,onChange:p,required:!0}),(0,c.jsx)("input",{type:"tel",name:"phoneNumber",placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",value:e.phoneNumber,onChange:p,required:!0}),(0,c.jsxs)("div",{className:"gender-options",children:[(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{type:"radio",name:"gender",value:"true",checked:"true"===e.gender,onChange:p,required:!0}),"Nam"]}),(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{type:"radio",name:"gender",value:"false",checked:"false"===e.gender,onChange:p}),"N\u1eef"]})]}),(0,c.jsx)("input",{type:"date",name:"dateOfBirth",placeholder:"Ng\xe0y sinh",value:e.dateOfBirth,onChange:p,required:!0}),(0,c.jsx)("button",{type:"submit",className:"send-btn",disabled:d,children:d?"\u23f3 \u0110ang \u0111\u0103ng k\xfd...":"\ud83d\udcdd \u0110\u0103ng k\xfd"})]})]})})};var h=n(1424);const m=()=>(0,h.G6)(),f=()=>{const[e,n]=(0,t.useState)({username:"",password:""}),[r,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(""),[u,d]=(0,t.useState)([]),[m,f]=(0,t.useState)(!1),p=e=>{const{name:t,value:r}=e.target;n(e=>(0,i.A)((0,i.A)({},e),{},{[t]:r})),u.length>0&&d([])};return(0,c.jsx)("div",{className:"login-container",children:(0,c.jsxs)("div",{className:"login-card",children:[(0,c.jsx)("div",{className:"login-logo",children:(0,c.jsx)("img",{src:"http://res.cloudinary.com/dytdhvf3s/image/upload/v1760508458/User_5e3ca275-4ec3-45c3-8f53-f173871d002e.jpg",alt:"ChatWeb Logo"})}),(0,c.jsxs)("div",{className:"login-header",children:[(0,c.jsx)("h2",{children:"\u0110\u0103ng Nh\u1eadp"}),(0,c.jsx)("p",{children:"Ch\xe0o m\u1eebng tr\u1edf l\u1ea1i ChatWeb!"})]}),(0,c.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a(!0),l("\u0110ang \u0111\u0103ng nh\u1eadp..."),d([]),f(!1);const n=((e,t)=>{const n=[];return e&&""!==e.trim()||n.push("Username kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),t&&""!==t.trim()||n.push("Password kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),n})(e.username,e.password);if(n.length>0)return d(n),l("Vui l\xf2ng ki\u1ec3m tra l\u1ea1i th\xf4ng tin!"),void a(!1);try{console.log("\ud83d\udd11 Attempting login:",{username:e.username});const t=await(async(e,t)=>{try{const n=await fetch("".concat(s.J,"/users/authenticate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!n.ok){const e=await n.text();throw new Error("HTTP ".concat(n.status,": ").concat(e))}const r=n.headers.get("content-type");let a;if(r&&r.includes("application/json")){const e=await n.json();a={success:!0,jwtToken:e.jwtToken,token:e.jwtToken,message:"\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng"}}else{const e=await n.text();a={success:!0,message:e,token:e}}const o=a.jwtToken||a.token;return a.success&&o&&(0,h.f7)(o),a}catch(n){throw console.error("Login error:",n),n}})(e.username,e.password);console.log("\u2705 Login successful:",t),f(!0),l(t.message||"\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng! Token \u0111\xe3 \u0111\u01b0\u1ee3c l\u01b0u."),setTimeout(()=>{window.location.href="/home"},200)}catch(r){console.error("\u274c Login failed:",r),f(!1),l("\u0110\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i!"),d([r.message||"C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh \u0111\u0103ng nh\u1eadp"])}finally{a(!1)}},className:"login-form",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"username",children:"Username:"}),(0,c.jsx)("input",{type:"text",id:"username",name:"username",value:e.username,onChange:p,placeholder:"Nh\u1eadp username...",disabled:r,className:"form-input"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,c.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:p,placeholder:"Nh\u1eadp password...",disabled:r,className:"form-input"})]}),(0,c.jsx)("button",{type:"submit",disabled:r,className:"login-button",children:r?"\u0110ang \u0111\u0103ng nh\u1eadp...":"\u0110\u0103ng Nh\u1eadp"})]}),o&&(0,c.jsx)("div",{className:"message ".concat(m?"success":"info"),children:o}),u.length>0&&(0,c.jsx)("div",{className:"error-container",children:u.map((e,t)=>(0,c.jsx)("div",{className:"error-message",children:e},t))}),(0,c.jsxs)("div",{className:"login-links",children:[(0,c.jsx)("a",{href:"/register",children:"Ch\u01b0a c\xf3 t\xe0i kho\u1ea3n? \u0110\u0103ng k\xfd ngay"}),(0,c.jsx)("a",{href:"/forgot-password",children:"Qu\xean m\u1eadt kh\u1ea9u?"})]})]})})};var p=n(5081),g=n.n(p);const v="\n",b="\0";class y{get body(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body||""}get binaryBody(){return this._binaryBody||this.isBinaryBody||(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody}constructor(e){const{command:t,headers:n,body:r,binaryBody:a,escapeHeaderValues:o,skipContentLengthHeader:i}=e;this.command=t,this.headers=Object.assign({},n||{}),a?(this._binaryBody=a,this.isBinaryBody=!0):(this._body=r||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=i||!1}static fromRawFrame(e,t){const n={},r=e=>e.replace(/^\s+|\s+$/g,"");for(const a of e.headers.reverse()){a.indexOf(":");const o=r(a[0]);let i=r(a[1]);t&&"CONNECT"!==e.command&&"CONNECTED"!==e.command&&(i=y.hdrValueUnEscape(i)),n[o]=i}return new y({command:e.command,headers:n,binaryBody:e.binaryBody,escapeHeaderValues:t})}toString(){return this.serializeCmdAndHeaders()}serialize(){const e=this.serializeCmdAndHeaders();return this.isBinaryBody?y.toUnit8Array(e,this._binaryBody).buffer:e+this._body+b}serializeCmdAndHeaders(){const e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const t of Object.keys(this.headers||{})){const n=this.headers[t];this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?e.push("".concat(t,":").concat(y.hdrValueEscape("".concat(n)))):e.push("".concat(t,":").concat(n))}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push("content-length:".concat(this.bodyLength())),e.join(v)+v+v}isBodyEmpty(){return 0===this.bodyLength()}bodyLength(){const e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?(new TextEncoder).encode(e).length:0}static toUnit8Array(e,t){const n=(new TextEncoder).encode(e),r=new Uint8Array([0]),a=new Uint8Array(n.length+t.length+r.length);return a.set(n),a.set(t,n.length),a.set(r,n.length+t.length),a}static marshall(e){return new y(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")}}class x{constructor(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t="string"===typeof e?this._encoder.encode(e):new Uint8Array(e),n&&0!==t[t.length-1]){const e=new Uint8Array(t.length+1);e.set(t,0),e[t.length]=0,t=e}for(let r=0;r<t.length;r++){const e=t[r];this._onByte(e)}}_collectFrame(e){0!==e&&13!==e&&(10!==e?(this._onByte=this._collectCommand,this._reinjectByte(e)):this.onIncomingPing())}_collectCommand(e){if(13!==e)return 10===e?(this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders)):void this._consumeByte(e)}_collectHeaders(e){13!==e&&(10!==e?(this._onByte=this._collectHeaderKey,this._reinjectByte(e)):this._setupCollectBody())}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(58===e)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(e)}_collectHeaderValue(e){if(13!==e)return 10===e?(this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders)):void this._consumeByte(e)}_setupCollectBody(){const e=this._results.headers.filter(e=>"content-length"===e[0])[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){0!==e?this._consumeByte(e):this._retrievedBody()}_collectBodyFixedSize(e){0!==this._bodyBytesRemaining--?this._consumeByte(e):this._retrievedBody()}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(e){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",e)}this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var w,N,k,S;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(w||(w={})),function(e){e[e.ACTIVE=0]="ACTIVE",e[e.DEACTIVATING=1]="DEACTIVATING",e[e.INACTIVE=2]="INACTIVE"}(N||(N={})),function(e){e[e.LINEAR=0]="LINEAR",e[e.EXPONENTIAL=1]="EXPONENTIAL"}(k||(k={})),function(e){e.Interval="interval",e.Worker="worker"}(S||(S={}));class j{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Interval,n=arguments.length>2?arguments[2]:void 0;this._interval=e,this._strategy=t,this._debug=n,this._workerScript="\n    var startTime = Date.now();\n    setInterval(function() {\n        self.postMessage(Date.now() - startTime);\n    }, ".concat(this._interval,");\n  ")}start(e){this.stop(),this.shouldUseWorker()?this.runWorker(e):this.runInterval(e)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return"undefined"!==typeof Worker&&this._strategy===S.Worker}runWorker(e){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=t=>e(t.data))}runInterval(e){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const t=Date.now();this._timer=setInterval(()=>{e(Date.now()-t)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class C{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(e=>"v".concat(e.replace(".",""),".stomp"))}}C.V1_0="1.0",C.V1_1="1.1",C.V1_2="1.2",C.default=new C([C.V1_2,C.V1_1,C.V1_0]);class _{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(e,t,n){this._client=e,this._webSocket=t,this._connected=!1,this._serverFrameHandlers={CONNECTED:e=>{this.debug("connected to server ".concat(e.headers.server)),this._connected=!0,this._connectedVersion=e.headers.version,this._connectedVersion===C.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(e.headers),this.onConnect(e)},MESSAGE:e=>{const t=e.headers.subscription,n=this._subscriptions[t]||this.onUnhandledMessage,r=e,a=this,o=this._connectedVersion===C.V1_2?r.headers.ack:r.headers["message-id"];r.ack=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.ack(o,t,e)},r.nack=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.nack(o,t,e)},n(r)},RECEIPT:e=>{const t=this._receiptWatchers[e.headers["receipt-id"]];t?(t(e),delete this._receiptWatchers[e.headers["receipt-id"]]):this.onUnhandledReceipt(e)},ERROR:e=>{this.onStompError(e)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=n.debug,this.stompVersions=n.stompVersions,this.connectHeaders=n.connectHeaders,this.disconnectHeaders=n.disconnectHeaders,this.heartbeatIncoming=n.heartbeatIncoming,this.heartbeatToleranceMultiplier=n.heartbeatGracePeriods,this.heartbeatOutgoing=n.heartbeatOutgoing,this.splitLargeFrames=n.splitLargeFrames,this.maxWebSocketChunkSize=n.maxWebSocketChunkSize,this.forceBinaryWSFrames=n.forceBinaryWSFrames,this.logRawCommunication=n.logRawCommunication,this.appendMissingNULLonIncoming=n.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=n.discardWebsocketOnCommFailure,this.onConnect=n.onConnect,this.onDisconnect=n.onDisconnect,this.onStompError=n.onStompError,this.onWebSocketClose=n.onWebSocketClose,this.onWebSocketError=n.onWebSocketError,this.onUnhandledMessage=n.onUnhandledMessage,this.onUnhandledReceipt=n.onUnhandledReceipt,this.onUnhandledFrame=n.onUnhandledFrame,this.onHeartbeatReceived=n.onHeartbeatReceived,this.onHeartbeatLost=n.onHeartbeatLost}start(){const e=new x(e=>{const t=y.fromRawFrame(e,this._escapeHeaderValues);this.logRawCommunication||this.debug("<<< ".concat(t));(this._serverFrameHandlers[t.command]||this.onUnhandledFrame)(t)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=t=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const e=t.data instanceof ArrayBuffer?(new TextDecoder).decode(t.data):t.data;this.debug("<<< ".concat(e))}e.parseChunk(t.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=e=>{this.debug("Connection closed to ".concat(this._webSocket.url)),this._cleanUp(),this.onWebSocketClose(e)},this._webSocket.onerror=e=>{this.onWebSocketError(e)},this._webSocket.onopen=()=>{const e=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),e["accept-version"]=this.stompVersions.supportedVersions(),e["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:e})}}_setupHeartbeat(e){if(e.version!==C.V1_1&&e.version!==C.V1_2)return;if(!e["heart-beat"])return;const[t,n]=e["heart-beat"].split(",").map(e=>parseInt(e,10));if(0!==this.heartbeatOutgoing&&0!==n){const e=Math.max(this.heartbeatOutgoing,n);this.debug("send PING every ".concat(e,"ms")),this._pinger=new j(e,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===w.OPEN&&(this._webSocket.send(v),this.debug(">>> PING"))})}if(0!==this.heartbeatIncoming&&0!==t){const e=Math.max(this.heartbeatIncoming,t);this.debug("check PONG every ".concat(e,"ms")),this._ponger=setInterval(()=>{const t=Date.now()-this._lastServerActivityTS;t>e*this.heartbeatToleranceMultiplier&&(this.debug("did not receive server activity for the last ".concat(t,"ms")),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},e)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState!==w.CONNECTING&&this._webSocket.readyState!==w.OPEN||this._closeOrDiscardWebsocket())}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){var e,t;"function"!==typeof this._webSocket.terminate&&(e=this._webSocket,t=e=>this.debug(e),e.terminate=function(){const n=()=>{};this.onerror=n,this.onmessage=n,this.onopen=n;const r=new Date,a=Math.random().toString().substring(2,8),o=this.onclose;this.onclose=e=>{const n=(new Date).getTime()-r.getTime();t("Discarded socket (#".concat(a,")  closed after ").concat(n,"ms, with code/reason: ").concat(e.code,"/").concat(e.reason))},this.close(),null===o||void 0===o||o.call(e,{code:4001,reason:"Quick discarding socket (#".concat(a,") without waiting for the shutdown sequence."),wasClean:!1})}),this._webSocket.terminate()}_transmit(e){const{command:t,headers:n,body:r,binaryBody:a,skipContentLengthHeader:o}=e,i=new y({command:t,headers:n,body:r,binaryBody:a,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:o});let s=i.serialize();if(this.logRawCommunication?this.debug(">>> ".concat(s)):this.debug(">>> ".concat(i)),this.forceBinaryWSFrames&&"string"===typeof s&&(s=(new TextEncoder).encode(s)),"string"===typeof s&&this.splitLargeFrames){let e=s;for(;e.length>0;){const t=e.substring(0,this.maxWebSocketChunkSize);e=e.substring(this.maxWebSocketChunkSize),this._webSocket.send(t),this.debug("chunk sent = ".concat(t.length,", remaining = ").concat(e.length))}}else this._webSocket.send(s)}dispose(){if(this.connected)try{const e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt="close-".concat(this._counter++)),this.watchForReceipt(e.receipt,e=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(e)}),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug("Ignoring error during disconnect ".concat(e))}else this._webSocket.readyState!==w.CONNECTING&&this._webSocket.readyState!==w.OPEN||this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(e){const{destination:t,headers:n,body:r,binaryBody:a,skipContentLengthHeader:o}=e,i=Object.assign({destination:t},n);this._transmit({command:"SEND",headers:i,body:r,binaryBody:a,skipContentLengthHeader:o})}watchForReceipt(e,t){this._receiptWatchers[e]=t}subscribe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object.assign({},n),n.id||(n.id="sub-".concat(this._counter++)),n.destination=e,this._subscriptions[n.id]=t,this._transmit({command:"SUBSCRIBE",headers:n});const r=this;return{id:n.id,unsubscribe:e=>r.unsubscribe(n.id,e)}}unsubscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})}begin(e){const t=e||"tx-".concat(this._counter++);this._transmit({command:"BEGIN",headers:{transaction:t}});const n=this;return{id:t,commit(){n.commit(t)},abort(){n.abort(t)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object.assign({},n),this._connectedVersion===C.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"ACK",headers:n})}nack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=Object.assign({},n),this._connectedVersion===C.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"NACK",headers:n})}}class E{get webSocket(){var e;return null===(e=this._stompHandler)||void 0===e?void 0:e._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===N.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.stompVersions=C.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=9e5,this.reconnectTimeMode=k.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=S.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=N.INACTIVE;const t=()=>{};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onHeartbeatReceived=t,this.onHeartbeatLost=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.onChangeState=t,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}configure(e){Object.assign(this,e),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug("Warning: maxReconnectDelay (".concat(this.maxReconnectDelay,"ms) is less than reconnectDelay (").concat(this.reconnectDelay,"ms). Using reconnectDelay as the maxReconnectDelay delay.")),this.maxReconnectDelay=this.reconnectDelay)}activate(){const e=()=>{this.active?this.debug("Already ACTIVE, ignoring request to activate"):(this._changeState(N.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect())};this.state===N.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{e()})):e()}async _connect(){if(await this.beforeConnect(this),this._stompHandler)return void this.debug("There is already a stompHandler, skipping the call to connect");if(!this.active)return void this.debug("Client has been marked inactive, will not attempt to connect");this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug("Connection not established in ".concat(this.connectionTimeout,"ms, closing socket")),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const e=this._createWebSocket();this._stompHandler=new _(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:e=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active)return this.debug("STOMP got connected while deactivate was issued, will disconnect now"),void this._disposeStompHandler();this.onConnect(e)},onDisconnect:e=>{this.onDisconnect(e)},onStompError:e=>{this.onStompError(e)},onWebSocketClose:e=>{this._stompHandler=void 0,this.state===N.DEACTIVATING&&this._changeState(N.INACTIVE),this.onWebSocketClose(e),this.active&&this._schedule_reconnect()},onWebSocketError:e=>{this.onWebSocketError(e)},onUnhandledMessage:e=>{this.onUnhandledMessage(e)},onUnhandledReceipt:e=>{this.onUnhandledReceipt(e)},onUnhandledFrame:e=>{this.onUnhandledFrame(e)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let e;if(this.webSocketFactory)e=this.webSocketFactory();else{if(!this.brokerURL)throw new Error("Either brokerURL or webSocketFactory must be provided");e=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions())}return e.binaryType="arraybuffer",e}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug("STOMP: scheduling reconnection in ".concat(this._nextReconnectDelay,"ms")),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===k.EXPONENTIAL&&(this._nextReconnectDelay=2*this._nextReconnectDelay,0!==this.maxReconnectDelay&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).force||!1,t=this.active;let n;if(this.state===N.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(N.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),!this._stompHandler||this.webSocket.readyState===w.CLOSED)return this._changeState(N.INACTIVE),Promise.resolve();{const e=this._stompHandler.onWebSocketClose;n=new Promise((t,n)=>{this._stompHandler.onWebSocketClose=n=>{e(n),t()}})}var r;e?null===(r=this._stompHandler)||void 0===r||r.discardWebsocket():t&&this._disposeStompHandler();return n}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(e){this._checkConnection(),this._stompHandler.publish(e)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(e,t){this._checkConnection(),this._stompHandler.watchForReceipt(e,t)}subscribe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._checkConnection(),this._stompHandler.subscribe(e,t,n)}unsubscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkConnection(),this._stompHandler.unsubscribe(e,t)}begin(e){return this._checkConnection(),this._stompHandler.begin(e)}commit(e){this._checkConnection(),this._stompHandler.commit(e)}abort(e){this._checkConnection(),this._stompHandler.abort(e)}ack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkConnection(),this._stompHandler.ack(e,t,n)}nack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkConnection(),this._stompHandler.nack(e,t,n)}}let A=null;const T=[],I=[];function R(){return A||(console.log("\ud83d\udd0c Creating new WebSocket client..."),A=new E({brokerURL:void 0,webSocketFactory:()=>new(g())("https://unpessimistically-unbewailed-christy.ngrok-free.dev/api/ws"),reconnectDelay:5e3,heartbeatIncoming:4e3,heartbeatOutgoing:4e3,debug:e=>{},onConnect:()=>{for(console.log("\u2705 WebSocket CONNECTED");T.length;){const t=T.shift();try{A.publish({destination:t.destination,body:JSON.stringify(t.body)})}catch(e){console.error("Failed to flush pending message",e)}}for(;I.length;){const t=I.shift();try{t()}catch(e){console.error("Error in connect callback:",e)}}},onStompError:e=>{console.error("\u274c STOMP error:",e.headers.message),console.error("Details:",e.body)},onWebSocketClose:()=>{console.warn("\u26a0\ufe0f WebSocket connection closed")},onWebSocketError:e=>{console.error("\u274c WebSocket error:",e)}}),A)}function O(e,t){const n=R();return n.connected?(console.log("\u2705 Already connected"),e&&e(),n):(e&&I.push(e),n.active?console.log("\u23f3 WebSocket connection in progress..."):(console.log("\ud83d\ude80 Activating WebSocket connection..."),n.activate()),n)}function P(e,t){const n=R();return n.connected?(console.log("\u2705 Subscribing to:",e),n.subscribe(e,t)):(console.warn("\u26a0\ufe0f WebSocket not connected yet. Waiting for connection before subscribe:",e),O(()=>{n&&n.connected&&(console.log("\u2705 Now subscribing to:",e),n.subscribe(e,t))}),null)}function L(e,t){if(!A||!A.connected)return T.push({destination:e,body:t}),void O();A.publish({destination:e,body:JSON.stringify(t)})}var U=n(3190);const D=e=>{const t=e.replace(/\D/g,"");return 10===t.length?t.replace(/(\d{4})(\d{3})(\d{3})/,"$1 $2 $3"):e},F=async e=>{try{if(!e||"undefined"===e)return console.error("Invalid addresseeId:",e),alert("Kh\xf4ng th\u1ec3 g\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n: Th\xf4ng tin ng\u01b0\u1eddi d\xf9ng kh\xf4ng h\u1ee3p l\u1ec7"),!1;const t=(0,h.ug)();if(!t||!t.id)return console.error("No current user or user ID found"),!1;const n=t.id,r=(0,h.gf)();if(!r)throw new Error("No authentication token found");console.log("Sending friend request:",{requesterId:n,addresseeId:e});const a=await fetch("".concat(s.J,"/friendships/send?requesterId=").concat(encodeURIComponent(n),"&addresseeId=").concat(encodeURIComponent(e)),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});if(!a.ok){const e=await a.text();return console.error("Send friend request failed: HTTP ".concat(a.status,": ").concat(e)),!1}return console.log("Friend request sent successfully"),!0}catch(t){return console.error("Send friend request error:",t),!1}},z=async(e,t)=>{try{const n=(0,h.gf)();if(!n)throw new Error("No authentication token found");console.log("Responding to friend request:",{friendshipId:e,action:t}),console.log("Full API URL:","".concat(s.J,"/friendships/").concat(encodeURIComponent(e),"/respond?action=").concat(t));const r=await fetch("".concat(s.J,"/friendships/").concat(encodeURIComponent(e),"/respond?action=").concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});if(console.log("Response status:",r.status),console.log("Response headers:",Object.fromEntries(r.headers.entries())),!r.ok){const e=await r.text();return console.error("Friend request response failed: HTTP ".concat(r.status,": ").concat(e)),alert("L\u1ed7i ".concat(r.status,": ").concat(e)),!1}return console.log("Friend request ".concat(t,"ed successfully")),alert("".concat("accept"===t?"\u0110\xe3 ch\u1ea5p nh\u1eadn":"\u0110\xe3 t\u1eeb ch\u1ed1i"," l\u1eddi m\u1eddi k\u1ebft b\u1ea1n!")),!0}catch(n){return console.error("Respond to friend request error:",n),!1}},M=async()=>{try{const e=(0,h.ug)();if(!e||!e.id)return console.error("No current user or user ID found"),[];const t=(0,h.gf)();if(!t)throw new Error("No authentication token found");const n=e.id;console.log("Getting friends list for user:",n);const r=await fetch("".concat(s.J,"/friendships/").concat(encodeURIComponent(n),"/friends"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!r.ok){if(404===r.status)return[];throw new Error("HTTP ".concat(r.status,": ").concat(await r.text()))}const a=await r.json();console.log("Friends list API response:",a);const o=a.map(e=>({id:e.idUser,userId:e.idUser,firstName:e.firstName,lastName:e.lastName,email:e.email,phoneNumber:e.phoneNumber,avatar:e.avatar||"",age:(e=>{const t=new Date(e),n=new Date;let r=n.getFullYear()-t.getFullYear();const a=n.getMonth()-t.getMonth();return(a<0||0===a&&n.getDate()<t.getDate())&&r--,r})(e.dateOfBirth),gender:e.gender?"Nam":"N\u1eef",status:e.status?"online":"offline"}));return console.log("Transformed friends list:",o),o}catch(e){return console.error("Get friends list error:",e),[]}};var B=n(684);const V=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},W=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var H={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const q=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],J=(0,t.forwardRef)((e,n)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d}=e,h=(0,o.A)(e,q);return(0,t.createElement)("svg",(0,i.A)((0,i.A)((0,i.A)({ref:n},H),{},{width:a,height:a,stroke:r,strokeWidth:l?24*Number(s)/Number(a):s,className:W("lucide",c)},!u&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map(e=>{let[n,r]=e;return(0,t.createElement)(n,r)}),...Array.isArray(u)?u:[u]])}),K=["className"],G=(e,n)=>{const r=(0,t.forwardRef)((r,a)=>{let{className:s}=r,l=(0,o.A)(r,K);return(0,t.createElement)(J,(0,i.A)({ref:a,iconNode:n,className:W("lucide-".concat((c=V(e),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},l));var c});return r.displayName=V(e),r},$=G("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Q=G("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),X=G("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Y=()=>{const e=(0,a.Zp)(),[n,r]=(0,t.useState)([]),[o,i]=(0,t.useState)([]),[l,u]=(0,t.useState)(""),[d,m]=(0,t.useState)([]),[f,p]=(0,t.useState)("friends"),[g,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)(""),x=[{key:"friends",label:"Trang ch\u1ee7",description:"T\u1ea5t c\u1ea3 b\u1ea1n b\xe8 v\xe0 c\u1eadp nh\u1eadt g\u1ea7n \u0111\xe2y",icon:$,badge:n.length||void 0},{key:"requests",label:"L\u1eddi m\u1eddi k\u1ebft b\u1ea1n",description:"Xem v\xe0 qu\u1ea3n l\xfd l\u1eddi m\u1eddi \u0111ang ch\u1edd",icon:Q,badge:o.length||void 0},{key:"search",label:"T\xecm b\u1ea1n b\xe8",description:"Tra c\u1ee9u b\u1eb1ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",icon:X}],w={friends:"".concat(n.length," ng\u01b0\u1eddi b\u1ea1n \u0111\xe3 k\u1ebft n\u1ed1i"),requests:o.length?"".concat(o.length," l\u1eddi m\u1eddi \u0111ang ch\u1edd"):"Kh\xf4ng c\xf3 l\u1eddi m\u1eddi m\u1edbi",search:"Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u1ec3 t\xecm b\u1ea1n m\u1edbi"},N=e=>{if(!e)return"M\u1edbi \u0111\xe2y";try{return new Date(e).toLocaleDateString("vi-VN",{day:"numeric",month:"long",year:"numeric"})}catch(t){return"M\u1edbi \u0111\xe2y"}};(0,t.useEffect)(()=>{var e;(async()=>{await k(),await S()})();const t=null===(e=(0,h.ug)())||void 0===e?void 0:e.id;O(()=>{t&&(P("/topic/conversations/".concat(t),e=>{try{const t=JSON.parse(e.body);console.log("New conversation notification:",t)}catch(t){console.error(t)}}),P("/topic/friend-requests/".concat(t),e=>{try{const t=JSON.parse(e.body);console.log("Friend request notification:",t),"UNFRIENDED"===t.status?(r(e=>e.filter(e=>e.id!==t.userId)),console.log("Friend removed via WebSocket:",t.userId)):S()}catch(t){console.error(t)}}))})},[]);const k=async()=>{try{v(!0);const e=(await M()).map(e=>({id:e.userId||e.id,username:e.email,firstName:e.firstName,lastName:e.lastName,avatar:e.avatar,status:e.status||"offline"}));r(e),console.log("Loaded real friends:",e)}catch(e){console.error("Failed to load friends:",e),r([])}finally{v(!1)}},S=async()=>{try{v(!0);const e=await(async()=>{try{const e=(0,h.ug)();if(!e||!e.id)return console.error("No current user or user ID found"),[];const t=(0,h.gf)();if(!t)throw new Error("No authentication token found");const n=e.id,r=await fetch("".concat(s.J,"/friendships/").concat(encodeURIComponent(n),"/pending"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!r.ok){if(404===r.status)return[];throw new Error("HTTP ".concat(r.status,": ").concat(await r.text()))}return await r.json()||[]}catch(e){return console.error("Get pending friendships error:",e),[]}})(),t=e=>{if(!e)return(new Date).toISOString();if("string"===typeof e)return e;if(Array.isArray(e)&&e.length>=3)try{const[t,n,r,a=0,o=0,i=0]=e;return new Date(t,n-1,r,a,o,i).toISOString()}catch(t){return(new Date).toISOString()}return(new Date).toISOString()},n=e.filter(e=>e&&"string"===typeof e.requesterId).map(e=>e.requesterId),r=Array.from(new Set(n)),a={};if(r.length>0){(await Promise.allSettled(r.map(e=>(0,B.kl)(e)))).forEach((e,t)=>{const n=r[t];"fulfilled"===e.status&&e.value?a[n]=e.value:a[n]=null})}const o=e.filter(e=>e&&e.requesterId).map(e=>{const n=e.requesterId,r="string"===typeof n?a[n]:n;return{id:e.id,userId:r&&(r.id||r.idUser)||("string"===typeof n?n:""),username:r&&(r.username||r.email)||"",firstName:r&&r.firstName||"",lastName:r&&r.lastName||"",avatar:r&&r.avatar||"",requestDate:t(e.createdAt||e.createdAt)}});i(o),console.log("Loaded friend requests (raw):",o)}catch(e){console.error("Failed to load friend requests:",e),i([])}finally{v(!1)}},j=async e=>{if(u(e),y(""),""!==e.trim()){if(t=e.trim(),!/^(0|\+84)[3-9][0-9]{8}$/.test(t.replace(/\s/g,"")))return y("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i h\u1ee3p l\u1ec7 (VD: 0787792236)"),void m([]);var t;v(!0);try{const t=await(async e=>{try{if(!e||""===e.trim())return null;const t=(0,h.gf)();if(!t)throw new Error("No authentication token found");const n=await fetch("".concat(s.J,"/friendships/search?phone=").concat(encodeURIComponent(e.trim())),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!n.ok){if(404===n.status)return null;throw new Error("HTTP ".concat(n.status,": ").concat(await n.text()))}const r=await n.json();console.log("API response userData:",r);const a=e=>{let t;if("string"===typeof e)console.log("\ud83d\udcc5 Calculating age from string:",e),t=new Date(e);else{const[n,r,a]=e;console.log("\ud83d\udcc5 Calculating age from array:",{year:n,month:r,day:a}),t=new Date(n,r-1,a)}const n=new Date;let r=n.getFullYear()-t.getFullYear();const a=n.getMonth()-t.getMonth();return(a<0||0===a&&n.getDate()<t.getDate())&&r--,console.log("\ud83c\udf82 Calculated age:",r,"(Birth:",t.toLocaleDateString(),")"),r},o={id:r.idUser||r.email,userId:r.idUser,firstName:r.firstName,lastName:r.lastName,email:r.email,phoneNumber:r.phoneNumber,avatar:r.avatar||"",age:a(r.dateOfBirth),gender:r.gender?"Nam":"N\u1eef",status:"offline"};return console.log("Transformed searchResult:",o),console.log("Search result:",o),o}catch(t){throw console.error("Search user by phone error:",t),t}})(e.trim());t?(m([t]),y("")):(m([]),y("Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi d\xf9ng v\u1edbi s\u1ed1 \u0111i\u1ec7n tho\u1ea1i n\xe0y"))}catch(n){console.error("Search error:",n),m([]),y("C\xf3 l\u1ed7i x\u1ea3y ra khi t\xecm ki\u1ebfm. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{v(!1)}}else m([])},C=async t=>{try{console.log("Ch\u1ea5p nh\u1eadn l\u1eddi m\u1eddi k\u1ebft b\u1ea1n:",t);const r=await(async e=>await z(e,"accept"))(t);if(r){i(e=>e.filter(e=>e.id!==t)),alert("\u0110\xe3 ch\u1ea5p nh\u1eadn l\u1eddi m\u1eddi k\u1ebft b\u1ea1n!");const r=(0,h.ug)(),a=o.find(e=>e.id===t);if(null!==r&&void 0!==r&&r.id&&null!==a&&void 0!==a&&a.userId)try{const t=await(0,U.C6)(r.id,a.userId);console.log("Conversation ensured:",t),e("/chat")}catch(n){console.error("Ensure conversation failed",n)}}else alert("Kh\xf4ng th\u1ec3 ch\u1ea5p nh\u1eadn l\u1eddi m\u1eddi k\u1ebft b\u1ea1n. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(r){console.error("Error accepting friend request:",r),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi ch\u1ea5p nh\u1eadn l\u1eddi m\u1eddi k\u1ebft b\u1ea1n.")}},_=async e=>{try{console.log("T\u1eeb ch\u1ed1i l\u1eddi m\u1eddi k\u1ebft b\u1ea1n:",e);const t=await(async e=>await z(e,"reject"))(e);t?(i(t=>t.filter(t=>t.id!==e)),alert("\u0110\xe3 t\u1eeb ch\u1ed1i l\u1eddi m\u1eddi k\u1ebft b\u1ea1n.")):alert("Kh\xf4ng th\u1ec3 t\u1eeb ch\u1ed1i l\u1eddi m\u1eddi k\u1ebft b\u1ea1n. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(t){console.error("Error rejecting friend request:",t),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi t\u1eeb ch\u1ed1i l\u1eddi m\u1eddi k\u1ebft b\u1ea1n.")}},E=async e=>{const t=n.find(t=>t.id===e),a=t?"".concat(t.firstName," ").concat(t.lastName):"b\u1ea1n b\xe8 n\xe0y";if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n h\u1ee7y k\u1ebft b\u1ea1n v\u1edbi ".concat(a,"?")))try{v(!0),await(async e=>{try{const t=(0,h.ug)();if(!t||!t.id)throw new Error("Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin ng\u01b0\u1eddi d\xf9ng");const n=(0,h.gf)();if(!n)throw new Error("Kh\xf4ng t\xecm th\u1ea5y token x\xe1c th\u1ef1c");const r=await fetch("".concat(s.J,"/friendships/unfriend?userId=").concat(encodeURIComponent(t.id),"&friendId=").concat(encodeURIComponent(e)),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});if(!r.ok){const e=await r.json();throw new Error(e.error||"Kh\xf4ng th\u1ec3 h\u1ee7y k\u1ebft b\u1ea1n")}return console.log("Unfriend successful for friend:",e),!0}catch(t){throw console.error("Unfriend error:",t),t}})(e),r(t=>t.filter(t=>t.id!==e)),alert("\u0110\xe3 h\u1ee7y k\u1ebft b\u1ea1n th\xe0nh c\xf4ng!")}catch(o){console.error("Unfriend error:",o),alert(o.message||"Kh\xf4ng th\u1ec3 h\u1ee7y k\u1ebft b\u1ea1n. Vui l\xf2ng th\u1eed l\u1ea1i!")}finally{v(!1)}},A=e=>{switch(e){case"online":return"\u0110ang ho\u1ea1t \u0111\u1ed9ng";case"busy":return"B\u1eadn";case"offline":return"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng";default:return"Kh\xf4ng x\xe1c \u0111\u1ecbnh"}};return(0,c.jsx)("div",{className:"friends-page",children:(0,c.jsxs)("div",{className:"friends-page__container",children:[(0,c.jsxs)("aside",{className:"friends-sidebar",children:[(0,c.jsxs)("div",{className:"friends-sidebar__header",children:[(0,c.jsx)("h1",{children:"B\u1ea1n b\xe8"}),(0,c.jsx)("p",{children:"Qu\u1ea3n l\xfd k\u1ebft n\u1ed1i v\xe0 kh\xe1m ph\xe1 b\u1ea1n m\u1edbi"})]}),(0,c.jsx)("nav",{className:"friends-sidebar__nav","aria-label":"Danh m\u1ee5c b\u1ea1n b\xe8",children:x.map(e=>{const t=e.icon;return(0,c.jsxs)("button",{type:"button",className:"friends-sidebar__item".concat(f===e.key?" active":""),onClick:()=>p(e.key),children:[(0,c.jsx)("span",{className:"friends-sidebar__item-icon",children:(0,c.jsx)(t,{size:20,strokeWidth:1.6})}),(0,c.jsxs)("span",{className:"friends-sidebar__item-text",children:[(0,c.jsx)("span",{className:"friends-sidebar__item-label",children:e.label}),(0,c.jsx)("span",{className:"friends-sidebar__item-description",children:e.description})]}),e.badge?(0,c.jsx)("span",{className:"friends-sidebar__item-badge",children:e.badge}):null]},e.key)})}),(0,c.jsx)("div",{className:"friends-sidebar__note",children:(0,c.jsx)("p",{children:"Gi\u1eef li\xean l\u1ea1c v\u1edbi b\u1ea1n b\xe8 v\xe0 ki\u1ec3m so\xe1t l\u1eddi m\u1eddi k\u1ebft b\u1ea1n \u1edf m\u1ed9t n\u01a1i."})})]}),(0,c.jsxs)("main",{className:"friends-main",children:[(0,c.jsxs)("header",{className:"friends-main__header",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:{friends:"T\u1ea5t c\u1ea3 b\u1ea1n b\xe8",requests:"L\u1eddi m\u1eddi k\u1ebft b\u1ea1n",search:"T\xecm ki\u1ebfm b\u1ea1n b\xe8"}[f]}),(0,c.jsx)("p",{children:w[f]})]}),"friends"===f&&(0,c.jsxs)("button",{type:"button",className:"friends-button friends-button--surface",onClick:()=>p("search"),children:[(0,c.jsx)(X,{size:16,strokeWidth:1.6}),(0,c.jsx)("span",{children:"T\xecm b\u1ea1n b\xe8"})]})]}),"friends"===f&&(0,c.jsx)("section",{className:"friends-section","aria-label":"Danh s\xe1ch b\u1ea1n b\xe8",children:0===n.length?(0,c.jsxs)("div",{className:"friends-empty",children:[(0,c.jsx)("p",{children:"Ch\u01b0a c\xf3 k\u1ebft n\u1ed1i n\xe0o. H\xe3y t\xecm v\xe0 th\xeam b\u1ea1n b\xe8 m\u1edbi."}),(0,c.jsx)("button",{type:"button",className:"friends-button friends-button--primary",onClick:()=>p("search"),children:"T\xecm b\u1ea1n b\xe8 m\u1edbi"})]}):(0,c.jsx)("div",{className:"friends-grid",children:n.map(t=>{var n,r;return(0,c.jsxs)("article",{className:"friend-card",children:[(0,c.jsx)(a.k2,{to:"/user/".concat(t.id),className:"result-card__author",style:{textDecoration:"none",color:"inherit"},children:(0,c.jsxs)("div",{className:"friend-card__avatar","aria-hidden":"true",children:[t.avatar?(0,c.jsx)("img",{src:t.avatar,alt:t.username}):(0,c.jsxs)("span",{children:[((null===(n=t.firstName)||void 0===n?void 0:n.charAt(0))||"").toUpperCase(),((null===(r=t.lastName)||void 0===r?void 0:r.charAt(0))||"").toUpperCase()]}),(0,c.jsx)("span",{className:"status-dot status-dot--".concat(t.status)})]})}),(0,c.jsxs)("div",{className:"friend-card__body",children:[(0,c.jsx)("h3",{children:"".concat(t.firstName," ").concat(t.lastName).trim()}),(0,c.jsx)("span",{className:"friend-card__username",children:t.username}),(0,c.jsxs)("span",{className:"friend-card__status",children:[A(t.status),t.lastSeen?" \xb7 ".concat(t.lastSeen):""]})]}),(0,c.jsxs)("div",{className:"friend-card__actions",children:[(0,c.jsx)("button",{type:"button",className:"friends-button friends-button--surface",onClick:()=>(async t=>{try{const n=(0,h.ug)();if(null===n||void 0===n||!n.id)return alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i");await(0,U.C6)(n.id,t),e("/chat")}catch(n){console.error("M\u1edf chat th\u1ea5t b\u1ea1i",n),alert("Kh\xf4ng th\u1ec3 m\u1edf chat, vui l\xf2ng th\u1eed l\u1ea1i.")}})(t.id),children:"Nh\u1eafn tin"}),(0,c.jsx)("button",{type:"button",className:"friends-button friends-button--danger",onClick:()=>E(t.id),children:"H\u1ee7y k\u1ebft b\u1ea1n"})]})]},t.id)})})}),"requests"===f&&(0,c.jsx)("section",{className:"friends-section","aria-label":"L\u1eddi m\u1eddi k\u1ebft b\u1ea1n",children:0===o.length?(0,c.jsx)("div",{className:"friends-empty",children:(0,c.jsx)("p",{children:"Kh\xf4ng c\xf3 l\u1eddi m\u1eddi k\u1ebft b\u1ea1n n\xe0o ngay l\xfac n\xe0y."})}):(0,c.jsx)("div",{className:"requests-grid",children:o.map(e=>{var t,n;return(0,c.jsxs)("article",{className:"request-card",children:[(0,c.jsx)(a.k2,{to:"/user/".concat(e.userId),className:"result-card__author",style:{textDecoration:"none",color:"inherit"},children:(0,c.jsx)("div",{className:"request-card__avatar","aria-hidden":"true",children:e.avatar?(0,c.jsx)("img",{src:e.avatar,alt:e.username}):(0,c.jsxs)("span",{children:[((null===(t=e.firstName)||void 0===t?void 0:t.charAt(0))||"").toUpperCase(),((null===(n=e.lastName)||void 0===n?void 0:n.charAt(0))||"").toUpperCase()]})})}),(0,c.jsxs)("div",{className:"request-card__body",children:[(0,c.jsx)("h3",{children:"".concat(e.firstName," ").concat(e.lastName).trim()}),(0,c.jsx)("span",{className:"request-card__username",children:e.username}),(0,c.jsxs)("span",{className:"request-card__date",children:["G\u1eedi ",N(e.requestDate)]})]}),(0,c.jsxs)("div",{className:"request-card__actions",children:[(0,c.jsx)("button",{type:"button",className:"friends-button friends-button--primary",onClick:()=>C(e.id),children:"Ch\u1ea5p nh\u1eadn"}),(0,c.jsx)("button",{type:"button",className:"friends-button friends-button--surface",onClick:()=>_(e.id),children:"T\u1eeb ch\u1ed1i"})]})]},e.id)})})}),"search"===f&&(0,c.jsxs)("section",{className:"friends-section friends-section--search","aria-label":"T\xecm ki\u1ebfm b\u1ea1n b\xe8",children:[(0,c.jsx)("div",{className:"search-panel",children:(0,c.jsxs)("div",{className:"search-panel__field",children:[(0,c.jsx)("label",{htmlFor:"friend-search",className:"search-panel__label",children:"T\xecm ki\u1ebfm b\u1eb1ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,c.jsxs)("div",{className:"search-panel__input",children:[(0,c.jsx)(X,{size:18,strokeWidth:1.6}),(0,c.jsx)("input",{id:"friend-search",type:"text",placeholder:"Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i (VD: 0787792236)",value:l,onChange:e=>j(e.target.value)})]})]})}),b&&(0,c.jsx)("div",{className:"friends-alert friends-alert--error",children:b}),g&&(0,c.jsx)("div",{className:"friends-loading",children:"\u0110ang t\xecm ki\u1ebfm..."}),!g&&l&&(0,c.jsxs)("div",{className:"search-results",children:[(0,c.jsxs)("h4",{children:["K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm (",d.length,")"]}),0===d.length?(0,c.jsx)("div",{className:"friends-empty",children:(0,c.jsx)("p",{children:"Kh\xf4ng t\xecm th\u1ea5y k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p."})}):(0,c.jsx)("div",{className:"results-grid",children:d.map(e=>{var t,n;return(0,c.jsxs)("article",{className:"result-card",children:[(0,c.jsx)(a.k2,{to:"/user/".concat(e.id),className:"result-card__author",style:{textDecoration:"none",color:"inherit"},children:(0,c.jsx)("div",{className:"result-card__avatar","aria-hidden":"true",children:e.avatar?(0,c.jsx)("img",{src:e.avatar,alt:"".concat(e.firstName," ").concat(e.lastName)}):(0,c.jsxs)("span",{children:[((null===(t=e.firstName)||void 0===t?void 0:t.charAt(0))||"").toUpperCase(),((null===(n=e.lastName)||void 0===n?void 0:n.charAt(0))||"").toUpperCase()]})})}),(0,c.jsxs)("div",{className:"result-card__body",children:[(0,c.jsx)("h3",{children:"".concat(e.firstName," ").concat(e.lastName).trim()}),(0,c.jsx)("span",{className:"result-card__meta",children:D(e.phoneNumber)}),(0,c.jsxs)("span",{className:"result-card__details",children:[e.age," tu\u1ed5i \xb7 ",e.gender]})]}),(0,c.jsx)("div",{className:"result-card__actions",children:(0,c.jsx)("button",{type:"button",className:"friends-button friends-button--primary",onClick:()=>(async e=>{try{console.log("G\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n \u0111\u1ebfn:",e),await F(e)?alert("\u0110\xe3 g\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n th\xe0nh c\xf4ng!"):alert("Kh\xf4ng th\u1ec3 g\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(t){console.error("Error sending friend request:",t),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n.")}})(e.userId||e.id),disabled:!e.userId,title:e.userId?"G\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n":"Kh\xf4ng th\u1ec3 k\u1ebft b\u1ea1n: Thi\u1ebfu th\xf4ng tin user ID",children:e.userId?"K\u1ebft b\u1ea1n":"Kh\xf4ng c\xf3 ID"})})]},e.id)})})]}),!l&&!g&&!b&&(0,c.jsxs)("div",{className:"friends-hint",children:[(0,c.jsx)("p",{children:"Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u1ec3 t\xecm ki\u1ebfm b\u1ea1n b\xe8 m\u1edbi v\xe0 g\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n."}),(0,c.jsx)("span",{children:"V\xed d\u1ee5: 0787792236 ho\u1eb7c +84787792236"})]})]})]})]})})};async function Z(e){const t=(0,h.gf)(),n=await fetch("".concat(s.J,"/video-call/").concat(e,"/end"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error(await n.text())}class ee{constructor(e){this.peerConnection=null,this.lastAnswerHash=null,this.localStream=null,this.remoteStream=null,this.callId=null,this.userId=null,this.remoteUserId=null,this.pendingOffer=null,this.pendingIceCandidates=[],this.iceServers={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:["turn:openrelay.metered.ca:80","turn:openrelay.metered.ca:443","turn:openrelay.metered.ca:443?transport=tcp"],username:"openrelayproject",credential:"openrelayproject"}]},this.handleRemoteTrack=e=>{var t;const n=e.track;if(console.log("\ud83c\udfac ontrack event received track:",{kind:n.kind,id:n.id,readyState:n.readyState,muted:n.muted,streams:null===(t=e.streams)||void 0===t?void 0:t.length}),e.streams&&e.streams[0])this.remoteStream=e.streams[0];else{this.remoteStream||(this.remoteStream=new MediaStream);this.remoteStream.getTracks().some(e=>e.id===n.id)||this.remoteStream.addTrack(n)}if("video"===n.kind){const e=e=>{var t;null===(t=this.onRemoteVideoStatusChanged)||void 0===t||t.call(this,e)};e(!n.muted&&"ended"!==n.readyState),n.onmute=()=>e(!1),n.onunmute=()=>e(!0),n.onended=()=>e(!1)}if("audio"===n.kind){const e=e=>{var t;null===(t=this.onRemoteAudioStatusChanged)||void 0===t||t.call(this,e)};e(!n.muted&&"ended"!==n.readyState),n.onmute=()=>e(!1),n.onunmute=()=>e(!0),n.onended=()=>e(!1)}var r;this.remoteStream&&(null===(r=this.onRemoteStreamReceived)||void 0===r||r.call(this,this.remoteStream))},this.onLocalStreamReceived=void 0,this.onRemoteStreamReceived=void 0,this.onRemoteVideoStatusChanged=void 0,this.onRemoteAudioStatusChanged=void 0,this.onCallConnected=void 0,this.onCallDisconnected=void 0,this.onCallEnded=void 0,this.onError=void 0,this.userId=e}simpleHash(e){let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n),t&=4294967295;return(t>>>0).toString(16)}async initializeConnection(e,t){this.callId=e,this.remoteUserId=t,this.peerConnection=new RTCPeerConnection(this.iceServers),this.peerConnection.onicecandidate=e=>{e.candidate&&this.callId&&this.remoteUserId&&this.sendSignal({callId:this.callId,fromUserId:this.userId,toUserId:this.remoteUserId,type:"ICE_CANDIDATE",data:e.candidate})},this.peerConnection.ontrack=this.handleRemoteTrack,this.peerConnection.onconnectionstatechange=()=>{var e,t,n,r;if(console.log("Connection state:",null===(e=this.peerConnection)||void 0===e?void 0:e.connectionState),"connected"===(null===(t=this.peerConnection)||void 0===t?void 0:t.connectionState))null===(r=this.onCallConnected)||void 0===r||r.call(this);else if("disconnected"===(null===(n=this.peerConnection)||void 0===n?void 0:n.connectionState)){var a;null===(a=this.onCallDisconnected)||void 0===a||a.call(this)}}}async startCall(){try{var e;if(console.log("\ud83c\udfa5 Requesting user media..."),this.localStream=await this.acquireMediaWithFallback("caller"),console.log("\u2705 User media obtained:",this.localStream),null===(e=this.onLocalStreamReceived)||void 0===e||e.call(this,this.localStream),this.peerConnection&&this.localStream){this.localStream.getTracks().forEach(e=>{this.peerConnection.addTrack(e,this.localStream)});const e=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(e),this.callId&&this.remoteUserId&&this.sendSignal({callId:this.callId,fromUserId:this.userId,toUserId:this.remoteUserId,type:"CALL_OFFER",data:e})}}catch(n){var t;throw console.error("\u274c Error starting call:",n),n instanceof DOMException&&("NotAllowedError"===n.name?console.error("\u274c Camera/microphone access denied"):"NotFoundError"===n.name&&console.error("\u274c Camera/microphone not found")),null===(t=this.onError)||void 0===t||t.call(this,n),n}}async answerCall(){try{var e;if(console.log("\ud83c\udfa5 Answering call - requesting user media..."),this.localStream=await this.acquireMediaWithFallback("callee"),console.log("\u2705 User media obtained for answer:",this.localStream),null===(e=this.onLocalStreamReceived)||void 0===e||e.call(this,this.localStream),this.peerConnection&&this.localStream&&(this.localStream.getTracks().forEach(e=>{this.peerConnection.addTrack(e,this.localStream)}),this.pendingOffer)){console.log("\ud83d\udce6 Processing buffered offer now that local media is ready"),await this.peerConnection.setRemoteDescription(this.pendingOffer);const e=await this.peerConnection.createAnswer();if(await this.peerConnection.setLocalDescription(e),this.callId&&this.remoteUserId&&this.sendSignal({callId:this.callId,fromUserId:this.userId,toUserId:this.remoteUserId,type:"CALL_ANSWER",data:e}),this.pendingIceCandidates.length>0){console.log("\ud83e\uddca Adding buffered ICE candidates:",this.pendingIceCandidates.length);for(const e of this.pendingIceCandidates)try{await this.peerConnection.addIceCandidate(e)}catch(n){console.warn("Failed to add buffered ICE",n)}this.pendingIceCandidates=[]}this.pendingOffer=null}}catch(r){var t;console.error("Error answering call:",r),null===(t=this.onError)||void 0===t||t.call(this,r)}}async acquireMediaWithFallback(e){var t;const n=[{video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}},audio:!0},{video:{width:{ideal:640},height:{ideal:360},frameRate:{ideal:24}},audio:!0},{video:!0,audio:!0},{audio:!0}];let r=null;for(let s=0;s<n.length;s++){const t=n[s];try{console.log("\ud83c\udf9b\ufe0f getUserMedia attempt ".concat(s+1,"/").concat(n.length," (").concat(e,") constraints:"),t);const a=await navigator.mediaDevices.getUserMedia(t);if(t.video&&0===a.getVideoTracks().length){console.warn("\u26a0\ufe0f No video tracks despite video constraint, trying next fallback"),r=new Error("No video track returned");continue}return console.log("\u2705 Media acquired with constraint index",s),a}catch(i){if(r=i,console.warn("\u274c getUserMedia failed (attempt ".concat(s+1,")"),(null===i||void 0===i?void 0:i.name)||i),i&&("NotAllowedError"===i.name||"SecurityError"===i.name))break;if(i&&"NotReadableError"===i.name)continue}}let a="Kh\xf4ng th\u1ec3 truy c\u1eadp thi\u1ebft b\u1ecb media.";if(r)switch(r.name){case"NotAllowedError":a="B\u1ea1n \u0111\xe3 ch\u1eb7n quy\u1ec1n camera/micro. H\xe3y m\u1edf l\u1ea1i quy\u1ec1n trong tr\xecnh duy\u1ec7t r\u1ed3i th\u1eed l\u1ea1i.";break;case"NotFoundError":a="Kh\xf4ng t\xecm th\u1ea5y camera ho\u1eb7c micro. Ki\u1ec3m tra k\u1ebft n\u1ed1i thi\u1ebft b\u1ecb.";break;case"NotReadableError":a="Thi\u1ebft b\u1ecb \u0111ang b\u1ecb \u1ee9ng d\u1ee5ng kh\xe1c s\u1eed d\u1ee5ng (v\xed d\u1ee5: Zoom, Teams, tab kh\xe1c). \u0110\xf3ng c\xe1c \u1ee9ng d\u1ee5ng \u0111\xf3 r\u1ed3i th\u1eed l\u1ea1i.";break;case"OverconstrainedError":a="Camera kh\xf4ng \u0111\xe1p \u1ee9ng \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh y\xeau c\u1ea7u. \u0110ang d\xf9ng thi\u1ebft l\u1eadp qu\xe1 cao.";break;default:a="L\u1ed7i media: ".concat(r.name||r.message||r)}const o=new Error(a);throw null===(t=this.onError)||void 0===t||t.call(this,o),o}async handleSignal(e){if(!this.peerConnection){if("CALL_OFFER"!==e.type||e.toUserId!==this.userId)return;console.log("\ud83e\uddea Creating peer connection on first incoming offer (pre-accept)"),this.callId=e.callId,this.remoteUserId=e.fromUserId,this.peerConnection=new RTCPeerConnection(this.iceServers),this.peerConnection.onicecandidate=e=>{e.candidate&&this.callId&&this.remoteUserId&&this.localStream&&this.sendSignal({callId:this.callId,fromUserId:this.userId,toUserId:this.remoteUserId,type:"ICE_CANDIDATE",data:e.candidate})},this.peerConnection.ontrack=this.handleRemoteTrack,this.peerConnection.onconnectionstatechange=()=>{var e,t,n,r;if(console.log("Connection state:",null===(e=this.peerConnection)||void 0===e?void 0:e.connectionState),"connected"===(null===(t=this.peerConnection)||void 0===t?void 0:t.connectionState))null===(r=this.onCallConnected)||void 0===r||r.call(this);else if("disconnected"===(null===(n=this.peerConnection)||void 0===n?void 0:n.connectionState)){var a;null===(a=this.onCallDisconnected)||void 0===a||a.call(this)}}}try{switch(e.type){case"CALL_OFFER":if(this.localStream){console.log("\ud83d\udce8 Received offer & we have local media: answering now"),await this.peerConnection.setRemoteDescription(e.data);const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),this.sendSignal({callId:e.callId,fromUserId:this.userId,toUserId:e.fromUserId,type:"CALL_ANSWER",data:t})}else console.log("\ud83d\udce6 Buffering offer until user accepts / local media ready"),this.pendingOffer=e.data;break;case"CALL_ANSWER":try{const t=this.peerConnection.signalingState,r=e.data&&(e.data.sdp||""),a=r?this.simpleHash(r):null;if(a&&this.lastAnswerHash===a)return void console.warn("\u26a0\ufe0f Ignoring duplicate CALL_ANSWER (same SDP hash)");if("have-local-offer"===t||"have-local-pranswer"===t){if(await this.peerConnection.setRemoteDescription(e.data),a&&(this.lastAnswerHash=a),this.pendingIceCandidates.length>0){console.log("\ud83e\uddca Flushing buffered ICE candidates after answer:",this.pendingIceCandidates.length);for(const e of this.pendingIceCandidates)try{await this.peerConnection.addIceCandidate(e)}catch(n){console.warn("Failed to add buffered ICE",n)}this.pendingIceCandidates=[]}}else console.warn("\u26a0\ufe0f Ignoring CALL_ANSWER because signalingState is",t,"localDesc:",!!this.peerConnection.localDescription,"remoteDesc:",!!this.peerConnection.remoteDescription)}catch(r){console.error("Error applying CALL_ANSWER (ignored):",r)}break;case"ICE_CANDIDATE":this.peerConnection.remoteDescription?await this.peerConnection.addIceCandidate(e.data):(console.log("\ud83e\uddca Buffering ICE candidate until remoteDescription set"),this.pendingIceCandidates.push(e.data));break;case"CALL_END":this.endCall()}}catch(a){var t;console.error("Error handling signal:",a),null===(t=this.onError)||void 0===t||t.call(this,a)}}acceptCall(){this.callId&&this.remoteUserId&&this.sendSignal({callId:this.callId,fromUserId:this.userId,toUserId:this.remoteUserId,type:"CALL_ACCEPT"})}rejectCall(){this.callId&&this.remoteUserId&&this.sendSignal({callId:this.callId,fromUserId:this.userId,toUserId:this.remoteUserId,type:"CALL_REJECT"}),this.cleanup()}endCall(){this.callId&&this.remoteUserId&&this.sendSignal({callId:this.callId,fromUserId:this.userId,toUserId:this.remoteUserId,type:"CALL_END"}),this.cleanup()}toggleMute(){if(this.localStream){const e=this.localStream.getAudioTracks()[0];if(e)return e.enabled=!e.enabled,!e.enabled}return!1}toggleVideo(){if(this.localStream){const e=this.localStream.getVideoTracks()[0];if(e)return e.enabled=!e.enabled,!e.enabled}return!1}sendSignal(e){L("/app/video-call.signal",e)}cleanup(){var e;this.localStream&&(this.localStream.getTracks().forEach(e=>e.stop()),this.localStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.remoteStream=null,this.callId=null,this.remoteUserId=null,null===(e=this.onCallEnded)||void 0===e||e.call(this)}getLocalStream(){return this.localStream}getRemoteStream(){return this.remoteStream}isConnected(){var e;return"connected"===(null===(e=this.peerConnection)||void 0===e?void 0:e.connectionState)}ensureLocalTracksAdded(){if(this.peerConnection||(console.warn("\u26a0\ufe0f peerConnection ch\u01b0a t\u1ea1o \u2014 kh\u1edfi t\u1ea1o m\u1edbi..."),this.peerConnection=new RTCPeerConnection(this.iceServers),this.peerConnection.onicecandidate=e=>{e.candidate&&this.callId&&this.remoteUserId&&this.sendSignal({callId:this.callId,fromUserId:this.userId,toUserId:this.remoteUserId,type:"ICE_CANDIDATE",data:e.candidate})},this.peerConnection.ontrack=this.handleRemoteTrack,this.peerConnection.onconnectionstatechange=()=>{var e,t,n,r;if(console.log("Connection state:",null===(e=this.peerConnection)||void 0===e?void 0:e.connectionState),"connected"===(null===(t=this.peerConnection)||void 0===t?void 0:t.connectionState))null===(r=this.onCallConnected)||void 0===r||r.call(this);else if("disconnected"===(null===(n=this.peerConnection)||void 0===n?void 0:n.connectionState)){var a;null===(a=this.onCallDisconnected)||void 0===a||a.call(this)}}),!this.localStream)return void console.warn("\u26a0\ufe0f Ch\u01b0a c\xf3 localStream \u0111\u1ec3 add track");const e=this.localStream.getTracks();if(0===e.length)return void console.warn("\u26a0\ufe0f localStream kh\xf4ng c\xf3 track n\xe0o \u0111\u1ec3 add");const t=this.peerConnection.getSenders();e.forEach(e=>{const n=t.find(t=>t.track&&t.track.kind===e.kind);if(n){var r;(null===(r=n.track)||void 0===r?void 0:r.id)!==e.id&&(console.log("\ud83d\udd04 Thay th\u1ebf track ".concat(e.kind)),n.replaceTrack(e).catch(t=>{console.warn("replaceTrack(".concat(e.kind,") l\u1ed7i:"),t)}))}else{console.log("\u2795 Th\xeam track ".concat(e.kind));try{this.peerConnection?this.peerConnection.addTrack(e,this.localStream):console.warn("\u274c peerConnection is null, cannot add track")}catch(a){console.error("\u274c addTrack(".concat(e.kind,") l\u1ed7i:"),a)}}})}}const te=e=>{let{call:t,onAccept:n,onReject:r}=e;return(0,c.jsx)("div",{className:"incoming-call-overlay",children:(0,c.jsxs)("div",{className:"incoming-call-modal",children:[(0,c.jsxs)("div",{className:"caller-info",children:[(0,c.jsx)("div",{className:"caller-avatar",children:t.callerAvatar?(0,c.jsx)("img",{src:t.callerAvatar,alt:t.callerName}):(0,c.jsx)("div",{className:"avatar-placeholder",children:t.callerName.charAt(0).toUpperCase()})}),(0,c.jsxs)("div",{className:"caller-details",children:[(0,c.jsx)("h3",{children:t.callerName}),(0,c.jsx)("p",{children:"Cu\u1ed9c g\u1ecdi video \u0111\u1ebfn..."})]})]}),(0,c.jsxs)("div",{className:"call-actions",children:[(0,c.jsxs)("button",{className:"reject-btn",onClick:r,children:[(0,c.jsx)("span",{className:"btn-icon",children:"\ud83d\udcde"}),(0,c.jsx)("span",{children:"T\u1eeb ch\u1ed1i"})]}),(0,c.jsxs)("button",{className:"accept-btn",onClick:n,children:[(0,c.jsx)("span",{className:"btn-icon",children:"\ud83d\udcf9"}),(0,c.jsx)("span",{children:"Ch\u1ea5p nh\u1eadn"})]})]})]})})},ne=e=>{let{isVisible:n,localStream:r,remoteStream:a,friendName:o,friendAvatar:i,isVideoEnabled:s,isAudioEnabled:l,callDuration:u,onToggleVideo:d,onToggleAudio:h,onEndCall:m,onMinimize:f,isMinimized:p=!1}=e;const g=t.useRef(null),v=t.useRef(null),b=t.useRef(null);return t.useEffect(()=>{g.current&&(g.current.srcObject=r&&s?r:null)},[r,s]),t.useEffect(()=>{v.current&&a&&(v.current.srcObject=a,a.onaddtrack=e=>{console.log("\ud83c\udfa5 Remote track added:",e.track.kind),v.current.srcObject=a})},[a]),t.useEffect(()=>{if(!b.current)return;const e=b.current;if(a){e.srcObject=a;const t=()=>{e.play().catch(e=>{console.warn("\u26a0\ufe0f Cannot autoplay remote audio:",e)})};t(),a.onaddtrack=e=>{"audio"===e.track.kind&&(console.log("\ud83c\udfa7 Remote audio added"),t())}}},[a]),n?p?(0,c.jsx)("div",{className:"video-call-minimized",onClick:f,children:(0,c.jsxs)("div",{className:"minimized-content",children:[(0,c.jsx)("div",{className:"minimized-avatar",children:i?(0,c.jsx)("img",{src:i,alt:o}):(0,c.jsx)("div",{className:"avatar-placeholder",children:o.charAt(0).toUpperCase()})}),(0,c.jsxs)("div",{className:"minimized-info",children:[(0,c.jsx)("span",{className:"friend-name",children:o}),(0,c.jsx)("span",{className:"call-duration",children:u})]})]})}):(0,c.jsx)("div",{className:"video-call-overlay",children:(0,c.jsxs)("div",{className:"video-call-container",children:[(0,c.jsxs)("div",{className:"call-header",children:[(0,c.jsxs)("div",{className:"call-info",children:[(0,c.jsx)("span",{className:"friend-name",children:o}),(0,c.jsx)("span",{className:"call-duration",children:u})]}),f&&(0,c.jsx)("button",{className:"minimize-btn",onClick:f,children:"\u2212"})]}),(0,c.jsxs)("div",{className:"video-area",children:[(0,c.jsx)("div",{className:"remote-video-container",children:a?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("video",{ref:v,autoPlay:!0,playsInline:!0,className:"remote-video",style:{width:"85%"}}),(0,c.jsx)("audio",{ref:b,autoPlay:!0,playsInline:!0})]}):(0,c.jsxs)("div",{className:"video-placeholder",children:[i?(0,c.jsx)("img",{src:i,alt:o}):(0,c.jsx)("div",{className:"avatar-placeholder",children:o.charAt(0).toUpperCase()}),(0,c.jsx)("p",{children:"\u0110ang k\u1ebft n\u1ed1i..."})]})}),(0,c.jsx)("div",{className:"local-video-container",children:r&&s?(0,c.jsx)("video",{ref:g,autoPlay:!0,playsInline:!0,muted:!0,className:"local-video"}):(0,c.jsx)("div",{className:"local-video-placeholder",children:(0,c.jsx)("span",{children:"\ud83d\udcf9"})})})]}),(0,c.jsxs)("div",{className:"call-controls",style:{padding:"4px"},children:[(0,c.jsx)("button",{className:"control-btn ".concat(l?"active":"inactive"),onClick:h,title:l?"T\u1eaft mic":"B\u1eadt mic",children:l?"\ud83c\udfa4":"\ud83d\udd07"}),(0,c.jsx)("button",{className:"control-btn ".concat(s?"active":"inactive"),onClick:d,title:s?"T\u1eaft camera":"B\u1eadt camera",children:s?"\ud83d\udcf9":"\ud83d\udcf7"}),(0,c.jsx)("button",{className:"control-btn end-call-btn",onClick:m,title:"K\u1ebft th\xfac",children:"\ud83d\udcde"})]})]})}):null};function re(e,t){return function(){return e.apply(t,arguments)}}const{toString:ae}=Object.prototype,{getPrototypeOf:oe}=Object,{iterator:ie,toStringTag:se}=Symbol,le=(ce=Object.create(null),e=>{const t=ae.call(e);return ce[t]||(ce[t]=t.slice(8,-1).toLowerCase())});var ce;const ue=e=>(e=e.toLowerCase(),t=>le(t)===e),de=e=>t=>typeof t===e,{isArray:he}=Array,me=de("undefined");function fe(e){return null!==e&&!me(e)&&null!==e.constructor&&!me(e.constructor)&&ve(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const pe=ue("ArrayBuffer");const ge=de("string"),ve=de("function"),be=de("number"),ye=e=>null!==e&&"object"===typeof e,xe=e=>{if("object"!==le(e))return!1;const t=oe(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(se in e)&&!(ie in e)},we=ue("Date"),Ne=ue("File"),ke=ue("Blob"),Se=ue("FileList"),je=ue("URLSearchParams"),[Ce,_e,Ee,Ae]=["ReadableStream","Request","Response","Headers"].map(ue);function Te(e,t){let n,r,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),he(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(fe(e))return;const r=a?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let i;for(n=0;n<o;n++)i=r[n],t.call(null,e[i],i,e)}}function Ie(e,t){if(fe(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const Re="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Oe=e=>!me(e)&&e!==Re;const Pe=(Le="undefined"!==typeof Uint8Array&&oe(Uint8Array),e=>Le&&e instanceof Le);var Le;const Ue=ue("HTMLFormElement"),De=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Fe=ue("RegExp"),ze=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Te(n,(n,a)=>{let o;!1!==(o=t(n,a,e))&&(r[a]=o||n)}),Object.defineProperties(e,r)};const Me=ue("AsyncFunction"),Be=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],Re.addEventListener("message",e=>{let{source:t,data:a}=e;t===Re&&a===n&&r.length&&r.shift()()},!1),e=>{r.push(e),Re.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,ve(Re.postMessage)),Ve="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Re):"undefined"!==typeof process&&process.nextTick||Be,We={isArray:he,isArrayBuffer:pe,isBuffer:fe,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||ve(e.append)&&("formdata"===(t=le(e))||"object"===t&&ve(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&pe(e.buffer),t},isString:ge,isNumber:be,isBoolean:e=>!0===e||!1===e,isObject:ye,isPlainObject:xe,isEmptyObject:e=>{if(!ye(e)||fe(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:Ce,isRequest:_e,isResponse:Ee,isHeaders:Ae,isUndefined:me,isDate:we,isFile:Ne,isBlob:ke,isRegExp:Fe,isFunction:ve,isStream:e=>ye(e)&&ve(e.pipe),isURLSearchParams:je,isTypedArray:Pe,isFileList:Se,forEach:Te,merge:function e(){const{caseless:t,skipUndefined:n}=Oe(this)&&this||{},r={},a=(a,o)=>{const i=t&&Ie(r,o)||o;xe(r[i])&&xe(a)?r[i]=e(r[i],a):xe(a)?r[i]=e({},a):he(a)?r[i]=a.slice():n&&me(a)||(r[i]=a)};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&Te(arguments[o],a);return r},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Te(t,(t,r)=>{n&&ve(t)?e[r]=re(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,o,i;const s={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)i=a[o],r&&!r(i,e,t)||s[i]||(t[i]=e[i],s[i]=!0);e=!1!==n&&oe(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:le,kindOfTest:ue,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(he(e))return e;let t=e.length;if(!be(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[ie]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Ue,hasOwnProperty:De,hasOwnProp:De,reduceDescriptors:ze,freezeMethods:e=>{ze(e,(t,n)=>{if(ve(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];ve(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return he(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Ie,global:Re,isContextDefined:Oe,isSpecCompliantForm:function(e){return!!(e&&ve(e.append)&&"FormData"===e[se]&&e[ie])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(ye(e)){if(t.indexOf(e)>=0)return;if(fe(e))return e;if(!("toJSON"in e)){t[r]=e;const a=he(e)?[]:{};return Te(e,(e,t)=>{const o=n(e,r+1);!me(o)&&(a[t]=o)}),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:Me,isThenable:e=>e&&(ye(e)||ve(e))&&ve(e.then)&&ve(e.catch),setImmediate:Be,asap:Ve,isIterable:e=>null!=e&&ve(e[ie])};function He(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}We.inherits(He,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:We.toJSONObject(this.config),code:this.code,status:this.status}}});const qe=He.prototype,Je={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Je[e]={value:e}}),Object.defineProperties(He,Je),Object.defineProperty(qe,"isAxiosError",{value:!0}),He.from=(e,t,n,r,a,o)=>{const i=Object.create(qe);We.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const s=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return He.call(i,s,l,n,r,a),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",o&&Object.assign(i,o),i};const Ke=He;function Ge(e){return We.isPlainObject(e)||We.isArray(e)}function $e(e){return We.endsWith(e,"[]")?e.slice(0,-2):e}function Qe(e,t,n){return e?e.concat(t).map(function(e,t){return e=$e(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Xe=We.toFlatObject(We,{},null,function(e){return/^is[A-Z]/.test(e)});const Ye=function(e,t,n){if(!We.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=We.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!We.isUndefined(t[e])})).metaTokens,a=n.visitor||c,o=n.dots,i=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&We.isSpecCompliantForm(t);if(!We.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(We.isDate(e))return e.toISOString();if(We.isBoolean(e))return e.toString();if(!s&&We.isBlob(e))throw new Ke("Blob is not supported. Use a Buffer instead.");return We.isArrayBuffer(e)||We.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let s=e;if(e&&!a&&"object"===typeof e)if(We.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(We.isArray(e)&&function(e){return We.isArray(e)&&!e.some(Ge)}(e)||(We.isFileList(e)||We.endsWith(n,"[]"))&&(s=We.toArray(e)))return n=$e(n),s.forEach(function(e,r){!We.isUndefined(e)&&null!==e&&t.append(!0===i?Qe([n],r,o):null===i?n:n+"[]",l(e))}),!1;return!!Ge(e)||(t.append(Qe(a,n,o),l(e)),!1)}const u=[],d=Object.assign(Xe,{defaultVisitor:c,convertValue:l,isVisitable:Ge});if(!We.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!We.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),We.forEach(n,function(n,o){!0===(!(We.isUndefined(n)||null===n)&&a.call(t,n,We.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])}),u.pop()}}(e),t};function Ze(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function et(e,t){this._pairs=[],e&&Ye(e,this,t)}const tt=et.prototype;tt.append=function(e,t){this._pairs.push([e,t])},tt.toString=function(e){const t=e?function(t){return e.call(this,t,Ze)}:Ze;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const nt=et;function rt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function at(e,t,n){if(!t)return e;const r=n&&n.encode||rt;We.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(o=a?a(t,n):We.isURLSearchParams(t)?t.toString():new nt(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const ot=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){We.forEach(this.handlers,function(t){null!==t&&e(t)})}},it={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},st={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:nt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},lt="undefined"!==typeof window&&"undefined"!==typeof document,ct="object"===typeof navigator&&navigator||void 0,ut=lt&&(!ct||["ReactNative","NativeScript","NS"].indexOf(ct.product)<0),dt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ht=lt&&window.location.href||"http://localhost",mt=(0,i.A)((0,i.A)({},e),st);const ft=function(e){function t(e,n,r,a){let o=e[a++];if("__proto__"===o)return!0;const i=Number.isFinite(+o),s=a>=e.length;if(o=!o&&We.isArray(r)?r.length:o,s)return We.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!i;r[o]&&We.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],a)&&We.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let o;for(r=0;r<a;r++)o=n[r],t[o]=e[o];return t}(r[o])),!i}if(We.isFormData(e)&&We.isFunction(e.entries)){const n={};return We.forEachEntry(e,(e,r)=>{t(function(e){return We.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const pt={transitional:it,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=We.isObject(e);a&&We.isHTMLForm(e)&&(e=new FormData(e));if(We.isFormData(e))return r?JSON.stringify(ft(e)):e;if(We.isArrayBuffer(e)||We.isBuffer(e)||We.isStream(e)||We.isFile(e)||We.isBlob(e)||We.isReadableStream(e))return e;if(We.isArrayBufferView(e))return e.buffer;if(We.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ye(e,new mt.classes.URLSearchParams,(0,i.A)({visitor:function(e,t,n,r){return mt.isNode&&We.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=We.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ye(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(We.isString(e))try{return(t||JSON.parse)(e),We.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||pt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(We.isResponse(e)||We.isReadableStream(e))return e;if(e&&We.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(a){if(n){if("SyntaxError"===a.name)throw Ke.from(a,Ke.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mt.classes.FormData,Blob:mt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};We.forEach(["delete","get","head","post","put","patch"],e=>{pt.headers[e]={}});const gt=pt,vt=We.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bt=Symbol("internals");function yt(e){return e&&String(e).trim().toLowerCase()}function xt(e){return!1===e||null==e?e:We.isArray(e)?e.map(xt):String(e)}function wt(e,t,n,r,a){return We.isFunction(r)?r.call(this,t,n):(a&&(t=n),We.isString(t)?We.isString(r)?-1!==t.indexOf(r):We.isRegExp(r)?r.test(t):void 0:void 0)}class Nt{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=yt(t);if(!a)throw new Error("header name must be a non-empty string");const o=We.findKey(r,a);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=xt(e))}const o=(e,t)=>We.forEach(e,(e,n)=>a(e,n,t));if(We.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(We.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&vt[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(We.isObject(e)&&We.isIterable(e)){let n,r,a={};for(const t of e){if(!We.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?We.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=yt(e)){const n=We.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(We.isFunction(t))return t.call(this,e,n);if(We.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=yt(e)){const n=We.findKey(this,e);return!(!n||void 0===this[n]||t&&!wt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=yt(e)){const a=We.findKey(n,e);!a||t&&!wt(0,n[a],a,t)||(delete n[a],r=!0)}}return We.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!wt(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return We.forEach(this,(r,a)=>{const o=We.findKey(n,a);if(o)return t[o]=xt(r),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(a):String(a).trim();i!==a&&delete t[a],t[i]=xt(r),n[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return We.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&We.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[bt]=this[bt]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=yt(e);t[r]||(!function(e,t){const n=We.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})})}(n,e),t[r]=!0)}return We.isArray(e)?e.forEach(r):r(e),this}}Nt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),We.reduceDescriptors(Nt.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),We.freezeMethods(Nt);const kt=Nt;function St(e,t){const n=this||gt,r=t||n,a=kt.from(r.headers);let o=r.data;return We.forEach(e,function(e){o=e.call(n,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function jt(e){return!(!e||!e.__CANCEL__)}function Ct(e,t,n){Ke.call(this,null==e?"canceled":e,Ke.ERR_CANCELED,t,n),this.name="CanceledError"}We.inherits(Ct,Ke,{__CANCEL__:!0});const _t=Ct;function Et(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Ke("Request failed with status code "+n.status,[Ke.ERR_BAD_REQUEST,Ke.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const At=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,o=0,i=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=r[i];a||(a=l),n[o]=s,r[o]=l;let u=i,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const Tt=function(e,t){let n,r,a=0,o=1e3/t;const i=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=o,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];t>=o?i(l,e):(n=l,r||(r=setTimeout(()=>{r=null,i(n)},o-t)))},()=>n&&i(n)]},It=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const a=At(50,250);return Tt(n=>{const o=n.loaded,i=n.lengthComputable?n.total:void 0,s=o-r,l=a(s);r=o;e({loaded:o,total:i,progress:i?o/i:void 0,bytes:s,rate:l||void 0,estimated:l&&i&&o<=i?(i-o)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})},n)},Rt=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Ot=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return We.asap(()=>e(...n))},Pt=mt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,mt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(mt.origin),mt.navigator&&/(msie|trident)/i.test(mt.navigator.userAgent)):()=>!0,Lt=mt.hasStandardBrowserEnv?{write(e,t,n,r,a,o){const i=[e+"="+encodeURIComponent(t)];We.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),We.isString(r)&&i.push("path="+r),We.isString(a)&&i.push("domain="+a),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ut(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Dt=e=>e instanceof kt?(0,i.A)({},e):e;function Ft(e,t){t=t||{};const n={};function r(e,t,n,r){return We.isPlainObject(e)&&We.isPlainObject(t)?We.merge.call({caseless:r},e,t):We.isPlainObject(t)?We.merge({},t):We.isArray(t)?t.slice():t}function a(e,t,n,a){return We.isUndefined(t)?We.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function o(e,t){if(!We.isUndefined(t))return r(void 0,t)}function s(e,t){return We.isUndefined(t)?We.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function l(n,a,o){return o in t?r(n,a):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(e,t,n)=>a(Dt(e),Dt(t),0,!0)};return We.forEach(Object.keys((0,i.A)((0,i.A)({},e),t)),function(r){const o=c[r]||a,i=o(e[r],t[r],r);We.isUndefined(i)&&o!==l||(n[r]=i)}),n}const zt=e=>{const t=Ft({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:s}=t;if(t.headers=i=kt.from(i),t.url=at(Ut(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&i.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),We.isFormData(n))if(mt.hasStandardBrowserEnv||mt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(We.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,r]=e;t.includes(n.toLowerCase())&&i.set(n,r)})}if(mt.hasStandardBrowserEnv&&(r&&We.isFunction(r)&&(r=r(t)),r||!1!==r&&Pt(t.url))){const e=a&&o&&Lt.read(o);e&&i.set(a,e)}return t},Mt="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=zt(e);let a=r.data;const o=kt.from(r.headers).normalize();let i,s,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:m}=r;function f(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let p=new XMLHttpRequest;function g(){if(!p)return;const r=kt.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());Et(function(e){t(e),f()},function(e){n(e),f()},{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p}),p=null}p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(n(new Ke("Request aborted",Ke.ECONNABORTED,e,p)),p=null)},p.onerror=function(t){const r=t&&t.message?t.message:"Network Error",a=new Ke(r,Ke.ERR_NETWORK,e,p);a.event=t||null,n(a),p=null},p.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||it;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Ke(t,a.clarifyTimeoutError?Ke.ETIMEDOUT:Ke.ECONNABORTED,e,p)),p=null},void 0===a&&o.setContentType(null),"setRequestHeader"in p&&We.forEach(o.toJSON(),function(e,t){p.setRequestHeader(t,e)}),We.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),d&&"json"!==d&&(p.responseType=r.responseType),m&&([l,u]=It(m,!0),p.addEventListener("progress",l)),h&&p.upload&&([s,c]=It(h),p.upload.addEventListener("progress",s),p.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{p&&(n(!t||t.type?new _t(null,e,p):t),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===mt.protocols.indexOf(v)?n(new Ke("Unsupported protocol "+v+":",Ke.ERR_BAD_REQUEST,e)):p.send(a||null)})},Bt=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Ke?t:new _t(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,a(new Ke("timeout ".concat(t," of ms exceeded"),Ke.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:s}=r;return s.unsubscribe=()=>We.asap(i),s}};function Vt(e,t){this.v=e,this.k=t}function Wt(e){return function(){return new Ht(e.apply(this,arguments))}}function Ht(e){var t,n;function r(t,n){try{var o=e[t](n),i=o.value,s=i instanceof Vt;Promise.resolve(s?i.v:i).then(function(n){if(s){var l="return"===t?"return":"next";if(!i.k||n.done)return r(l,n);n=e[l](n).value}a(o.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise(function(o,i){var s={key:e,arg:a,resolve:o,reject:i,next:null};n?n=n.next=s:(t=n=s,r(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function qt(e){return new Vt(e,0)}function Jt(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise(function(n){n(e[t](r))}),{done:!1,value:new Vt(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function Kt(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Gt(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Gt(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Gt=function(e){this.s=e,this.n=e.next},Gt.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Gt(e)}Ht.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ht.prototype.next=function(e){return this._invoke("next",e)},Ht.prototype.throw=function(e){return this._invoke("throw",e)},Ht.prototype.return=function(e){return this._invoke("return",e)};const $t=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},Qt=function(){var e=Wt(function*(e,t){var n,r=!1,a=!1;try{for(var o,i=Kt(Xt(e));r=!(o=yield qt(i.next())).done;r=!1){const e=o.value;yield*Jt(Kt($t(e,t)))}}catch(s){a=!0,n=s}finally{try{r&&null!=i.return&&(yield qt(i.return()))}finally{if(a)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),Xt=function(){var e=Wt(function*(e){if(e[Symbol.asyncIterator])return void(yield*Jt(Kt(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield qt(t.read());if(e)break;yield n}}finally{yield qt(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Yt=(e,t,n,r)=>{const a=Qt(e,t);let o,i=0,s=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return s(),void e.close();let o=r.byteLength;if(n){let e=i+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel:e=>(s(e),a.return())},{highWaterMark:2})},{isFunction:Zt}=We,en=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(We.global),{ReadableStream:tn,TextEncoder:nn}=We.global,rn=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(a){return!1}},an=e=>{e=We.merge.call({skipUndefined:!0},en,e);const{fetch:t,Request:n,Response:r}=e,a=t?Zt(t):"function"===typeof fetch,o=Zt(n),s=Zt(r);if(!a)return!1;const l=a&&Zt(tn),c=a&&("function"===typeof nn?(u=new nn,e=>u.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var u;const d=o&&l&&rn(()=>{let e=!1;const t=new n(mt.origin,{body:new tn,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h=s&&l&&rn(()=>We.isReadableStream(new r("").body)),m={stream:h&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new Ke("Response type '".concat(e,"' is not supported"),Ke.ERR_NOT_SUPPORT,n)})});const f=async(e,t)=>{const r=We.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(We.isBlob(e))return e.size;if(We.isSpecCompliantForm(e)){const t=new n(mt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return We.isArrayBufferView(e)||We.isArrayBuffer(e)?e.byteLength:(We.isURLSearchParams(e)&&(e+=""),We.isString(e)?(await c(e)).byteLength:void 0)})(t):r};return async e=>{let{url:a,method:s,data:l,signal:c,cancelToken:u,timeout:p,onDownloadProgress:g,onUploadProgress:v,responseType:b,headers:y,withCredentials:x="same-origin",fetchOptions:w}=zt(e),N=t||fetch;b=b?(b+"").toLowerCase():"text";let k=Bt([c,u&&u.toAbortSignal()],p),S=null;const j=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let C;try{if(v&&d&&"get"!==s&&"head"!==s&&0!==(C=await f(y,l))){let e,t=new n(a,{method:"POST",body:l,duplex:"half"});if(We.isFormData(l)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,n]=Rt(C,It(Ot(v)));l=Yt(t.body,65536,e,n)}}We.isString(x)||(x=x?"include":"omit");const t=o&&"credentials"in n.prototype,c=(0,i.A)((0,i.A)({},w),{},{signal:k,method:s.toUpperCase(),headers:y.normalize().toJSON(),body:l,duplex:"half",credentials:t?x:void 0});S=o&&new n(a,c);let u=await(o?N(S,w):N(a,c));const p=h&&("stream"===b||"response"===b);if(h&&(g||p&&j)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=u[t]});const t=We.toFiniteNumber(u.headers.get("content-length")),[n,a]=g&&Rt(t,It(Ot(g),!0))||[];u=new r(Yt(u.body,65536,n,()=>{a&&a(),j&&j()}),e)}b=b||"text";let _=await m[We.findKey(m,b)||"text"](u,e);return!p&&j&&j(),await new Promise((t,n)=>{Et(t,n,{data:_,headers:kt.from(u.headers),status:u.status,statusText:u.statusText,config:e,request:S})})}catch(_){if(j&&j(),_&&"TypeError"===_.name&&/Load failed|fetch/i.test(_.message))throw Object.assign(new Ke("Network Error",Ke.ERR_NETWORK,e,S),{cause:_.cause||_});throw Ke.from(_,_&&_.code,e,S)}}},on=new Map,sn=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:a}=t,o=[r,a,n];let i,s,l=o.length,c=on;for(;l--;)i=o[l],s=c.get(i),void 0===s&&c.set(i,s=l?new Map:an(t)),c=s;return s},ln=(sn(),{http:null,xhr:Mt,fetch:{get:sn}});We.forEach(ln,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const cn=e=>"- ".concat(e),un=e=>We.isFunction(e)||null===e||!1===e,dn=(e,t)=>{e=We.isArray(e)?e:[e];const{length:n}=e;let r,a;const o={};for(let i=0;i<n;i++){let n;if(r=e[i],a=r,!un(r)&&(a=ln[(n=String(r)).toLowerCase()],void 0===a))throw new Ke("Unknown adapter '".concat(n,"'"));if(a&&(We.isFunction(a)||(a=a.get(t))))break;o[n||"#"+i]=a}if(!a){const e=Object.entries(o).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(cn).join("\n"):" "+cn(e[0]):"as no adapter specified";throw new Ke("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return a};function hn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _t(null,e)}function mn(e){hn(e),e.headers=kt.from(e.headers),e.data=St.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return dn(e.adapter||gt.adapter,e)(e).then(function(t){return hn(e),t.data=St.call(e,e.transformResponse,t),t.headers=kt.from(t.headers),t},function(t){return jt(t)||(hn(e),t&&t.response&&(t.response.data=St.call(e,e.transformResponse,t.response),t.response.headers=kt.from(t.response.headers))),Promise.reject(t)})}const fn="1.12.2",pn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{pn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const gn={};pn.transitional=function(e,t,n){function r(e,t){return"[Axios v"+fn+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,o)=>{if(!1===e)throw new Ke(r(a," has been removed"+(t?" in "+t:"")),Ke.ERR_DEPRECATED);return t&&!gn[a]&&(gn[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,o)}},pn.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const vn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Ke("options must be an object",Ke.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const o=r[a],i=t[o];if(i){const t=e[o],n=void 0===t||i(t,o,e);if(!0!==n)throw new Ke("option "+o+" must be "+n,Ke.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Ke("Unknown option "+o,Ke.ERR_BAD_OPTION)}},validators:pn},bn=vn.validators;class yn{constructor(e){this.defaults=e||{},this.interceptors={request:new ot,response:new ot}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ft(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&vn.assertOptions(n,{silentJSONParsing:bn.transitional(bn.boolean),forcedJSONParsing:bn.transitional(bn.boolean),clarifyTimeoutError:bn.transitional(bn.boolean)},!1),null!=r&&(We.isFunction(r)?t.paramsSerializer={serialize:r}:vn.assertOptions(r,{encode:bn.function,serialize:bn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),vn.assertOptions(t,{baseUrl:bn.spelling("baseURL"),withXsrfToken:bn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&We.merge(a.common,a[t.method]);a&&We.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=kt.concat(o,a);const i=[];let s=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!s){const e=[mn.bind(this),void 0];for(e.unshift(...i),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=i.length;let h=t;for(;d<u;){const e=i[d++],t=i[d++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=mn.call(this,h)}catch(m){return Promise.reject(m)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return at(Ut((e=Ft(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}We.forEach(["delete","get","head","options"],function(e){yn.prototype[e]=function(t,n){return this.request(Ft(n||{},{method:e,url:t,data:(n||{}).data}))}}),We.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,a){return this.request(Ft(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}yn.prototype[e]=t(),yn.prototype[e+"Form"]=t(!0)});const xn=yn;class wn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,a){n.reason||(n.reason=new _t(e,r,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new wn(function(t){e=t}),cancel:e}}}const Nn=wn;const kn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kn).forEach(e=>{let[t,n]=e;kn[n]=t});const Sn=kn;const jn=function e(t){const n=new xn(t),r=re(xn.prototype.request,n);return We.extend(r,xn.prototype,n,{allOwnKeys:!0}),We.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ft(t,n))},r}(gt);jn.Axios=xn,jn.CanceledError=_t,jn.CancelToken=Nn,jn.isCancel=jt,jn.VERSION=fn,jn.toFormData=Ye,jn.AxiosError=Ke,jn.Cancel=jn.CanceledError,jn.all=function(e){return Promise.all(e)},jn.spread=function(e){return function(t){return e.apply(null,t)}},jn.isAxiosError=function(e){return We.isObject(e)&&!0===e.isAxiosError},jn.mergeConfig=Ft,jn.AxiosHeaders=kt,jn.formToJSON=e=>ft(We.isHTMLForm(e)?new FormData(e):e),jn.getAdapter=dn,jn.HttpStatusCode=Sn,jn.default=jn;const Cn=jn;class _n{constructor(e){this.peerConnections=new Map,this.localStream=null,this.stompClient=null,this.callId="",this.currentUserId="",this.iceServers={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"}]},this.stompClient=e}initialize(e,t,n){this.localStream=e,this.callId=t,this.currentUserId=n}createPeerConnection(e){const t=new RTCPeerConnection(this.iceServers);return this.localStream&&this.localStream.getTracks().forEach(e=>{t.addTrack(e,this.localStream)}),t.onicecandidate=t=>{t.candidate&&this.stompClient&&(console.log("\ud83d\udce1 Sending ICE candidate to user ".concat(e)),this.stompClient.publish({destination:"/app/group-video-signal",body:JSON.stringify({callId:this.callId,fromUserId:this.currentUserId,toUserId:e,type:"ICE_CANDIDATE",data:t.candidate})}))},t.onconnectionstatechange=()=>{console.log("Connection state with ".concat(e,":"),t.connectionState),"failed"===t.connectionState&&console.error("Connection failed with ".concat(e))},t.oniceconnectionstatechange=()=>{console.log("ICE connection state with ".concat(e,":"),t.iceConnectionState)},this.peerConnections.set(e,t),t}async createOffer(e,t){try{var n;console.log("\ud83d\udd35 ========== CREATE OFFER TO ".concat(e," ==========")),console.log("\ud83d\udd35 Current user: ".concat(this.currentUserId)),console.log("\ud83d\udd35 Local stream tracks:",null===(n=this.localStream)||void 0===n?void 0:n.getTracks().length);const r=this.createPeerConnection(e);r.ontrack=n=>{var r;console.log("\ud83c\udfac ONTRACK EVENT from ".concat(e,":"),n.track.kind),console.log("\ud83c\udfac Track readyState:",n.track.readyState),console.log("\ud83c\udfac Track enabled:",n.track.enabled),console.log("\ud83c\udfac Streams count:",null===(r=n.streams)||void 0===r?void 0:r.length),n.streams&&n.streams[0]?(console.log("\u2705 Calling onTrack callback with stream ID:",n.streams[0].id),t(e,n.streams[0])):console.error("\u274c No streams in ontrack event!")};const a=await r.createOffer();await r.setLocalDescription(a),console.log("\ud83d\udcde Sending offer to user ".concat(e)),console.log("\ud83d\udcde Offer SDP type:",a.type),console.log("\ud83d\udd35 ========== END CREATE OFFER =========="),this.stompClient&&this.stompClient.publish({destination:"/app/group-video-signal",body:JSON.stringify({callId:this.callId,fromUserId:this.currentUserId,toUserId:e,type:"PEER_OFFER",data:a})})}catch(r){console.error("\u274c Error creating offer for ".concat(e,":"),r)}}async handleOffer(e,t,n){try{console.log("\ud83d\udfe2 ========== HANDLE OFFER FROM ".concat(e," ==========")),console.log("\ud83d\udfe2 Current user: ".concat(this.currentUserId)),console.log("\ud83d\udfe2 Offer type:",t.type);const r=this.createPeerConnection(e);r.ontrack=t=>{var r;console.log("\ud83c\udfac ONTRACK EVENT from ".concat(e,":"),t.track.kind),console.log("\ud83c\udfac Track readyState:",t.track.readyState),console.log("\ud83c\udfac Track enabled:",t.track.enabled),console.log("\ud83c\udfac Streams count:",null===(r=t.streams)||void 0===r?void 0:r.length),t.streams&&t.streams[0]?(console.log("\u2705 Calling onTrack callback with stream ID:",t.streams[0].id),n(e,t.streams[0])):console.error("\u274c No streams in ontrack event!")},await r.setRemoteDescription(new RTCSessionDescription(t)),console.log("\u2705 Remote description set");const a=await r.createAnswer();await r.setLocalDescription(a),console.log("\u2705 Local description (answer) set"),console.log("\ud83d\udcde Sending answer to user ".concat(e)),console.log("\ud83d\udfe2 ========== END HANDLE OFFER =========="),this.stompClient&&this.stompClient.publish({destination:"/app/group-video-signal",body:JSON.stringify({callId:this.callId,fromUserId:this.currentUserId,toUserId:e,type:"PEER_ANSWER",data:a})})}catch(r){console.error("\u274c Error handling offer from ".concat(e,":"),r)}}async handleAnswer(e,t){try{console.log("\ud83d\udfe1 ========== HANDLE ANSWER FROM ".concat(e," =========="));const n=this.peerConnections.get(e);n?(console.log("\ud83d\udfe1 Peer connection state:",n.connectionState),console.log("\ud83d\udfe1 Signaling state:",n.signalingState),await n.setRemoteDescription(new RTCSessionDescription(t)),console.log("\u2705 Answer received and remote description set"),console.log("\ud83d\udfe1 New signaling state:",n.signalingState)):(console.error("\u274c No peer connection found for ".concat(e)),console.log("Available connections:",Array.from(this.peerConnections.keys()))),console.log("\ud83d\udfe1 ========== END HANDLE ANSWER ==========")}catch(n){console.error("\u274c Error handling answer from ".concat(e,":"),n)}}async handleIceCandidate(e,t){try{const n=this.peerConnections.get(e);n?(await n.addIceCandidate(new RTCIceCandidate(t)),console.log("\u2705 ICE candidate added for ".concat(e))):console.warn("No peer connection for ICE candidate from ".concat(e))}catch(n){console.error("Error handling ICE candidate from ".concat(e,":"),n)}}removePeer(e){const t=this.peerConnections.get(e);t&&(t.close(),this.peerConnections.delete(e),console.log("\ud83d\udeaa Removed peer connection for ".concat(e)))}getConnectionState(e){const t=this.peerConnections.get(e);return t?t.connectionState:"disconnected"}getPeerConnection(e){return this.peerConnections.get(e)}getAllPeerConnections(){return this.peerConnections}cleanup(){console.log("\ud83e\uddf9 Cleaning up all peer connections"),this.peerConnections.forEach(e=>e.close()),this.peerConnections.clear(),this.localStream&&(this.localStream.getTracks().forEach(e=>e.stop()),this.localStream=null)}}const En=e=>{let{userId:n,userName:r,userAvatar:a,stream:o,connectionState:i}=e;const s=(0,t.useRef)(null);return(0,t.useEffect)(()=>{console.log("\ud83d\udcfa RemoteVideoPlayer useEffect for:",r),console.log("\ud83d\udcfa Video ref:",s.current?"exists":"null"),console.log("\ud83d\udcfa Stream:",o?o.id:"null"),s.current&&o?(console.log("\u2705 Setting srcObject for:",r),console.log("\ud83d\udcfa Stream active:",o.active),console.log("\ud83d\udcfa Video tracks:",o.getVideoTracks().length),console.log("\ud83d\udcfa Audio tracks:",o.getAudioTracks().length),s.current.srcObject=o,s.current.onloadedmetadata=()=>{console.log("\u2705 Video metadata loaded for:",r)},s.current.onplay=()=>{console.log("\u25b6\ufe0f Video playing for:",r)},s.current.onerror=e=>{console.error("\u274c Video error for:",r,e)}):console.warn("\u26a0\ufe0f Cannot set srcObject - ref or stream missing")},[o,r]),(0,c.jsxs)("div",{className:"video-container remote",children:[(0,c.jsx)("video",{ref:s,autoPlay:!0,playsInline:!0,className:"video-element"}),(0,c.jsx)("div",{className:"user-avatar",children:(0,c.jsx)("img",{src:a,alt:r})}),(0,c.jsxs)("div",{className:"video-label",children:["\ud83d\udc64 ",r,"connected"!==i&&(0,c.jsxs)("span",{className:"connection-status",children:[" (",i,")"]})]})]})},An=e=>{let{callId:n,groupId:r,groupName:a,initiatorId:o,currentUserId:i,participants:l,onCallEnded:u,stompClient:d}=e;const[h]=(0,t.useState)(()=>new _n(d)),[m,f]=(0,t.useState)([]),[p,g]=(0,t.useState)(!0),[v,b]=(0,t.useState)(!0),[y,x]=(0,t.useState)(new Map),[w,N]=(0,t.useState)(l),k=(0,t.useRef)(null),S=(0,t.useRef)(null);console.log("\ud83c\udfac GroupVideoCallInterface mounted with:"),console.log("  Current User ID:",i),console.log("  Participants:",l),console.log("  Call ID:",n),(0,t.useEffect)(()=>((async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});S.current=e,k.current&&(k.current.srcObject=e),h.initialize(e,n,i),console.log("\ud83d\udc65 Creating offers for existing participants..."),console.log("Total participants:",l.length),console.log("Current user:",i);let t=0;l.forEach(e=>{console.log("Checking participant:",e.userId,e.userName),e.userId!==i?(console.log("\u2705 Creating offer to:",e.userName),h.createOffer(e.userId,j),t++):console.log("\u23ed\ufe0f Skipping self:",e.userName)}),console.log("\ud83d\udcca Created ".concat(t," offers for existing participants"))}catch(e){console.error("Error initializing call:",e);let t="Kh\xf4ng th\u1ec3 kh\u1edfi t\u1ea1o cu\u1ed9c g\u1ecdi. ";"NotAllowedError"===e.name?t+="B\u1ea1n \u0111\xe3 t\u1eeb ch\u1ed1i quy\u1ec1n truy c\u1eadp camera/microphone. Vui l\xf2ng cho ph\xe9p quy\u1ec1n truy c\u1eadp v\xe0 th\u1eed l\u1ea1i.":"NotFoundError"===e.name?t+="Kh\xf4ng t\xecm th\u1ea5y camera ho\u1eb7c microphone. Vui l\xf2ng ki\u1ec3m tra thi\u1ebft b\u1ecb c\u1ee7a b\u1ea1n.":"NotReadableError"===e.name?t+="Camera/microphone \u0111ang \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng b\u1edfi \u1ee9ng d\u1ee5ng kh\xe1c. Vui l\xf2ng \u0111\xf3ng c\xe1c \u1ee9ng d\u1ee5ng kh\xe1c v\xe0 th\u1eed l\u1ea1i.":"OverconstrainedError"===e.name?t+="Kh\xf4ng th\u1ec3 \u0111\xe1p \u1ee9ng y\xeau c\u1ea7u camera/microphone. Vui l\xf2ng th\u1eed l\u1ea1i.":"TypeError"===e.name?t+="Tr\xecnh duy\u1ec7t kh\xf4ng h\u1ed7 tr\u1ee3 truy c\u1eadp camera/microphone.":t+=e.message,alert(t),u()}})(),()=>{S.current&&(S.current.getTracks().forEach(e=>{e.stop(),console.log("\ud83d\uded1 Stopped track:",e.kind)}),S.current=null),h.cleanup()}),[n,r,i,l,d,u,h]);const j=(0,t.useCallback)((e,t)=>{console.log("\ud83c\udfa5 ===================================="),console.log("\ud83c\udfa5 REMOTE STREAM RECEIVED"),console.log("\ud83c\udfa5 User ID:",e),console.log("\ud83c\udfa5 Stream ID:",t.id),console.log("\ud83c\udfa5 Stream active:",t.active),console.log("\ud83c\udfa5 Video tracks:",t.getVideoTracks().length),console.log("\ud83c\udfa5 Audio tracks:",t.getAudioTracks().length);const n=w.find(t=>t.userId===e);if(!n)return console.error(" \u274c Participant not found for userId:",e),void console.log("Available activeParticipants:",w);console.log("\u2705 Participant found:",n.userName),f(r=>{const a=[...r.filter(t=>t.userId!==e),{userId:e,userName:n.userName,userAvatar:n.userAvatar,stream:t}];return console.log("\ud83d\udcca Remote streams count:",a.length),a}),x(t=>{const n=new Map(t);return n.set(e,h.getConnectionState(e)),n}),console.log("\ud83c\udfa5 ====================================")},[w,h]),C=(0,t.useCallback)(e=>{console.log("\ud83d\udc4b User left:",e),h.removePeer(e),f(t=>t.filter(t=>t.userId!==e)),x(t=>{const n=new Map(t);return n.delete(e),n})},[h]),_=(0,t.useCallback)(e=>{switch(console.log("\ud83d\udce8 ========================================"),console.log("\ud83d\udce8 SIGNAL RECEIVED:",e.type),console.log("\ud83d\udce8 From:",e.fromUserId),console.log("\ud83d\udce8 To:",e.toUserId),console.log("\ud83d\udce8 Current user:",i),e.type){case"PEER_OFFER":console.log("\ud83d\udce8 Processing PEER_OFFER..."),h.handleOffer(e.fromUserId,e.data,j);break;case"PEER_ANSWER":console.log("\ud83d\udce8 Processing PEER_ANSWER..."),h.handleAnswer(e.fromUserId,e.data);break;case"ICE_CANDIDATE":console.log("\ud83d\udce8 Processing ICE_CANDIDATE..."),h.handleIceCandidate(e.fromUserId,e.data);break;case"USER_JOINED":if(console.log("\ud83d\udc64 USER_JOINED - Creating offer to new user:",e.fromUserId),e.fromUserId!==i&&e.data){const t={userId:e.data.userId,userName:e.data.userName,userAvatar:e.data.userAvatar};console.log("\u2795 Adding participant to state:",t),N(e=>{if(e.some(e=>e.userId===t.userId))return console.log("\u26a0\ufe0f Participant already exists, skipping"),e;const n=[...e,t];return console.log("\u2705 Updated participants:",n),n}),h.createOffer(e.fromUserId,j)}else console.log("\u23ed\ufe0f Skipping - user is self");break;case"USER_LEFT":console.log("\ud83d\udc4b USER_LEFT:",e.fromUserId),C(e.fromUserId);break;case"CALL_ENDED":console.log("\ud83d\udcde CALL_ENDED"),u();break;default:console.warn("\u26a0\ufe0f Unknown signal type:",e.type)}console.log("\ud83d\udce8 ========================================")},[i,h,j,C,u]);(0,t.useEffect)(()=>{if(!d||!d.connected)return void console.warn("\u26a0\ufe0f StompClient not connected, cannot subscribe to signals");console.log("\ud83d\udd14 Setting up WebRTC signal subscriptions...");const e=d.subscribe("/topic/group-video-signal/".concat(i),e=>{const t=JSON.parse(e.body);console.log("\ud83d\udce8 User-specific signal received:",t.type),_(t)});console.log("\u2705 Subscribed to user signals:","/topic/group-video-signal/".concat(i));const t=d.subscribe("/topic/group-video-call/".concat(r),e=>{const t=JSON.parse(e.body);console.log("\ud83d\udce2 Group-wide signal received:",t.type),"USER_JOINED"!==t.type&&"USER_LEFT"!==t.type&&"CALL_ENDED"!==t.type||_(t)});return console.log("\u2705 Subscribed to group signals:","/topic/group-video-call/".concat(r)),()=>{console.log("\ud83e\uddf9 Cleaning up WebRTC signal subscriptions"),null===e||void 0===e||e.unsubscribe(),null===t||void 0===t||t.unsubscribe()}},[d,i,r,_]);const E=i===o;return(0,c.jsx)("div",{className:"group-video-call-overlay",children:(0,c.jsxs)("div",{className:"group-video-call-container",children:[(0,c.jsxs)("div",{className:"call-header",children:[(0,c.jsxs)("div",{className:"call-info",children:[(0,c.jsxs)("span",{className:"group-name",children:["\ud83d\udcf9 ",a]}),(0,c.jsxs)("span",{className:"participant-count",children:["\ud83d\udc65 ",m.length+1," ng\u01b0\u1eddi"]})]}),(0,c.jsx)("button",{className:"minimize-btn",onClick:u,children:"\u2212"})]}),(0,c.jsxs)("div",{className:"video-grid",children:[(0,c.jsxs)("div",{className:"video-container local",children:[(0,c.jsx)("video",{ref:k,autoPlay:!0,playsInline:!0,muted:!0,className:"video-element"}),(0,c.jsx)("div",{className:"video-label",children:"\ud83d\udc64 B\u1ea1n"}),!v&&(0,c.jsx)("div",{className:"video-off-overlay",children:(0,c.jsx)("span",{children:"\ud83d\udcf7"})})]}),m.map(e=>(0,c.jsx)(En,{userId:e.userId,userName:e.userName,userAvatar:e.userAvatar,stream:e.stream,connectionState:y.get(e.userId)||"connecting"},e.userId))]}),(0,c.jsxs)("div",{className:"call-controls",children:[(0,c.jsx)("button",{className:"control-btn ".concat(p?"":"off"),onClick:()=>{if(k.current&&k.current.srcObject){k.current.srcObject.getAudioTracks().forEach(e=>{e.enabled=!e.enabled}),g(!p)}},title:p?"T\u1eaft micro":"B\u1eadt micro",children:p?"\ud83c\udfa4":"\ud83d\udd07"}),(0,c.jsx)("button",{className:"control-btn ".concat(v?"":"off"),onClick:()=>{if(k.current&&k.current.srcObject){k.current.srcObject.getVideoTracks().forEach(e=>{e.enabled=!e.enabled}),b(!v)}},title:v?"T\u1eaft camera":"B\u1eadt camera",children:v?"\ud83d\udcf9":"\ud83d\udcf5"}),E?(0,c.jsx)("button",{className:"control-btn end",onClick:async()=>{try{S.current&&S.current.getTracks().forEach(e=>{e.stop(),console.log("\ud83d\uded1 Stopped track on end:",e.kind)}),await(async e=>{const t=localStorage.getItem("token");await Cn.post("".concat(s.J,"/group-video-call/").concat(e,"/end"),{},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})})(n),u()}catch(e){console.error("Error ending call:",e),u()}},title:"K\u1ebft th\xfac cu\u1ed9c g\u1ecdi cho t\u1ea5t c\u1ea3",children:"\u274c K\u1ebft th\xfac"}):(0,c.jsx)("button",{className:"control-btn leave",onClick:async()=>{try{S.current&&S.current.getTracks().forEach(e=>{e.stop(),console.log("\ud83d\uded1 Stopped track on leave:",e.kind)}),await(async(e,t)=>{const n=localStorage.getItem("token");await Cn.post("".concat(s.J,"/group-video-call/").concat(e,"/leave"),{userId:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}})})(n,i),u()}catch(e){console.error("Error leaving call:",e),u()}},title:"R\u1eddi kh\u1ecfi cu\u1ed9c g\u1ecdi",children:"\ud83d\udeaa R\u1eddi"})]})]})})},Tn=()=>{var e;console.log("\ud83d\ude80 Chat component rendering...");const r=(0,a.Zp)(),[o,l]=(0,t.useState)([]),[u,d]=(0,t.useState)(null),[m,f]=(0,t.useState)([]),[p,g]=(0,t.useState)(""),[v,b]=(0,t.useState)(null),[y,x]=(0,t.useState)(""),[w,N]=(0,t.useState)(!0),[k,S]=(0,t.useState)({}),[j,C]=(0,t.useState)([]),[_,E]=(0,t.useState)({}),[T,I]=(0,t.useState)(!1),[R,D]=(0,t.useState)(""),[F,z]=(0,t.useState)([]),[V,W]=(0,t.useState)(!1),[H,q]=(0,t.useState)(null),[J,K]=(0,t.useState)(null),[G,$]=(0,t.useState)("create"),[Q,X]=(0,t.useState)(!1),[Y,re]=(0,t.useState)(null),[ae,oe]=(0,t.useState)(null),[ie,se]=(0,t.useState)(""),[le,ce]=(0,t.useState)(!1),[ue,de]=(0,t.useState)(null),[he,me]=(0,t.useState)(!1),[fe,pe]=(0,t.useState)(null),[ge,ve]=(0,t.useState)(null),[be,ye]=(0,t.useState)(!1),[xe,we]=(0,t.useState)(!1),[Ne,ke]=(0,t.useState)(null),[Se,je]=(0,t.useState)(null),[Ce,_e]=(0,t.useState)(!1),[Ee,Ae]=(0,t.useState)(!1),[Te,Ie]=(0,t.useState)(null),[Re,Oe]=(0,t.useState)(null),[Pe,Le]=(0,t.useState)(!0),[Ue,De]=(0,t.useState)(!0),[Fe,ze]=(0,t.useState)(!0),[Me,Be]=(0,t.useState)("00:00"),[Ve,We]=(0,t.useState)(null),[He,qe]=(0,t.useState)(null),[Je,Ke]=(0,t.useState)(!1),[Ge,$e]=(0,t.useState)(!1),[Qe,Xe]=(0,t.useState)(null),[Ye,Ze]=(0,t.useState)(()=>"true"===localStorage.getItem("useFakeCamera")),[et,tt]=(0,t.useState)({}),[nt,rt]=(0,t.useState)(!1),[at,ot]=(0,t.useState)(!0),[it,st]=(0,t.useState)(0),[lt,ct]=(0,t.useState)(null),[ut,dt]=(0,t.useState)(!1),[ht,mt]=(0,t.useState)(!1),[ft,pt]=(0,t.useState)(!1),[gt,vt]=(0,t.useState)([]),[bt,yt]=(0,t.useState)([]),[xt,wt]=(0,t.useState)(!1),[Nt,kt]=(0,t.useState)(!1),[St,jt]=(0,t.useState)(new Set),[Ct,_t]=(0,t.useState)(()=>"true"===localStorage.getItem("alwaysShowSensitiveContent")),Et=(0,t.useRef)(null),At=(0,t.useRef)(null),Tt=(0,t.useRef)(null),It=(0,t.useRef)(null),Rt=(0,t.useRef)(null),Ot=(0,t.useRef)(null),Pt=(0,t.useRef)(null),Lt=(0,t.useRef)(!1),Ut=()=>{At.current&&(At.current.scrollTop=At.current.scrollHeight,Lt.current=!0)},Dt=e=>{const t=Math.max(e.sexyScore||0,e.pornScore||0,e.hentaiScore||0);return!0===e.isSexy&&t>.95},Ft=e=>!0===e.isSexy&&!Dt(e),zt=e=>!0===e.isSexy,Mt=e=>Ct||St.has(e),Bt=e=>{jt(t=>new Set(t).add(e))},Vt=(0,t.useRef)(0);(0,t.useEffect)(()=>{if(m.length>0){m.length>Vt.current&&m.length-Vt.current<=5&&Ut(),Vt.current=m.length}},[m]),(0,t.useEffect)(()=>{u&&(ot(!0),st(0),Lt.current=!1,requestAnimationFrame(()=>{Ut()}))},[u]);const Wt=(0,t.useCallback)(()=>{je(null),_e(!1),Ae(!1),Ie(null),Oe(null),Le(!0),De(!0),ze(!0),Be("00:00"),Pt.current=null},[]),Ht=(0,t.useCallback)(async()=>{if(Se)try{await Z(Se.id),L("/app/video-call/end",{callId:Se.id})}catch(e){console.error("Failed to end call:",e)}Ve&&Ve.endCall()},[Se,Ve]),qt=(0,t.useCallback)(async e=>{try{const t=(0,h.ug)(),n=null===t||void 0===t?void 0:t.id,r=(null===t||void 0===t?void 0:t.username)||"T\xf4i",a="group"===e.type?await(0,U.t2)(e.id,0,20):await(0,U.Ye)(e.id,0,20);ot(20===a.length);const o=Array.from(new Set(a.map(e=>e.senderId).filter(e=>e&&e!==n&&!k[e]&&!_[e]))),s={};if(o.length){console.log("\ud83d\udd0d Fetching user info for IDs:",o);(await Promise.allSettled(o.map(e=>(0,B.kl)(e)))).forEach((e,t)=>{if("fulfilled"===e.status&&e.value){const n=e.value,r="".concat(n.firstName||""," ").concat(n.lastName||"").trim()||n.username||"Ng\u01b0\u1eddi d\xf9ng";console.log("\u2705 Loaded user ".concat(o[t],":"),{name:r,avatar:n.avatar}),s[o[t]]={name:r,avatar:n.avatar}}else console.error("\u274c Failed to load user ".concat(o[t],":"),e)}),Object.keys(s).length&&(console.log("\ud83d\udcbe Updating userCache with additions:",s),E(e=>(0,i.A)((0,i.A)({},e),s)))}const l=(0,i.A)((0,i.A)((0,i.A)({},_),k),s);console.log("\ud83d\udce6 Combined cache for messages:",l),console.log("\ud83d\udce8 Total messages to transform:",a.length);const c=a.map(e=>{var t;const a=l[e.senderId];return a||e.senderId===n||console.warn("\u26a0\ufe0f No user info for senderId ".concat(e.senderId)),{id:e.id,senderId:e.senderId,senderName:e.senderId===n?r:(null===a||void 0===a?void 0:a.name)||"Ng\u01b0\u1eddi d\xf9ng",senderAvatar:null===a||void 0===a?void 0:a.avatar,content:e.content.startsWith('"')&&e.content.endsWith('"')&&e.content.length>1?e.content.slice(1,-1):e.content,timestamp:new Date(e.createdAt),type:(null===(t=e.messageType)||void 0===t?void 0:t.toLowerCase())||"text",imageUrl:e.imageUrl,fileUrl:e.fileUrl,fileName:e.fileName,fileSize:e.fileSize,isOwn:e.senderId===n,isSexy:e.isSexy,sexyScore:e.sexyScore,pornScore:e.pornScore,hentaiScore:e.hentaiScore,topLabel:e.topLabel,validationMessage:e.validationMessage,confidence:e.confidence}});f(c)}catch(t){console.error("Load messages failed",t),f([]),ot(!1)}},[k,_]),Jt=(0,t.useCallback)(async()=>{if(nt||!at||!u)return;const e=At.current,t=(null===e||void 0===e?void 0:e.scrollHeight)||0,n=(null===e||void 0===e?void 0:e.scrollTop)||0;rt(!0);try{const r=(0,h.ug)(),a=null===r||void 0===r?void 0:r.id,o=(null===r||void 0===r?void 0:r.username)||"T\xf4i",s=it+1;console.log("\ud83d\udcdc Loading page ".concat(s," (size: 20)"));const l="group"===u.type?await(0,U.t2)(u.id,s,20):await(0,U.Ye)(u.id,s,20);if(l.length<20&&ot(!1),0===l.length)return console.log("\u2705 Kh\xf4ng c\xf2n tin nh\u1eafn c\u0169 h\u01a1n"),void ot(!1);st(s),console.log("\u2705 Page updated: ".concat(it," \u2192 ").concat(s));const c=Array.from(new Set(l.map(e=>e.senderId).filter(e=>e&&e!==a&&!k[e]&&!_[e]))),d={};if(c.length){(await Promise.allSettled(c.map(e=>(0,B.kl)(e)))).forEach((e,t)=>{if("fulfilled"===e.status&&e.value){const n=e.value,r="".concat(n.firstName||""," ").concat(n.lastName||"").trim()||n.username||"Ng\u01b0\u1eddi d\xf9ng";d[c[t]]={name:r,avatar:n.avatar}}}),Object.keys(d).length&&E(e=>(0,i.A)((0,i.A)({},e),d))}const m=(0,i.A)((0,i.A)((0,i.A)({},_),k),d),p=l.map(e=>{var t;const n=m[e.senderId];return{id:e.id,senderId:e.senderId,senderName:e.senderId===a?o:(null===n||void 0===n?void 0:n.name)||"Ng\u01b0\u1eddi d\xf9ng",senderAvatar:null===n||void 0===n?void 0:n.avatar,content:e.content.startsWith('"')&&e.content.endsWith('"')&&e.content.length>1?e.content.slice(1,-1):e.content,timestamp:new Date(e.createdAt),type:(null===(t=e.messageType)||void 0===t?void 0:t.toLowerCase())||"text",imageUrl:e.imageUrl,fileUrl:e.fileUrl,fileName:e.fileName,fileSize:e.fileSize,isOwn:e.senderId===a,isSexy:e.isSexy,sexyScore:e.sexyScore,pornScore:e.pornScore,hentaiScore:e.hentaiScore,topLabel:e.topLabel,validationMessage:e.validationMessage,confidence:e.confidence}});f(e=>[...p,...e]),requestAnimationFrame(()=>{if(e){const r=e.scrollHeight-t;e.scrollTop=n+r,console.log("\ud83d\udccd Restored scroll position: ".concat(n," + ").concat(r," = ").concat(e.scrollTop))}}),console.log("\u2705 Loaded ".concat(p.length," messages from page ").concat(s))}catch(r){console.error("\u274c Load more messages failed",r),ot(!1)}finally{rt(!1)}},[nt,at,u,it,k,_]);(0,t.useEffect)(()=>{if(v&&!Ve){var e,t;const n=new ee(v.id);n.onError=e=>{console.error("\ud83d\udea8 WebRTC error surfaced to Chat:",e),alert(e.message+"\nH\u01b0\u1edbng d\u1eabn nhanh:\n1. Ki\u1ec3m tra \u1ee9ng d\u1ee5ng kh\xe1c \u0111ang d\xf9ng camera\n2. M\u1edf l\u1ea1i quy\u1ec1n camera/micro trong tr\xecnh duy\u1ec7t\n3. N\u1ebfu v\u1eabn l\u1ed7i th\u1eed F5 ho\u1eb7c \u0111\u1ed5i sang audio-only.")},We(n),null===(e=navigator.mediaDevices)||void 0===e||null===(t=e.enumerateDevices)||void 0===t||t.call(e).then(e=>{console.log("\ud83c\udf9a\ufe0f Thi\u1ebft b\u1ecb kh\u1ea3 d\u1ee5ng:",e.map(e=>{var t;return{kind:e.kind,label:e.label,id:(null===(t=e.deviceId)||void 0===t?void 0:t.slice(0,8))+"..."}}))}).catch(()=>{})}},[v,Ve]),(0,t.useEffect)(()=>{(async()=>{const e=(0,h.ug)();if(e){const t={id:e.id||"1",username:e.username||"user",firstName:e.lastName||"User",lastName:e.lastName||"",avatar:e.avatar||"",isOnline:!0};console.log("\ud83d\udc64 Setting current user:",t),b(t)}try{const e=(0,h.ug)();if(null===e||void 0===e||!e.id)return;const n=await M();C(n);const r={};n.forEach(e=>{e.userId&&(r[e.userId]={name:"".concat(e.firstName," ").concat(e.lastName).trim(),avatar:e.avatar})}),S(r);const a=(await(0,U.Zn)(e.id)).map(t=>{const n=t.participant1Id===e.id?t.participant2Id:t.participant1Id,a=r[n];return{id:t.id,name:(null===a||void 0===a?void 0:a.name)||"Cu\u1ed9c tr\xf2 chuy\u1ec7n",avatar:(null===a||void 0===a?void 0:a.avatar)||"",lastMessage:"",lastMessageTime:void 0,unreadCount:0,isOnline:!0,participants:[t.participant1Id,t.participant2Id],type:"private"}});let o=[];try{const t=await(0,U.P$)(e.id);o=await Promise.all(t.map(async t=>{try{const a=await(0,U.Nk)(t.id),o=a.map(e=>e.userId).filter(t=>t!==e.id),s=[];for(const e of o.slice(0,3)){const t=r[e]||_[e];if(t)s.push(t.name);else try{const t=await(0,B.kl)(e);if(t){const n="".concat(t.firstName||""," ").concat(t.lastName||"").trim()||t.username||"Th\xe0nh vi\xean";s.push(n),E(r=>(0,i.A)((0,i.A)({},r),{},{[e]:{name:n,avatar:t.avatar}}))}}catch(n){}}const l=s.length>0?s.join(", ")+(o.length>3?"...":""):"".concat(a.length," th\xe0nh vi\xean");return{id:t.id,name:t.name,avatar:"",lastMessage:l,lastMessageTime:void 0,unreadCount:0,isOnline:!0,participants:a.map(e=>e.userId),type:"group",role:t.createdBy===e.id?"ADMIN":"MEMBER"}}catch(a){return{id:t.id,name:t.name,avatar:"",lastMessage:"",lastMessageTime:void 0,unreadCount:0,isOnline:!0,participants:[t.createdBy,e.id].filter(e=>!!e),type:"group",role:t.createdBy===e.id?"ADMIN":"MEMBER"}}}))}catch(t){console.warn("List groups failed",t)}l([...o,...a])}catch(n){console.error("Init chat failed",n)}})()},[]),(0,t.useEffect)(()=>{(async()=>{if(!u&&o.length>0){const e=o[0];d(e),await qt(e)}})()},[o,u,qt]);const Kt=(e,t)=>{const n=(e||t||"").toLowerCase();return[".mp4",".webm",".ogg",".ogv",".mov",".mkv",".m4v"].some(e=>n.endsWith(e))},Gt=async(e,t)=>{const n=e;if(et[n])console.log("\u23f3 File \u0111ang \u0111\u01b0\u1ee3c t\u1ea3i...");else try{console.log("\ud83d\udce5 B\u1eaft \u0111\u1ea7u t\u1ea3i file:",e,t),tt(e=>(0,i.A)((0,i.A)({},e),{},{[n]:!0})),await(0,U.p6)(e,t),console.log("\u2705 T\u1ea3i file th\xe0nh c\xf4ng")}catch(r){console.error("\u274c T\u1ea3i file th\u1ea5t b\u1ea1i:",r),alert(r.message||"Kh\xf4ng th\u1ec3 t\u1ea3i file. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{tt(e=>(0,i.A)((0,i.A)({},e),{},{[n]:!1}))}},$t=async()=>{if(lt&&v)if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a tin nh\u1eafn n\xe0y?")){dt(!0);try{await(0,U.RC)(lt.id,v.id),f(e=>e.filter(e=>e.id!==lt.id)),ct(null)}catch(e){console.error("\u274c X\xf3a tin nh\u1eafn th\u1ea5t b\u1ea1i:",e),alert(e.message||"Kh\xf4ng th\u1ec3 x\xf3a tin nh\u1eafn. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{dt(!1)}}else ct(null)},Qt=e=>{if(e===(null===v||void 0===v?void 0:v.id))return"B\u1ea1n";const t=_[e]||k[e];return t?t.name:"Unknown User"};(0,t.useEffect)(()=>{const e=e=>{e.target.closest(".message-actions")||ct(null)};if(lt)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[lt]);const Xt=(0,t.useCallback)(e=>{if(console.log("\ud83d\udcf9 ============================================"),console.log("\ud83d\udcf9 Processing group call signal:",e),console.log("\ud83d\udcf9 Signal type:",e.type),console.log("\ud83d\udcf9 Signal data:",e.data),console.log("\ud83d\udcf9 Current user ID:",null===v||void 0===v?void 0:v.id),"CALL_INITIATED"===e.type&&e.data){const t=e.data;console.log("\ud83d\udcf9 Call initiated by:",t.initiatorId),console.log("\ud83d\udcf9 Call ID:",t.id),console.log("\ud83d\udcf9 Group ID:",t.groupId),console.log("\ud83d\udcf9 Group Name:",t.groupName),console.log("\ud83d\udcf9 Participants:",t.participants),t.initiatorId!==(null===v||void 0===v?void 0:v.id)?(console.log("\u2705 Showing notification to user"),Xe(t),$e(!0)):console.log("\u23ed\ufe0f Skipping notification - user is initiator")}else"CALL_ENDED"===e.type?(console.log("\ud83d\uded1 Call ended notification"),$e(!1),Xe(null),He&&(qe(null),Ke(!1))):console.log("\u26a0\ufe0f Unknown signal type or missing data");console.log("\ud83d\udcf9 ============================================")},[null===v||void 0===v?void 0:v.id,He]);(0,t.useEffect)(()=>{const e=(0,h.ug)();console.log("\ud83c\udf10 WebSocket useEffect - user info:",e);let t=null,n=null,r=null,a=null,o=null,s=null,c=null;if(null!==e&&void 0!==e&&e.id&&null!==v&&void 0!==v&&v.id)return O(()=>{if(null!==e&&void 0!==e&&e.id&&(t=P("/topic/conversations/".concat(e.id),t=>{const n=JSON.parse(t.body),r=e.id,a=n.participant1Id===r?n.participant2Id:n.participant1Id,o=k[a];l(e=>[{id:n.id,name:(null===o||void 0===o?void 0:o.name)||"Cu\u1ed9c tr\xf2 chuy\u1ec7n",unreadCount:0,isOnline:!0,participants:[r,a],avatar:(null===o||void 0===o?void 0:o.avatar)||"",lastMessage:"",lastMessageTime:new Date},...e])}),console.log("\ud83d\udd14 Subscribing to video call events for user:",e.id),o=P("/topic/video-call/".concat(e.id),t=>{const n=JSON.parse(t.body);console.log("\ud83d\udcde Received video call event:",n),"INITIATED"===n.status&&n.calleeId===e.id?(console.log("\ud83d\udcf2 Setting incoming call for user:",e.id),ke(n)):"ACCEPTED"===n.status?Se&&n.id===Se.id&&je(n):"REJECTED"!==n.status&&"ENDED"!==n.status&&"TIMEOUT"!==n.status||(Se&&n.id===Se.id&&Wt(),Ne&&n.id===Ne.id&&ke(null))}),s=P("/topic/video-signal/".concat(e.id),e=>{const t=JSON.parse(e.body);Ve&&Ve.handleSignal(t)})),u&&("private"===u.type?n=P("/topic/chat/".concat(u.id),t=>{var n;const r=JSON.parse(t.body),a=null===e||void 0===e?void 0:e.id,o=(null===e||void 0===e?void 0:e.username)||"T\xf4i",s=new Date(r.createdAt),c=isNaN(s.getTime())?new Date:s;let d=k[r.senderId]||_[r.senderId];d||r.senderId===a||(0,B.kl)(r.senderId).then(e=>{e&&E(t=>(0,i.A)((0,i.A)({},t),{},{[r.senderId]:{name:"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||e.username||"Ng\u01b0\u1eddi d\xf9ng",avatar:e.avatar}}))}).catch(()=>{}),"IMAGE"===r.messageType&&r.isSexy&&(console.warn("\u26a0\ufe0f \u1ea2nh nh\u1ea1y c\u1ea3m:",r.validationMessage),console.log("\ud83d\udcca Sexy score:",r.sexyScore),console.log("\ud83d\udcca Porn score:",r.pornScore),console.log("\ud83d\udcca Hentai score:",r.hentaiScore),console.log("\ud83c\udff7\ufe0f Top label:",r.topLabel));const h={id:r.id,senderId:r.senderId,senderName:r.senderId===a?o:(null===d||void 0===d?void 0:d.name)||"Ng\u01b0\u1eddi d\xf9ng",senderAvatar:null===d||void 0===d?void 0:d.avatar,content:r.content.startsWith('"')&&r.content.endsWith('"')&&r.content.length>1?r.content.slice(1,-1):r.content,timestamp:c,type:(null===(n=r.messageType)||void 0===n?void 0:n.toLowerCase())||"text",imageUrl:r.imageUrl,fileUrl:r.fileUrl,fileName:r.fileName,fileSize:r.fileSize,isOwn:r.senderId===a,isSexy:r.isSexy,sexyScore:r.sexyScore,pornScore:r.pornScore,hentaiScore:r.hentaiScore,topLabel:r.topLabel,validationMessage:r.validationMessage,confidence:r.confidence};f(e=>[...e,h]);const m="image"===h.type?"\ud83d\udcf7 H\xecnh \u1ea3nh":"file"===h.type&&Kt(h.fileName,h.fileUrl)?"\ud83c\udfac Video":"file"===h.type?"\ud83d\udcce File \u0111\xednh k\xe8m":h.content;l(e=>e.map(e=>e.id===u.id?(0,i.A)((0,i.A)({},e),{},{lastMessage:m,lastMessageTime:h.timestamp}):e))}):a=P("/topic/group/".concat(u.id),t=>{var n;const r=JSON.parse(t.body),a=null===e||void 0===e?void 0:e.id,o=(null===e||void 0===e?void 0:e.username)||"T\xf4i",s=new Date(r.createdAt),c=isNaN(s.getTime())?new Date:s;let h=k[r.senderId]||_[r.senderId];h||r.senderId===a||(0,B.kl)(r.senderId).then(e=>{e&&E(t=>(0,i.A)((0,i.A)({},t),{},{[r.senderId]:{name:"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||e.username||"Ng\u01b0\u1eddi d\xf9ng",avatar:e.avatar}}))}).catch(()=>{}),"IMAGE"===r.messageType&&r.isSexy&&(console.warn("\u26a0\ufe0f \u1ea2nh nh\u1ea1y c\u1ea3m (group):",r.validationMessage),console.log("\ud83d\udcca Sexy score:",r.sexyScore),console.log("\ud83d\udcca Porn score:",r.pornScore),console.log("\ud83d\udcca Hentai score:",r.hentaiScore),console.log("\ud83c\udff7\ufe0f Top label:",r.topLabel));const m={id:r.id,senderId:r.senderId,senderName:r.senderId===a?o:(null===h||void 0===h?void 0:h.name)||"Ng\u01b0\u1eddi d\xf9ng",senderAvatar:null===h||void 0===h?void 0:h.avatar,content:r.content.startsWith('"')&&r.content.endsWith('"')&&r.content.length>1?r.content.slice(1,-1):r.content,timestamp:c,type:(null===(n=r.messageType)||void 0===n?void 0:n.toLowerCase())||"text",imageUrl:r.imageUrl,fileUrl:r.fileUrl,fileName:r.fileName,fileSize:r.fileSize,isOwn:r.senderId===a,isSexy:r.isSexy,sexyScore:r.sexyScore,pornScore:r.pornScore,hentaiScore:r.hentaiScore,topLabel:r.topLabel,validationMessage:r.validationMessage,confidence:r.confidence};f(e=>[...e,m]);const p="image"===m.type?"\ud83d\udcf7 H\xecnh \u1ea3nh":"file"===m.type&&Kt(m.fileName,m.fileUrl)?"\ud83c\udfac Video":"file"===m.type?"\ud83d\udcce File \u0111\xednh k\xe8m":m.content;l(e=>e.map(e=>e.id===u.id?(0,i.A)((0,i.A)({},e),{},{lastMessage:p,lastMessageTime:m.timestamp,participants:e.participants.includes(m.senderId)?e.participants:[...e.participants,m.senderId]}):e)),d(e=>e&&e.id===u.id?(0,i.A)((0,i.A)({},e),{},{participants:e.participants.includes(m.senderId)?e.participants:[...e.participants,m.senderId]}):e)})),null!==e&&void 0!==e&&e.id)try{r=P("/topic/groups/".concat(e.id),t=>{try{const n=JSON.parse(t.body);if(n.message&&n.message.includes("x\xf3a"))return console.log("Group deleted notification:",n),l(e=>e.filter(e=>e.id!==n.groupId)),void d(e=>(null===e||void 0===e?void 0:e.id)===n.groupId?(alert('Nh\xf3m "'.concat(n.groupName,'" \u0111\xe3 b\u1ecb x\xf3a')),null):e);const r=n;l(t=>{if(t.some(e=>e.id===r.id))return t;return[{id:r.id,name:r.name,avatar:"",lastMessage:"",lastMessageTime:new Date,unreadCount:0,isOnline:!0,participants:[r.createdBy,e.id],type:"group",role:r.createdBy===e.id?"ADMIN":"MEMBER"},...t]})}catch(n){console.warn("Parse group event failed",n)}})}catch(h){console.warn("Subscribe groups failed",h)}if(u&&"group"===u.type)try{c=P("/topic/group/".concat(u.id,"/member-removed"),t=>{try{const n=JSON.parse(t.body);console.log("Member removed notification:",n),null!==e&&void 0!==e&&e.id&&n.userId===e.id&&(d(null),alert(n.message||"B\u1ea1n \u0111\xe3 b\u1ecb x\xf3a kh\u1ecfi nh\xf3m"))}catch(n){console.warn("Parse member-removed event failed",n)}})}catch(h){console.warn("Subscribe member-removed failed",h)}}),()=>{try{t&&t.unsubscribe&&t.unsubscribe()}catch(e){}try{n&&n.unsubscribe&&n.unsubscribe()}catch(i){}try{r&&r.unsubscribe&&r.unsubscribe()}catch(l){}try{a&&a.unsubscribe&&a.unsubscribe()}catch(u){}try{o&&o.unsubscribe&&o.unsubscribe()}catch(d){}try{s&&s.unsubscribe&&s.unsubscribe()}catch(h){}try{c&&c.unsubscribe&&c.unsubscribe()}catch(m){}};console.log("\u26a0\ufe0f No user info available, skipping WebSocket setup")},[u,k,Se,Ne,Ve,Wt,v,_,Xt]),(0,t.useEffect)(()=>{const e=(0,h.ug)();if(null===e||void 0===e||!e.id)return;if(0===o.length)return;console.log("\ud83c\udfaf Setting up group video call subscriptions for",o.length,"rooms");const t=[];let n;return n=setTimeout(()=>{o.forEach(e=>{if("group"===e.type)try{console.log("\ud83d\udcf9 Subscribing to group video call for group:",e.id,e.name);const n=P("/topic/group-video-call/".concat(e.id),t=>{console.log("\ud83d\udcf9 RAW MESSAGE RECEIVED for group:",e.id,t.body);try{const e=JSON.parse(t.body);console.log("\ud83d\udcf9 PARSED group call signal:",e),Xt(e)}catch(n){console.error("\u274c Failed to parse group call signal:",n)}});n?(t.push(n),console.log("\u2705 Successfully subscribed to group:",e.name)):console.warn("\u26a0\ufe0f Subscription returned null for group:",e.name)}catch(n){console.error("\u274c Failed to subscribe to group video call:",e.id,n)}})},1e3),()=>{clearTimeout(n),console.log("\ud83e\uddf9 Cleaning up",t.length,"group video call subscriptions"),t.forEach(e=>{try{e&&e.unsubscribe&&e.unsubscribe()}catch(t){console.warn("Failed to unsubscribe:",t)}})}},[o,Xt]);const Yt=e=>{z(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Zt=async()=>{if(ie.trim()){ce(!0),pe(null),de(null);try{const e=await(0,B.Tp)(ie.trim());e?de(e):pe("Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi d\xf9ng v\u1edbi s\u1ed1 \u0111i\u1ec7n tho\u1ea1i n\xe0y")}catch(e){pe(e.message||"T\xecm ki\u1ebfm th\u1ea5t b\u1ea1i")}finally{ce(!1)}}else pe("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i")},en=e=>{const t=(new Date).getTime()-e.getTime();return t<6e4?"V\u1eeba xong":t<36e5?"".concat(Math.floor(t/6e4)," ph\xfat tr\u01b0\u1edbc"):t<864e5?"".concat(Math.floor(t/36e5)," gi\u1edd tr\u01b0\u1edbc"):t<6048e5?"".concat(Math.floor(t/864e5)," ng\xe0y tr\u01b0\u1edbc"):e.toLocaleDateString("vi-VN")},tn=e=>e.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),nn=(0,t.useCallback)(async()=>{if(u&&"group"===u.type)if(null!==v&&void 0!==v&&v.id)if(Je||He)alert("\u26a0\ufe0f B\u1ea1n \u0111ang trong cu\u1ed9c g\u1ecdi kh\xe1c. Vui l\xf2ng k\u1ebft th\xfac cu\u1ed9c g\u1ecdi hi\u1ec7n t\u1ea1i tr\u01b0\u1edbc.");else if(Ce||Se)alert("\u26a0\ufe0f B\u1ea1n \u0111ang trong cu\u1ed9c g\u1ecdi 1-1. Vui l\xf2ng k\u1ebft th\xfac cu\u1ed9c g\u1ecdi hi\u1ec7n t\u1ea1i tr\u01b0\u1edbc.");else try{const e=await(async(e,t)=>{const n=localStorage.getItem("token");return(await Cn.post("".concat(s.J,"/group-video-call/initiate"),{groupId:e,initiatorId:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}})).data})(u.id,v.id);qe(e),Ke(!0)}catch(e){console.error("Error starting group call:",e),alert("Kh\xf4ng th\u1ec3 b\u1eaft \u0111\u1ea7u cu\u1ed9c g\u1ecdi nh\xf3m")}else alert("Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin ng\u01b0\u1eddi d\xf9ng");else alert("Vui l\xf2ng ch\u1ecdn m\u1ed9t nh\xf3m \u0111\u1ec3 g\u1ecdi video")},[u,v,Je,He,Ce,Se]),rn=(0,t.useCallback)(async()=>{if(Qe)if(Je||He)alert("\u26a0\ufe0f B\u1ea1n \u0111ang trong cu\u1ed9c g\u1ecdi kh\xe1c. Vui l\xf2ng k\u1ebft th\xfac cu\u1ed9c g\u1ecdi hi\u1ec7n t\u1ea1i tr\u01b0\u1edbc.");else if(Ce||Se)alert("\u26a0\ufe0f B\u1ea1n \u0111ang trong cu\u1ed9c g\u1ecdi 1-1. Vui l\xf2ng k\u1ebft th\xfac cu\u1ed9c g\u1ecdi hi\u1ec7n t\u1ea1i tr\u01b0\u1edbc.");else if(null!==v&&void 0!==v&&v.id)try{const e=await(async(e,t)=>{const n=localStorage.getItem("token");return(await Cn.post("".concat(s.J,"/group-video-call/").concat(e,"/join"),{userId:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}})).data})(Qe.id,v.id);qe(e),Ke(!0),$e(!1)}catch(n){var e,t;console.error("Error joining group call:",n),alert("Kh\xf4ng th\u1ec3 tham gia cu\u1ed9c g\u1ecdi: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message))}else alert("Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin ng\u01b0\u1eddi d\xf9ng")},[Qe,v,Je,He,Ce,Se]);(0,t.useEffect)(()=>{let e;return Se&&Pt.current&&(e=setInterval(()=>{const e=(new Date).getTime()-Pt.current.getTime(),t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);Be("".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0")))},1e3)),()=>{e&&clearInterval(e)}},[Se]);const an=o.filter(e=>e.name.toLowerCase().includes(y.toLowerCase()));return v?(0,c.jsxs)("div",{className:"chat-container",children:[(0,c.jsxs)("div",{className:"chat-sidebar ".concat(w?"open":"closed"),children:[(0,c.jsxs)("div",{className:"sidebar-header",children:[(0,c.jsx)("h2",{children:"Tin nh\u1eafn"}),(0,c.jsxs)("div",{className:"sidebar-actions",children:[(0,c.jsx)("button",{className:"create-group-btn",title:"T\u1ea1o nh\xf3m m\u1edbi",onClick:()=>{I(!0),$("create")},children:"\u2795 Nh\xf3m"}),(0,c.jsx)("button",{className:"sidebar-toggle",onClick:()=>N(!w),children:w?"\u2190":"\u2192"})]})]}),(0,c.jsx)("div",{className:"search-box",children:(0,c.jsx)("input",{type:"text",placeholder:"T\xecm ki\u1ebfm cu\u1ed9c tr\xf2 chuy\u1ec7n...",value:y,onChange:e=>x(e.target.value),className:"search-input"})}),(0,c.jsx)("div",{className:"chat-rooms-list",children:an.map(e=>(0,c.jsxs)("div",{className:"chat-room-item ".concat((null===u||void 0===u?void 0:u.id)===e.id?"active":""),onClick:()=>(async e=>{try{d(e),await qt(e),setTimeout(()=>{Ut()},200)}catch(t){console.error("Select chat room failed",t)}})(e),children:[(0,c.jsxs)("div",{className:"room-avatar",children:[e.avatar?(0,c.jsx)("img",{src:e.avatar,alt:e.name}):(0,c.jsx)("div",{className:"avatar-placeholder",children:e.name.charAt(0).toUpperCase()}),e.isOnline&&(0,c.jsx)("div",{className:"online-indicator"})]}),(0,c.jsxs)("div",{className:"room-info",children:[(0,c.jsxs)("div",{className:"room-header",children:[(0,c.jsxs)("h4",{className:"room-name",children:[e.name," ","group"===e.type&&(0,c.jsx)("span",{className:"badge-group",children:"Nh\xf3m"})]}),e.lastMessageTime&&(0,c.jsx)("span",{className:"last-time",children:en(e.lastMessageTime)})]}),(0,c.jsxs)("div",{className:"room-footer",children:[(0,c.jsx)("p",{className:"last-message",children:e.lastMessage||"Ch\u01b0a c\xf3 tin nh\u1eafn"}),e.unreadCount>0&&(0,c.jsx)("span",{className:"unread-badge",children:e.unreadCount})]})]})]},e.id))})]}),(0,c.jsx)("div",{className:"chat-main",children:u?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"chat-header",children:[(0,c.jsxs)("div",{className:"chat-info",children:[(0,c.jsxs)("div",{className:"chat-avatar",children:[u.avatar?(0,c.jsx)("img",{src:u.avatar,alt:u.name}):(0,c.jsx)("div",{className:"avatar-placeholder",children:u.name.charAt(0).toUpperCase()}),u.isOnline&&(0,c.jsx)("div",{className:"online-indicator"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{children:u.name}),(0,c.jsx)("p",{className:"chat-status",children:u.isOnline?"\u0110ang ho\u1ea1t \u0111\u1ed9ng":"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng"})]})]}),(0,c.jsxs)("div",{className:"chat-actions",children:[(0,c.jsx)("button",{className:"action-btn",onClick:async()=>{if(u){wt(!0),mt(!0);try{const e=await(0,U.A6)(u.id),t=Array.from(new Set(e.map(e=>e.sender))).map(e=>(0,B.kl)(e)),n=await Promise.all(t),r={};n.forEach(e=>{e&&(r[e.idUser]={name:"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||e.username||"Unknown",avatar:e.avatar})}),E(e=>(0,i.A)((0,i.A)({},e),r)),vt(e)}catch(e){console.error("\u274c T\u1ea3i danh s\xe1ch \u1ea3nh th\u1ea5t b\u1ea1i:",e),alert(e.message||"Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch \u1ea3nh. Vui l\xf2ng th\u1eed l\u1ea1i."),mt(!1)}finally{wt(!1)}}},title:"Xem t\u1ea5t c\u1ea3 \u1ea3nh",children:"\ud83d\uddbc\ufe0f"}),(0,c.jsx)("button",{className:"action-btn",onClick:async()=>{if(u){kt(!0),pt(!0);try{const e=await(0,U.FH)(u.id),t=Array.from(new Set(e.map(e=>e.sender))).map(e=>(0,B.kl)(e)),n=await Promise.all(t),r={};n.forEach(e=>{e&&(r[e.idUser]={name:"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||e.username||"Unknown",avatar:e.avatar})}),E(e=>(0,i.A)((0,i.A)({},e),r)),yt(e)}catch(e){console.error("\u274c T\u1ea3i danh s\xe1ch file th\u1ea5t b\u1ea1i:",e),alert(e.message||"Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch file. Vui l\xf2ng th\u1eed l\u1ea1i."),pt(!1)}finally{kt(!1)}}},title:"Xem t\u1ea5t c\u1ea3 file",children:"\ud83d\udcc1"}),(0,c.jsx)("button",{className:"action-btn",children:"\ud83d\udcde"}),"private"===u.type&&(0,c.jsx)("button",{className:"action-btn",onClick:async()=>{if(!u||!v||!Ve)return;const e=u.participants.find(e=>e!==v.id);if(!e)return;console.log("\ud83d\udcde Initiating call from:",v.id,"to:",e);let t=null;try{await Ve.initializeConnection("temp-id",e),console.log("\ud83c\udfa5 Testing media access...");(await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach(e=>e.stop()),console.log("\u2705 Media access granted"),t=await async function(e,t){const n=(0,h.gf)();console.log("\ud83d\udcde Initiating call API:",{callerId:e,calleeId:t});const r=await fetch("".concat(s.J,"/video-call/initiate"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({callerId:e,calleeId:t})});if(console.log("\ud83d\udcde API Response status:",r.status),console.log("\ud83d\udcde API Response headers:",r.headers),!r.ok){const e=await r.text();throw console.error("\ud83d\udcde API Error response:",e),new Error(e)}const a=await r.text();if(console.log("\ud83d\udcde API Response text:",a),!a)throw new Error("Empty response from server");try{return JSON.parse(a)}catch(o){throw console.error("\ud83d\udcde JSON parse error:",o),console.error("\ud83d\udcde Response text was:",a),new Error("Invalid JSON response from server")}}(v.id,e),je(t),_e(!0),Pt.current=new Date,await Ve.initializeConnection(t.id,e),Ve.onLocalStreamReceived=e=>{console.log("\ud83d\udcf9 Local stream received (caller):",e),Ie(e)},Ve.onRemoteStreamReceived=e=>{console.log("\ud83d\udcf9 Remote stream received (caller):",e),Oe(e),e||ze(!0)},Ve.onRemoteVideoStatusChanged=e=>{console.log("\ud83c\udf9b\ufe0f Remote video status (caller):",e),ze(e)},Ve.onRemoteAudioStatusChanged=e=>{console.log("\ud83c\udf9a\ufe0f Remote audio status (caller):",e)},Ve.onCallEnded=()=>{Wt()},console.log("\ud83d\udd04 Starting WebRTC call..."),await Ve.startCall(),console.log("\u2705 WebRTC call started successfully"),ze(!0)}catch(n){if(console.error("\u274c Failed to initiate call:",n),t)try{await Z(t.id),console.log("\ud83d\uddd1\ufe0f Cleaned up failed call from database")}catch(r){console.error("\u274c Failed to cleanup call:",r)}Wt();const e=n.message;e.includes("Permission denied")||e.includes("NotAllowedError")?alert("Vui l\xf2ng cho ph\xe9p quy\u1ec1n truy c\u1eadp camera v\xe0 microphone \u0111\u1ec3 th\u1ef1c hi\u1ec7n cu\u1ed9c g\u1ecdi video."):e.includes("NotFoundError")?alert("Kh\xf4ng t\xecm th\u1ea5y camera ho\u1eb7c microphone. Vui l\xf2ng ki\u1ec3m tra thi\u1ebft b\u1ecb c\u1ee7a b\u1ea1n."):alert("Kh\xf4ng th\u1ec3 kh\u1edfi t\u1ea1o cu\u1ed9c g\u1ecdi. Vui l\xf2ng th\u1eed l\u1ea1i: "+e)}},disabled:!!Se,title:"G\u1ecdi video 1-1",children:"\ud83d\udcf9"}),"group"===u.type&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"action-btn",onClick:nn,disabled:!!He||!!Se,title:"G\u1ecdi video nh\xf3m",children:"\ud83d\udcf9"}),(0,c.jsx)("button",{className:"action-btn",title:"Qu\u1ea3n l\xfd th\xe0nh vi\xean",onClick:()=>r("/groups/".concat(u.id,"/members")),children:"\ud83d\udc65"}),"ADMIN"===u.role&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"action-btn",title:"Th\xeam th\xe0nh vi\xean",onClick:()=>{u&&"group"===u.type&&($("add-members"),I(!0),z([]),re(null),oe(null))},children:"\u2795"}),(0,c.jsx)("button",{className:"action-btn delete-btn",title:"X\xf3a nh\xf3m",onClick:()=>ye(!0),children:"\ud83d\uddd1\ufe0f"})]})]})]})]}),(0,c.jsxs)("div",{className:"messages-area",ref:At,onScroll:e=>{const t=e.currentTarget;t.scrollHeight-t.scrollTop-t.clientHeight<100&&(Lt.current=!0),Lt.current&&t.scrollTop<100&&!nt&&at&&Jt()},children:[(0,c.jsx)("div",{style:{flex:1}})," ",nt&&(0,c.jsx)("div",{style:{textAlign:"center",padding:"10px",color:"#888"},children:"\u23f3 \u0110ang t\u1ea3i th\xeam tin nh\u1eafn..."}),m.map(e=>(0,c.jsxs)("div",{className:"message ".concat(e.isOwn?"own":"other"),children:[!e.isOwn&&(0,c.jsx)("div",{className:"message-avatar",children:e.senderAvatar?(0,c.jsx)("img",{src:e.senderAvatar,alt:e.senderName}):(0,c.jsx)("div",{className:"avatar-placeholder",children:e.senderName.charAt(0).toUpperCase()})}),(0,c.jsxs)("div",{className:"message-content",children:[!e.isOwn&&(0,c.jsx)("span",{className:"message-sender",children:e.senderName}),(0,c.jsxs)("div",{className:"message-bubble-wrapper",children:[(0,c.jsx)("div",{className:"message-bubble",children:"image"===e.type&&e.imageUrl?(0,c.jsx)(c.Fragment,{children:Dt(e)?(0,c.jsxs)("div",{className:"blocked-image-container",children:[(0,c.jsx)("div",{className:"blocked-image-icon",children:"\ud83d\udeab"}),(0,c.jsxs)("div",{className:"blocked-image-text",children:[(0,c.jsx)("strong",{children:"\u1ea2nh vi ph\u1ea1m ch\xednh s\xe1ch"}),(0,c.jsx)("p",{children:"N\u1ed9i dung kh\xf4ng ph\xf9 h\u1ee3p"}),(0,c.jsxs)("p",{style:{fontSize:"0.85rem",marginTop:"4px"},children:[e.topLabel,": ",(100*Math.max(e.sexyScore||0,e.pornScore||0,e.hentaiScore||0)).toFixed(1),"%"]})]})]}):Ft(e)&&!Mt(e.id)?(0,c.jsxs)("div",{className:"sensitive-image-container",children:[zt(e)&&(0,c.jsxs)("div",{className:"sensitive-warning-badge",children:["\u26a0\ufe0f N\u1ed9i dung nh\u1ea1y c\u1ea3m",(0,c.jsxs)("span",{className:"warning-score",children:[e.topLabel," (",(100*(e.confidence||0)).toFixed(0),"%)"]})]}),(0,c.jsxs)("div",{className:"blurred-image-wrapper",children:[(0,c.jsx)("img",{src:e.imageUrl,alt:"Attachment",className:"message-image blurred"}),(0,c.jsxs)("div",{className:"reveal-overlay",children:[(0,c.jsx)("button",{className:"reveal-btn",onClick:()=>Bt(e.id),children:"\ud83d\udc41\ufe0f Nh\u1ea5n \u0111\u1ec3 xem \u1ea3nh"}),(0,c.jsx)("div",{className:"warning-text",children:e.validationMessage||"\u1ea2nh c\xf3 n\u1ed9i dung nh\u1ea1y c\u1ea3m"})]})]})]}):(0,c.jsx)("div",{className:"normal-image-container",children:(0,c.jsx)("img",{src:e.imageUrl,alt:"Attachment",className:"message-image",onClick:()=>window.open(e.imageUrl,"_blank"),style:{cursor:"zoom-in"}})})}):"file"===e.type&&e.fileUrl&&Kt(e.fileName,e.fileUrl)?(0,c.jsx)("video",{className:"message-video",src:e.fileUrl,controls:!0,preload:"metadata"}):"file"===e.type&&e.fileUrl?(0,c.jsxs)("div",{className:"file-attachment",children:[(0,c.jsx)("div",{className:"file-icon",children:"\ud83d\udcce"}),(0,c.jsxs)("div",{className:"file-info",children:[(0,c.jsx)("div",{className:"file-name",children:e.fileName}),(0,c.jsx)("div",{className:"file-size",children:e.fileSize?(e.fileSize/1024).toFixed(2)+" KB":"Unknown size"})]}),(0,c.jsx)("button",{onClick:()=>Gt(e.fileUrl,e.fileName),className:"file-download-btn",title:"T\u1ea3i xu\u1ed1ng file",disabled:et[e.fileUrl],children:et[e.fileUrl]?"\u23f3 \u0110ang t\u1ea3i...":"\u2b07\ufe0f T\u1ea3i xu\u1ed1ng"})]}):(0,c.jsx)("p",{children:e.content})}),e.isOwn&&(0,c.jsxs)("div",{className:"message-actions",children:[(0,c.jsx)("button",{className:"message-menu-btn",onClick:()=>{(null===lt||void 0===lt?void 0:lt.id)===e.id?ct(null):ct(e)},title:"T\xf9y ch\u1ecdn",children:"\u22ee"}),(null===lt||void 0===lt?void 0:lt.id)===e.id&&(0,c.jsx)("div",{className:"message-dropdown-menu",children:(0,c.jsx)("button",{className:"dropdown-item delete-item",onClick:$t,disabled:ut,children:ut?"\u23f3 \u0110ang x\xf3a...":"\ud83d\uddd1\ufe0f X\xf3a tin nh\u1eafn"})})]})]}),(0,c.jsx)("span",{className:"message-time",children:tn(e.timestamp)})]})]},e.id)),(0,c.jsx)("div",{ref:Et})]}),(0,c.jsx)("form",{className:"message-input-area",onSubmit:e=>{var t;if(e.preventDefault(),!p.trim()||!u||!v)return;const n=p.trim();g(""),"group"===u.type?(0,U.RE)(u.id,v.id,n).catch(e=>console.error("Send group message failed",e)):L("/app/chat.send",{conversationId:u.id,senderId:v.id,content:n}),setTimeout(()=>{Ut()},100),null===(t=Tt.current)||void 0===t||t.focus()},children:(0,c.jsxs)("div",{className:"input-container",children:[(0,c.jsx)("input",{type:"file",ref:It,accept:"image/*",className:"hidden-file-input",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n&&u&&v)if(n.type.startsWith("image/"))if(n.size>5242880)alert("K\xedch th\u01b0\u1edbc \u1ea3nh kh\xf4ng \u0111\u01b0\u1ee3c v\u01b0\u1ee3t qu\xe1 5MB!");else{try{"group"===u.type?await(0,U.yD)(u.id,v.id,n):await(0,U.z)(u.id,v.id,n)}catch(r){console.error("Send image failed:",r),alert(r.message||"Kh\xf4ng th\u1ec3 g\u1eedi \u1ea3nh")}It.current&&(It.current.value="")}else alert("Vui l\xf2ng ch\u1ecdn file \u1ea3nh!")},"aria-label":"Upload image"}),(0,c.jsx)("input",{type:"file",ref:Rt,accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar",className:"hidden-file-input",onChange:async e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r||!u||!v)return;if(r.size>10485760)return void alert("K\xedch th\u01b0\u1edbc file kh\xf4ng \u0111\u01b0\u1ee3c v\u01b0\u1ee3t qu\xe1 10MB!");if(["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","application/zip","application/x-rar-compressed"].includes(r.type)){try{const{sendFileMessage:e,sendGroupFileMessage:t}=await Promise.resolve().then(n.bind(n,3190));"group"===u.type?await t(u.id,v.id,r):await e(u.id,v.id,r)}catch(a){console.error("Send file failed:",a),alert(a.message||"Kh\xf4ng th\u1ec3 g\u1eedi file")}Rt.current&&(Rt.current.value="")}else alert("Lo\u1ea1i file kh\xf4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3! Ch\u1ec9 ch\u1ea5p nh\u1eadn PDF, DOC, DOCX, XLS, XLSX, TXT, ZIP, RAR")},"aria-label":"Upload file"}),(0,c.jsx)("input",{type:"file",ref:Ot,accept:"video/*",className:"hidden-file-input",onChange:async e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r&&u&&v)if(console.log("\ud83d\udcf9 Video selected:",{name:r.name,type:r.type,size:r.size,sizeMB:(r.size/1048576).toFixed(2)+" MB"}),r.type.startsWith("video/"))if(r.size>52428800)alert("K\xedch th\u01b0\u1edbc video kh\xf4ng \u0111\u01b0\u1ee3c v\u01b0\u1ee3t qu\xe1 50MB!\nK\xedch th\u01b0\u1edbc hi\u1ec7n t\u1ea1i: ".concat((r.size/1048576).toFixed(2)," MB"));else if(0!==r.size){try{console.log("\ud83d\udce4 Uploading video...");const{sendFileMessage:e,sendGroupFileMessage:t}=await Promise.resolve().then(n.bind(n,3190));"group"===u.type?await t(u.id,v.id,r):await e(u.id,v.id,r),console.log("\u2705 Video uploaded successfully")}catch(i){var a,o;console.error("\u274c Send video failed:",i);const e=(null===(a=i.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||i.message||"Kh\xf4ng th\u1ec3 g\u1eedi video";alert("L\u1ed7i t\u1ea3i video:\n".concat(e,"\n\nG\u1ee3i \xfd:\n- Ki\u1ec3m tra k\xedch th\u01b0\u1edbc file (t\u1ed1i \u0111a 50MB)\n- Ki\u1ec3m tra \u0111\u1ecbnh d\u1ea1ng video (MP4, WebM, ...)\n- Th\u1eed file video kh\xe1c"))}Ot.current&&(Ot.current.value="")}else alert("File video tr\u1ed1ng! Vui l\xf2ng ch\u1ecdn file kh\xe1c.");else alert("Vui l\xf2ng ch\u1ecdn file video!")},"aria-label":"Upload video"}),(0,c.jsx)("button",{type:"button",className:"attachment-btn image-btn",onClick:()=>{var e;return null===(e=It.current)||void 0===e?void 0:e.click()},title:"G\u1eedi \u1ea3nh",children:"\ufe0f"}),(0,c.jsx)("button",{type:"button",className:"attachment-btn video-btn",onClick:()=>{var e;return null===(e=Ot.current)||void 0===e?void 0:e.click()},title:"G\u1eedi video",children:"\ud83c\udfac"}),(0,c.jsx)("button",{type:"button",className:"attachment-btn file-btn",onClick:()=>{var e;return null===(e=Rt.current)||void 0===e?void 0:e.click()},title:"G\u1eedi file",children:"\ud83d\udcce"}),(0,c.jsx)("input",{ref:Tt,type:"text",placeholder:"Nh\u1eadp tin nh\u1eafn...",value:p,onChange:e=>g(e.target.value),className:"message-input"}),(0,c.jsx)("button",{type:"button",className:"emoji-btn",children:"\ud83d\ude0a"}),(0,c.jsx)("button",{type:"submit",className:"send-btn",disabled:!p.trim(),children:"\u27a4"})]})})]}):(0,c.jsx)("div",{className:"no-chat-selected",children:(0,c.jsxs)("div",{className:"welcome-message",children:[(0,c.jsx)("h3",{children:"Ch\xe0o m\u1eebng \u0111\u1ebfn v\u1edbi ChatWeb!"}),(0,c.jsx)("p",{children:"Ch\u1ecdn m\u1ed9t cu\u1ed9c tr\xf2 chuy\u1ec7n \u0111\u1ec3 b\u1eaft \u0111\u1ea7u nh\u1eafn tin"})]})})}),Ne&&(0,c.jsx)(te,{call:Ne,onAccept:()=>(async e=>{if(Ve)try{console.log("\ud83d\udcf2 Accepting call:",e.id),ke(null),je(e),_e(!0),Pt.current=new Date;const t=e.callerId===(null===v||void 0===v?void 0:v.id)?e.calleeId:e.callerId;console.log("\ud83d\udc65 Other user ID for callee:",t),await Ve.initializeConnection(e.id,t),Ve.onLocalStreamReceived=e=>{console.log("\ud83d\udcf9 Local stream received (callee):",e),console.log("\ud83d\udcf9 Stream tracks:",e?e.getTracks():[]),Ie(e)},Ve.onRemoteStreamReceived=e=>{console.log("\ud83d\udcf9 Remote stream received (callee):",e),Oe(e),e||ze(!0)},Ve.onRemoteVideoStatusChanged=e=>{console.log("\ud83c\udf9b\ufe0f Remote video status (callee):",e),ze(e)},Ve.onRemoteAudioStatusChanged=e=>{console.log("\ud83c\udf9a\ufe0f Remote audio status (callee):",e)},Ve.onCallEnded=()=>{Wt()},console.log("\ud83d\udcde Calling answerCall()..."),await Ve.answerCall(),console.log("\u2705 answerCall() completed"),ze(!0),L("/app/video-call/accept",{callId:e.id})}catch(t){console.error("Failed to accept call:",t),alert("Kh\xf4ng th\u1ec3 nh\u1eadn cu\u1ed9c g\u1ecdi. Vui l\xf2ng th\u1eed l\u1ea1i.")}})(Ne),onReject:()=>{return e=Ne,ke(null),void L("/app/video-call/reject",{callId:e.id});var e}}),Se&&(0,c.jsx)(ne,{isVisible:Ce,localStream:Te,remoteStream:Re,friendName:(null===v||void 0===v?void 0:v.id)===Se.callerId?Se.calleeName:Se.callerName,friendAvatar:(null===v||void 0===v?void 0:v.id)===Se.callerId?Se.calleeAvatar:Se.callerAvatar,isVideoEnabled:Pe,isAudioEnabled:Ue,callDuration:Me,onToggleVideo:()=>{if(!Ve)return;const e=Ve.toggleVideo();Le(!e)},onToggleAudio:()=>{if(!Ve)return;const e=Ve.toggleMute();De(!e)},onEndCall:Ht,onMinimize:()=>{Ae(!Ee)},isMinimized:Ee}),Ge&&Qe&&(0,c.jsx)("div",{className:"group-call-notification",children:(0,c.jsxs)("div",{className:"notification-content",children:[(0,c.jsx)("h3",{children:"\ud83d\udcde Cu\u1ed9c g\u1ecdi video nh\xf3m"}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:Qe.initiatorName})," \u0111ang g\u1ecdi trong nh\xf3m"," ",(0,c.jsx)("strong",{children:Qe.groupName})]}),(0,c.jsxs)("p",{className:"participant-info",children:["\ud83d\udc65 ",(null===(e=Qe.participants)||void 0===e?void 0:e.length)||0," ng\u01b0\u1eddi \u0111ang trong cu\u1ed9c g\u1ecdi"]}),(0,c.jsxs)("div",{className:"notification-actions",children:[(0,c.jsx)("button",{className:"btn-join",onClick:rn,children:"\u2705 Tham gia"}),(0,c.jsx)("button",{className:"btn-decline",onClick:()=>{$e(!1),Xe(null)},children:"\u274c T\u1eeb ch\u1ed1i"})]})]})}),He&&Je&&(0,c.jsx)(An,{callId:He.id,groupId:He.groupId,groupName:He.groupName,initiatorId:He.initiatorId,currentUserId:(null===v||void 0===v?void 0:v.id)||"",participants:He.participants,onCallEnded:()=>{Ke(!1),qe(null),$e(!1),Xe(null)},stompClient:A}),T&&(0,c.jsx)("div",{className:"group-modal-overlay",onClick:()=>I(!1),children:(0,c.jsxs)("div",{className:"group-modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"group-modal-header",children:[(0,c.jsx)("h3",{children:"create"===G?"T\u1ea1o nh\xf3m chat":"Th\xeam th\xe0nh vi\xean"}),(0,c.jsx)("button",{onClick:()=>I(!1),children:"\u2716"})]}),(0,c.jsxs)("div",{className:"group-modal-tabs",children:[(0,c.jsx)("button",{className:"create"===G?"active":"",onClick:()=>$("create"),children:"T\u1ea1o nh\xf3m"}),"group"===(null===u||void 0===u?void 0:u.type)&&"ADMIN"===u.role&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"add-members"===G?"active":"",onClick:()=>{$("add-members"),z([]),re(null),oe(null)},children:"Th\xeam b\u1ea1n b\xe8"}),(0,c.jsx)("button",{className:"add-by-phone"===G?"active":"",onClick:()=>{$("add-by-phone"),se(""),de(null),pe(null),ve(null)},children:"Th\xeam b\u1eb1ng S\u0110T"})]})]}),"create"===G&&(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),v)if(R.trim()){W(!0),q(null),K(null);try{const e=await(0,U.wj)(v.id,R.trim(),F);K("T\u1ea1o nh\xf3m th\xe0nh c\xf4ng"),D(""),z([]),setTimeout(()=>{I(!1),setTimeout(()=>{l(t=>{const n=t.find(t=>t.id===e.id);return n&&(d(n),f([])),t})},300)},800)}catch(t){q((null===t||void 0===t?void 0:t.message)||"T\u1ea1o nh\xf3m th\u1ea5t b\u1ea1i")}finally{W(!1)}}else q("T\xean nh\xf3m kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng")},className:"group-form",children:[(0,c.jsx)("label",{children:"T\xean nh\xf3m"}),(0,c.jsx)("input",{type:"text",value:R,placeholder:"V\xed d\u1ee5: D\u1ef1 \xe1n A",onChange:e=>D(e.target.value)}),(0,c.jsx)("label",{children:"Ch\u1ecdn th\xe0nh vi\xean"}),(0,c.jsx)("div",{className:"friends-select-list",children:j.filter(e=>e.userId!==v.id).map(e=>(0,c.jsxs)("div",{className:"friend-select-item ".concat(F.includes(e.userId)?"selected":""),onClick:()=>Yt(e.userId),children:[(0,c.jsx)("input",{type:"checkbox",checked:F.includes(e.userId),onChange:()=>Yt(e.userId),onClick:e=>e.stopPropagation(),"aria-label":"Ch\u1ecdn ".concat(e.firstName," ").concat(e.lastName).trim(),title:"Ch\u1ecdn ".concat(e.firstName," ").concat(e.lastName).trim()}),(0,c.jsx)("span",{children:"".concat(e.firstName," ").concat(e.lastName).trim()})]},e.userId))}),H&&(0,c.jsx)("div",{className:"group-error",children:H}),J&&(0,c.jsx)("div",{className:"group-success",children:J}),(0,c.jsx)("button",{type:"submit",className:"create-group-submit",disabled:V,children:V?"\u0110ang t\u1ea1o...":"T\u1ea1o nh\xf3m"})]}),"add-members"===G&&"group"===(null===u||void 0===u?void 0:u.type)&&(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u&&"group"===u.type)if(0!==F.length){X(!0),re(null),oe(null);try{for(const e of F)u.participants.includes(e)||await(0,U.U7)(u.id,e);l(e=>e.map(e=>e.id===u.id?(0,i.A)((0,i.A)({},e),{},{participants:Array.from(new Set([...e.participants,...F]))}):e)),d(e=>e?(0,i.A)((0,i.A)({},e),{},{participants:Array.from(new Set([...e.participants,...F]))}):e),oe("\u0110\xe3 th\xeam th\xe0nh vi\xean"),setTimeout(()=>I(!1),900)}catch(t){re((null===t||void 0===t?void 0:t.message)||"Th\xeam th\xe0nh vi\xean th\u1ea5t b\u1ea1i")}finally{X(!1)}}else re("Ch\u1ecdn \xedt nh\u1ea5t 1 th\xe0nh vi\xean")},className:"group-form",children:[(0,c.jsx)("label",{children:"Ch\u1ecdn th\xe0nh vi\xean \u0111\u1ec3 th\xeam"}),(0,c.jsxs)("div",{className:"friends-select-list",children:[j.filter(e=>e.userId!==v.id&&!u.participants.includes(e.userId)).map(e=>(0,c.jsxs)("div",{className:"friend-select-item ".concat(F.includes(e.userId)?"selected":""),onClick:()=>Yt(e.userId),children:[(0,c.jsx)("input",{type:"checkbox",checked:F.includes(e.userId),onChange:()=>Yt(e.userId),onClick:e=>e.stopPropagation(),"aria-label":"Ch\u1ecdn ".concat(e.firstName," ").concat(e.lastName).trim(),title:"Ch\u1ecdn ".concat(e.firstName," ").concat(e.lastName).trim()}),(0,c.jsx)("span",{children:"".concat(e.firstName," ").concat(e.lastName).trim()})]},e.userId)),0===j.filter(e=>e.userId!==v.id&&!u.participants.includes(e.userId)).length&&(0,c.jsx)("div",{className:"empty-hint",children:"Kh\xf4ng c\xf2n b\u1ea1n b\xe8 n\xe0o \u0111\u1ec3 th\xeam"})]}),Y&&(0,c.jsx)("div",{className:"group-error",children:Y}),ae&&(0,c.jsx)("div",{className:"group-success",children:ae}),(0,c.jsx)("button",{type:"submit",className:"create-group-submit",disabled:Q,children:Q?"\u0110ang th\xeam...":"Th\xeam"})]}),"add-by-phone"===G&&"group"===(null===u||void 0===u?void 0:u.type)&&(0,c.jsxs)("div",{className:"group-form",children:[(0,c.jsx)("label",{children:"T\xecm ki\u1ebfm ng\u01b0\u1eddi d\xf9ng b\u1eb1ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,c.jsxs)("div",{className:"phone-search-container",children:[(0,c.jsx)("input",{type:"tel",value:ie,placeholder:"Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",onChange:e=>se(e.target.value),onKeyPress:e=>"Enter"===e.key&&Zt()}),(0,c.jsx)("button",{type:"button",onClick:Zt,disabled:le,className:"search-phone-btn",children:le?"\u23f3 \u0110ang t\xecm...":"\ud83d\udd0d T\xecm ki\u1ebfm"})]}),ue&&(0,c.jsxs)("div",{className:"found-user-card",children:[(0,c.jsxs)("div",{className:"found-user-info",children:[ue.avatar?(0,c.jsx)("img",{src:ue.avatar,alt:"Avatar",className:"found-user-avatar"}):(0,c.jsx)("div",{className:"found-user-avatar-placeholder",children:(ue.firstName||ue.username||"U").charAt(0).toUpperCase()}),(0,c.jsxs)("div",{className:"found-user-details",children:[(0,c.jsx)("div",{className:"found-user-name",children:"".concat(ue.firstName||""," ").concat(ue.lastName||"").trim()||ue.username}),ue.phoneNumber&&(0,c.jsx)("div",{className:"found-user-phone",children:ue.phoneNumber})]})]}),(0,c.jsx)("button",{type:"button",onClick:async()=>{if(u&&"group"===u.type&&ue){me(!0),pe(null),ve(null);try{await(0,U.so)(u.id,ue.idUser),l(e=>e.map(e=>e.id===u.id?(0,i.A)((0,i.A)({},e),{},{participants:[...e.participants,ue.idUser]}):e)),d(e=>e?(0,i.A)((0,i.A)({},e),{},{participants:[...e.participants,ue.idUser]}):e),ve("\u0110\xe3 th\xeam ".concat(ue.firstName||""," ").concat(ue.lastName||"").trim()||"\u0110\xe3 th\xeam th\xe0nh vi\xean"),se(""),de(null),setTimeout(()=>I(!1),1500)}catch(e){pe(e.message||"Kh\xf4ng th\u1ec3 th\xeam th\xe0nh vi\xean")}finally{me(!1)}}},disabled:he,className:"add-found-user-btn",children:he?"\u23f3 \u0110ang th\xeam...":"\u2795 Th\xeam v\xe0o nh\xf3m"})]}),fe&&(0,c.jsx)("div",{className:"group-error",children:fe}),ge&&(0,c.jsx)("div",{className:"group-success",children:ge})]})]})}),be&&(0,c.jsx)("div",{className:"group-modal-overlay",onClick:()=>ye(!1),children:(0,c.jsxs)("div",{className:"group-modal delete-confirm-modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"group-modal-header",children:[(0,c.jsx)("h3",{children:"\u26a0\ufe0f X\xe1c nh\u1eadn x\xf3a nh\xf3m"}),(0,c.jsx)("button",{onClick:()=>ye(!1),children:"\u2716"})]}),(0,c.jsxs)("div",{className:"delete-confirm-content",children:[(0,c.jsxs)("p",{children:["B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a nh\xf3m ",(0,c.jsx)("strong",{children:null===u||void 0===u?void 0:u.name}),"?"]}),(0,c.jsx)("p",{className:"warning-text",children:"T\u1ea5t c\u1ea3 tin nh\u1eafn v\xe0 th\xe0nh vi\xean s\u1ebd b\u1ecb x\xf3a v\u0129nh vi\u1ec5n!"})]}),(0,c.jsxs)("div",{className:"delete-confirm-actions",children:[(0,c.jsx)("button",{className:"cancel-btn",onClick:()=>ye(!1),disabled:xe,children:"H\u1ee7y"}),(0,c.jsx)("button",{className:"delete-btn-confirm",onClick:async()=>{if(u&&v&&"group"===u.type)try{we(!0),await(0,U.Ni)(u.id,v.id),l(e=>e.filter(e=>e.id!==u.id)),d(null),f([]),ye(!1),alert("Nh\xf3m \u0111\xe3 \u0111\u01b0\u1ee3c x\xf3a th\xe0nh c\xf4ng!")}catch(e){console.error("Delete group failed:",e),alert(e.message||"Kh\xf4ng th\u1ec3 x\xf3a nh\xf3m")}finally{we(!1)}},disabled:xe,children:xe?"\u0110ang x\xf3a...":"X\xf3a nh\xf3m"})]})]})}),ht&&(0,c.jsx)("div",{className:"group-modal-overlay",onClick:()=>mt(!1),children:(0,c.jsxs)("div",{className:"group-modal images-modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"group-modal-header",children:[(0,c.jsx)("h3",{children:"\ud83d\uddbc\ufe0f T\u1ea5t c\u1ea3 \u1ea3nh trong cu\u1ed9c tr\xf2 chuy\u1ec7n"}),(0,c.jsx)("button",{onClick:()=>mt(!1),children:"\u2716"})]}),(0,c.jsx)("div",{className:"images-grid",children:xt?(0,c.jsx)("div",{className:"loading-message",children:"\u0110ang t\u1ea3i \u1ea3nh..."}):0===gt.length?(0,c.jsx)("div",{className:"empty-hint",children:"Ch\u01b0a c\xf3 \u1ea3nh n\xe0o trong cu\u1ed9c tr\xf2 chuy\u1ec7n n\xe0y"}):gt.map(e=>{const t=Math.max(e.sexyScore||0,e.pornScore||0,e.hentaiScore||0),n=!0===e.isSexy&&t>.95,r=!0===e.isSexy&&!n,a=Mt(e.id);return(0,c.jsxs)("div",{className:"image-item",children:[n?(0,c.jsxs)("div",{className:"blocked-image-container",style:{minHeight:"200px"},children:[(0,c.jsx)("div",{className:"blocked-image-icon",children:"\ud83d\udeab"}),(0,c.jsxs)("div",{className:"blocked-image-text",children:[(0,c.jsx)("strong",{children:"\u1ea2nh vi ph\u1ea1m"}),(0,c.jsxs)("p",{style:{fontSize:"0.8rem",marginTop:"4px"},children:[e.topLabel,": ",(100*t).toFixed(1),"%"]})]})]}):r&&!a?(0,c.jsxs)("div",{className:"sensitive-image-container",children:[e.isSexy&&(0,c.jsx)("div",{className:"sensitive-warning-badge",children:"\u26a0\ufe0f Nh\u1ea1y c\u1ea3m"}),(0,c.jsxs)("div",{className:"blurred-image-wrapper",children:[(0,c.jsx)("img",{src:e.imageUrl,alt:"Chat attachment",className:"blurred",style:{width:"100%",height:"200px",objectFit:"cover"}}),(0,c.jsx)("div",{className:"reveal-overlay",children:(0,c.jsx)("button",{className:"reveal-btn",onClick:()=>Bt(e.id),children:"\ud83d\udc41\ufe0f Xem"})})]})]}):(0,c.jsxs)(c.Fragment,{children:[e.isSexy&&!a&&(0,c.jsx)("div",{className:"sensitive-warning-badge",style:{position:"absolute",top:"8px",left:"8px",zIndex:1},children:"\u26a0\ufe0f"}),(0,c.jsx)("img",{src:e.imageUrl,alt:"Chat attachment",onClick:()=>{e.isSexy&&!a?Bt(e.id):window.open(e.imageUrl,"_blank")},style:{cursor:e.isSexy&&!a?"pointer":"zoom-in",width:"100%",height:"200px",objectFit:"cover"}})]}),(0,c.jsxs)("div",{className:"image-info",children:[(0,c.jsx)("span",{className:"image-sender",children:Qt(e.sender)}),(0,c.jsx)("span",{className:"image-time",children:tn(new Date(e.createdAt))})]})]},e.id)})})]})}),ft&&(0,c.jsx)("div",{className:"group-modal-overlay",onClick:()=>pt(!1),children:(0,c.jsxs)("div",{className:"group-modal files-modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"group-modal-header",children:[(0,c.jsx)("h3",{children:"\ud83d\udcc1 T\u1ea5t c\u1ea3 file trong cu\u1ed9c tr\xf2 chuy\u1ec7n"}),(0,c.jsx)("button",{onClick:()=>pt(!1),children:"\u2716"})]}),(0,c.jsx)("div",{className:"files-list",children:Nt?(0,c.jsx)("div",{className:"loading-message",children:"\u0110ang t\u1ea3i file..."}):0===bt.length?(0,c.jsx)("div",{className:"empty-hint",children:"Ch\u01b0a c\xf3 file n\xe0o trong cu\u1ed9c tr\xf2 chuy\u1ec7n n\xe0y"}):bt.map(e=>(0,c.jsxs)("div",{className:"file-list-item",children:[(0,c.jsx)("div",{className:"file-icon-large",children:"\ud83d\udcce"}),(0,c.jsxs)("div",{className:"file-details",children:[(0,c.jsx)("div",{className:"file-name-large",children:e.fileName}),(0,c.jsxs)("div",{className:"file-meta",children:[(0,c.jsx)("span",{className:"file-sender",children:Qt(e.sender)}),(0,c.jsx)("span",{className:"file-separator",children:"\u2022"}),(0,c.jsx)("span",{className:"file-size",children:e.fileSize?(e.fileSize/1024).toFixed(2)+" KB":"Unknown size"}),(0,c.jsx)("span",{className:"file-separator",children:"\u2022"}),(0,c.jsx)("span",{className:"file-time",children:tn(new Date(e.createdAt))})]})]}),(0,c.jsx)("button",{onClick:()=>Gt(e.fileUrl,e.fileName),className:"file-download-btn-large",title:"T\u1ea3i xu\u1ed1ng file",disabled:et[e.fileUrl],children:et[e.fileUrl]?"\u23f3":"\u2b07\ufe0f"})]},e.id))})]})})]}):(0,c.jsx)("div",{className:"chat-container",children:(0,c.jsxs)("div",{className:"chat-login-required",children:[(0,c.jsx)("h3",{children:"Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng chat"}),(0,c.jsx)("a",{href:"/login",className:"login-link",children:"\u0110\u0103ng nh\u1eadp ngay"})]})})},In=()=>(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"homepage-container",children:[(0,c.jsxs)("div",{className:"hero-section",children:[(0,c.jsxs)("div",{className:"hero-content",children:[(0,c.jsxs)("h1",{className:"hero-title",children:["Ch\xe0o m\u1eebng \u0111\u1ebfn v\u1edbi ",(0,c.jsx)("span",{className:"brand-name",children:"ChatWeb"})]}),(0,c.jsx)("p",{className:"hero-subtitle",children:"N\u1ec1n t\u1ea3ng chat hi\u1ec7n \u0111\u1ea1i, k\u1ebft n\u1ed1i m\u1ecdi ng\u01b0\u1eddi m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng v\xe0 thu\u1eadn ti\u1ec7n"}),(0,c.jsxs)("div",{className:"hero-buttons",children:[(0,c.jsx)("button",{className:"btn-primary",children:"B\u1eaft \u0111\u1ea7u ngay"}),(0,c.jsx)("button",{className:"btn-secondary",children:"T\xecm hi\u1ec3u th\xeam"})]})]}),(0,c.jsxs)("div",{className:"hero-image",children:[(0,c.jsx)("div",{className:"chat-bubble bubble-1",children:(0,c.jsx)("span",{children:"Xin ch\xe0o! \ud83d\udc4b"})}),(0,c.jsx)("div",{className:"chat-bubble bubble-2",children:(0,c.jsx)("span",{children:"Ch\xe0o b\u1ea1n! H\xf4m nay th\u1ebf n\xe0o?"})}),(0,c.jsx)("div",{className:"chat-bubble bubble-3",children:(0,c.jsx)("span",{children:"Tuy\u1ec7t v\u1eddi! \ud83d\ude0a"})})]})]}),(0,c.jsx)("section",{className:"features-section",children:(0,c.jsxs)("div",{className:"container",children:[(0,c.jsx)("h2",{className:"section-title",children:"T\xednh n\u0103ng n\u1ed5i b\u1eadt"}),(0,c.jsxs)("div",{className:"features-grid",children:[(0,c.jsxs)("div",{className:"feature-card",children:[(0,c.jsx)("div",{className:"feature-icon",children:"\ud83d\udcac"}),(0,c.jsx)("h3",{children:"Chat th\u1eddi gian th\u1ef1c"}),(0,c.jsx)("p",{children:"Tr\xf2 chuy\u1ec7n ngay l\u1eadp t\u1ee9c v\u1edbi b\u1ea1n b\xe8 v\xe0 \u0111\u1ed3ng nghi\u1ec7p"})]}),(0,c.jsxs)("div",{className:"feature-card",children:[(0,c.jsx)("div",{className:"feature-icon",children:"\ud83d\udd12"}),(0,c.jsx)("h3",{children:"B\u1ea3o m\u1eadt cao"}),(0,c.jsx)("p",{children:"M\xe3 h\xf3a \u0111\u1ea7u cu\u1ed1i \u0111\u1ec3 b\u1ea3o v\u1ec7 th\xf4ng tin c\xe1 nh\xe2n c\u1ee7a b\u1ea1n"})]}),(0,c.jsxs)("div",{className:"feature-card",children:[(0,c.jsx)("div",{className:"feature-icon",children:"\ud83c\udf10"}),(0,c.jsx)("h3",{children:"\u0110a n\u1ec1n t\u1ea3ng"}),(0,c.jsx)("p",{children:"S\u1eed d\u1ee5ng tr\xean m\u1ecdi thi\u1ebft b\u1ecb, m\u1ecdi l\xfac m\u1ecdi n\u01a1i"})]})]})]})})]})}),Rn=()=>(0,c.jsxs)("header",{className:"chat-header",children:[(0,c.jsxs)("div",{className:"header-left",children:[(0,c.jsx)("img",{src:"http://res.cloudinary.com/dytdhvf3s/image/upload/v1760508458/User_5e3ca275-4ec3-45c3-8f53-f173871d002e.jpg",alt:"Logo",className:"header-logo"}),(0,c.jsx)("span",{className:"header-title",children:"ChatBook"})]}),(0,c.jsxs)("nav",{className:"header-nav",children:[(0,c.jsx)(a.N_,{to:"/",className:"header-link",children:"Trang ch\u1ee7"}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.N_,{to:"login",className:"header-link",children:"\u0110\u0103ng nh\u1eadp"}),(0,c.jsx)(a.N_,{to:"register",className:"header-link",children:"\u0110\u0103ng k\xfd"})]})]})]}),On=()=>(0,c.jsx)("footer",{className:"chat-footer",children:(0,c.jsxs)("div",{className:"footer-container",children:[(0,c.jsxs)("div",{className:"footer-content",children:[(0,c.jsxs)("div",{className:"footer-section",children:[(0,c.jsx)("h3",{className:"footer-title",children:"ChatWeb"}),(0,c.jsx)("p",{className:"footer-description",children:"N\u1ec1n t\u1ea3ng chat hi\u1ec7n \u0111\u1ea1i, k\u1ebft n\u1ed1i m\u1ecdi ng\u01b0\u1eddi m\u1ed9t c\xe1ch d\u1ec5 d\xe0ng v\xe0 an to\xe0n."})]}),(0,c.jsxs)("div",{className:"footer-section",children:[(0,c.jsx)("h4",{className:"footer-heading",children:"Li\xean k\u1ebft nhanh"}),(0,c.jsxs)("ul",{className:"footer-links",children:[(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:"/",children:"Trang ch\u1ee7"})}),(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:"/about",children:"Gi\u1edbi thi\u1ec7u"})}),(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:"/contact",children:"Li\xean h\u1ec7"})}),(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:"/help",children:"H\u1ed7 tr\u1ee3"})})]})]}),(0,c.jsxs)("div",{className:"footer-section",children:[(0,c.jsx)("h4",{className:"footer-heading",children:"T\xe0i kho\u1ea3n"}),(0,c.jsxs)("ul",{className:"footer-links",children:[(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:"/login",children:"\u0110\u0103ng nh\u1eadp"})}),(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:"/register",children:"\u0110\u0103ng k\xfd"})}),(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:"/profile",children:"H\u1ed3 s\u01a1"})}),(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:"/settings",children:"C\xe0i \u0111\u1eb7t"})})]})]}),(0,c.jsxs)("div",{className:"footer-section",children:[(0,c.jsx)("h4",{className:"footer-heading",children:"K\u1ebft n\u1ed1i v\u1edbi ch\xfang t\xf4i"}),(0,c.jsxs)("div",{className:"social-links",children:[(0,c.jsx)("button",{className:"social-link",title:"Facebook",children:"\ud83d\udcd8"}),(0,c.jsx)("button",{className:"social-link",title:"Twitter",children:"\ud83d\udc26"}),(0,c.jsx)("button",{className:"social-link",title:"Instagram",children:"\ud83d\udcf7"}),(0,c.jsx)("button",{className:"social-link",title:"LinkedIn",children:"\ud83d\udcbc"})]})]})]}),(0,c.jsx)("div",{className:"footer-bottom",children:(0,c.jsxs)("div",{className:"footer-bottom-content",children:[(0,c.jsx)("p",{children:"\xa9 2025 ChatWeb. T\u1ea5t c\u1ea3 quy\u1ec1n \u0111\u01b0\u1ee3c b\u1ea3o l\u01b0u."}),(0,c.jsxs)("div",{className:"footer-bottom-links",children:[(0,c.jsx)("a",{href:"/privacy",children:"Ch\xednh s\xe1ch b\u1ea3o m\u1eadt"}),(0,c.jsx)("a",{href:"/terms",children:"\u0110i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"})]})]})})]})}),Pn=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),Ln=e=>{let t=e.trim();if(console.log("Decoding email step by step:"),console.log("1. Original:",t),t.includes("%40")&&(t=t.replace(/%40/g,"@"),console.log("2. After %40 replacement:",t)),t.includes("%"))try{const e=decodeURIComponent(t);console.log("3. After decodeURIComponent:",e),t=e}catch(n){console.warn("Failed to decode email:",n)}return console.log("4. Final result:",t),t},Un=e=>{let t=e.trim();return t=t.replace(/ /g,"%20"),t=t.replace(/\+/g,"%2B"),t=t.replace(/&/g,"%26"),t=t.replace(/=/g,"%3D"),console.log("Email encoded for URL:",t),t},Dn=()=>{const[e,n]=(0,t.useState)({email:"",activationCode:""}),[r,a]=(0,t.useState)("\u0110ang x\u1eed l\xfd k\xedch ho\u1ea1t t\xe0i kho\u1ea3n..."),[o,i]=(0,t.useState)(!0),[s,l]=(0,t.useState)([]),[u,d]=(0,t.useState)(!1),h=async(e,t)=>{i(!0),a("\u0110ang k\xedch ho\u1ea1t t\xe0i kho\u1ea3n..."),l([]),d(!1),console.log("Attempting activation with:",{email:e,code:t});const n=((e,t)=>{const n=[];return console.log("Validating:",{email:e,activationCode:t}),e&&e.trim()?Pn(e.trim())||(n.push("Email kh\xf4ng h\u1ee3p l\u1ec7: ".concat(e)),console.log("Invalid email format:",e)):n.push("Email kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),t&&t.trim()?t.trim().length<10&&(n.push("M\xe3 k\xedch ho\u1ea1t kh\xf4ng h\u1ee3p l\u1ec7 (qu\xe1 ng\u1eafn)"),console.log("Invalid activation code length:",t.length)):n.push("M\xe3 k\xedch ho\u1ea1t kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),console.log("Validation errors:",n),n})(e,t);if(n.length>0)return l(n),a("Th\xf4ng tin k\xedch ho\u1ea1t kh\xf4ng h\u1ee3p l\u1ec7!"),void i(!1);try{const n=await(async(e,t)=>{try{console.log("Activating account for:",e),console.log("Activation code:",t);const n=Ln(e),r=t.trim();console.log("Original email:",e),console.log("Clean email:",n),console.log("Clean code:",r);const a="https://unpessimistically-unbewailed-christy.ngrok-free.dev/api/users/active-account",o=Un(n),i=encodeURIComponent(r),s="email=".concat(o,"&activationCode=").concat(i),l="".concat(a,"?").concat(s);console.log("Manual URL construction:",l),console.log("Email in URL (preserving @):",o),console.log("Server will receive email as:",o);const c=await fetch(l,{method:"GET",headers:{"Content-Type":"application/json"}});let u;console.log("Response status:",c.status);const d=c.headers.get("content-type");if(d&&d.includes("application/json"))u=await c.json();else{const e=await c.text();console.log("Non-JSON response:",e),u={message:e||"HTTP ".concat(c.status)}}if(console.log("Response data:",u),!c.ok){let e="K\xedch ho\u1ea1t t\xe0i kho\u1ea3n th\u1ea5t b\u1ea1i";if(400===c.status)if(console.log("400 Bad Request details:",u),u&&u.message){if(u.message.includes("\u0111\xe3 \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t")||u.message.includes("already activated")||u.message.includes("already active"))return{success:!0,message:u.message,data:u};e=u.message}else e="D\u1eef li\u1ec7u kh\xf4ng h\u1ee3p l\u1ec7. Email: ".concat(n,", Code: ").concat(r.substring(0,8),"...");else e=404===c.status?"Kh\xf4ng t\xecm th\u1ea5y t\xe0i kho\u1ea3n ho\u1eb7c m\xe3 k\xedch ho\u1ea1t kh\xf4ng \u0111\xfang":410===c.status?"M\xe3 k\xedch ho\u1ea1t \u0111\xe3 h\u1ebft h\u1ea1n":409===c.status?"T\xe0i kho\u1ea3n \u0111\xe3 \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t tr\u01b0\u1edbc \u0111\xf3":500===c.status?"L\u1ed7i server. Vui l\xf2ng th\u1eed l\u1ea1i sau":u.message||"L\u1ed7i HTTP ".concat(c.status);throw new Error(e)}return{success:!0,message:u.message||"K\xedch ho\u1ea1t t\xe0i kho\u1ea3n th\xe0nh c\xf4ng!",data:u}}catch(n){return console.error("Active Account API Error:",n),n instanceof TypeError&&n.message.includes("fetch")?{success:!1,message:"Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i \u0111\u1ebfn server. Vui l\xf2ng ki\u1ec3m tra k\u1ebft n\u1ed1i m\u1ea1ng."}:{success:!1,message:n instanceof Error?n.message:"C\xf3 l\u1ed7i x\u1ea3y ra khi k\xedch ho\u1ea1t t\xe0i kho\u1ea3n"}}})(e,t);n.success?(a("\ud83c\udf89 K\xedch ho\u1ea1t t\xe0i kho\u1ea3n th\xe0nh c\xf4ng! B\u1ea1n c\xf3 th\u1ec3 \u0111\u0103ng nh\u1eadp ngay b\xe2y gi\u1edd."),d(!0),l([])):(a("\u274c ".concat(n.message)),l([n.message]))}catch(r){console.error("Activation error:",r);const e=r instanceof Error?r.message:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!";a("\u274c ".concat(e)),l([e])}i(!1)};(0,t.useEffect)(()=>{const e=window.location.pathname.split("/");if(console.log("Full URL:",window.location.href),console.log("Path segments:",e),e.length>=4&&"active"===e[1]){const t=e[2],r=decodeURIComponent(t).replace("%40","@"),o=e[3];console.log("Raw email from path:",t),console.log("Decoded email:",r),console.log("Activation code:",o),n({email:r,activationCode:o}),a("\u0110\xe3 nh\u1eadn th\xf4ng tin k\xedch ho\u1ea1t t\u1eeb link email"),h(r,o)}else a("\u274c Link k\xedch ho\u1ea1t kh\xf4ng h\u1ee3p l\u1ec7"),i(!1)},[]);return(0,c.jsx)("div",{className:"activation-container",children:(0,c.jsxs)("div",{className:"activation-box",children:[(0,c.jsx)("div",{className:"activation-header",children:(0,c.jsx)("h2",{children:"\ud83d\udd10 K\xedch ho\u1ea1t t\xe0i kho\u1ea3n"})}),(0,c.jsx)("div",{className:"chat-message ".concat(u?"success":s.length>0?"error":""),children:r}),s.length>0&&(0,c.jsx)("div",{className:"error-messages",children:s.map((e,t)=>(0,c.jsxs)("div",{className:"error-message",children:["\u274c ",e]},t))}),e.email&&e.activationCode&&(0,c.jsxs)("div",{className:"activation-info",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"M\xe3 k\xedch ho\u1ea1t:"})," ",e.activationCode.substring(0,8),"..."]})]}),!o&&!u&&s.length>0&&(0,c.jsx)("button",{className:"activate-btn",onClick:()=>{e.email&&e.activationCode&&h(e.email,e.activationCode)},disabled:o,children:"\ud83d\udd04 Th\u1eed l\u1ea1i"}),u&&(0,c.jsx)("div",{className:"success-actions",children:(0,c.jsx)("button",{className:"login-btn",onClick:()=>window.location.href="/login",children:"\ud83d\ude80 \u0110\u0103ng nh\u1eadp ngay"})}),o&&(0,c.jsxs)("div",{className:"loading-indicator",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsx)("p",{children:"\u0110ang x\u1eed l\xfd..."})]}),(0,c.jsxs)("div",{className:"activation-help",children:[(0,c.jsx)("p",{children:"\ud83d\udca1 G\u1eb7p v\u1ea5n \u0111\u1ec1?"}),(0,c.jsx)("button",{className:"resend-btn",onClick:()=>window.location.href="/contact",children:"\ud83d\udcde Li\xean h\u1ec7 h\u1ed7 tr\u1ee3"})]})]})})},Fn=G("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),zn=G("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),Mn=G("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Bn=G("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),Vn=G("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Wn=G("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Hn=G("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),qn=G("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Jn=G("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Kn=G("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Gn=G("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$n=G("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Qn=G("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),Xn=G("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Yn=async e=>{try{return(await Cn.get("".concat(s.J,"/posters/user/").concat(e))).data}catch(t){throw console.error("Error fetching user posters:",t),t}},Zn=async e=>{try{return(await Cn.get("".concat(s.J,"/posters/").concat(e))).data}catch(t){throw console.error("Error fetching poster:",t),t}},er=async(e,t)=>{try{return(await Cn.delete("".concat(s.J,"/posters/").concat(e),{data:{idUser:t}})).data}catch(n){throw console.error("Error deleting poster:",n),n}},tr=async(e,t)=>{try{const n=(0,h.gf)();if(!n)throw new Error("No authentication token found");const r=await fetch("".concat(s.J,"/like-posters/").concat(encodeURIComponent(e),"?userId=").concat(encodeURIComponent(t)),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});if(!r.ok){const e=await r.text();return console.error("Like poster failed: HTTP ".concat(r.status,": ").concat(e)),!1}return console.log("\u2705 Liked poster successfully:",e),!0}catch(n){return console.error("Like poster error:",n),!1}},nr=async(e,t)=>{try{const n=(0,h.gf)();if(!n)throw new Error("No authentication token found");const r=await fetch("".concat(s.J,"/like-posters/").concat(encodeURIComponent(e),"?userId=").concat(encodeURIComponent(t)),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});if(!r.ok){const e=await r.text();return console.error("Unlike poster failed: HTTP ".concat(r.status,": ").concat(e)),!1}return console.log("\u2705 Unliked poster successfully:",e),!0}catch(n){return console.error("Unlike poster error:",n),!1}},rr=async e=>{try{const t=(0,h.gf)();if(!t)throw new Error("No authentication token found");const n=await fetch("".concat(s.J,"/like-posters/").concat(encodeURIComponent(e),"/total"),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!n.ok)return console.error("Get total likes failed: HTTP ".concat(n.status)),0;return(await n.json()).totalLikes||0}catch(t){return console.error("Get total likes error:",t),0}},ar=(e,t)=>{const n="liked_posters_".concat(t);return JSON.parse(localStorage.getItem(n)||"[]").includes(e)},or=(e,t,n)=>{const r="liked_posters_".concat(t);let a=JSON.parse(localStorage.getItem(r)||"[]");n&&!a.includes(e)?a.push(e):n||(a=a.filter(t=>t!==e)),localStorage.setItem(r,JSON.stringify(a))},ir=async e=>{try{const t=(0,h.gf)();if(!t)throw new Error("No authentication token found");const n=await fetch("".concat(s.J,"/comments/").concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!n.ok){if(404===n.status)return[];const e=await n.text();return console.error("Get comments failed: HTTP ".concat(n.status,": ").concat(e)),[]}const r=await n.json();return console.log("\u2705 Fetched ".concat(r.length," comments for poster ").concat(e)),r||[]}catch(t){return console.error("Get comments error:",t),[]}},sr=e=>{try{const t=new Date(e),n=new Date,r=Math.floor((n.getTime()-t.getTime())/6e4);return r<1?"V\u1eeba xong":r<60?"".concat(r," ph\xfat"):r<1440?"".concat(Math.floor(r/60)," gi\u1edd"):r<10080?"".concat(Math.floor(r/1440)," ng\xe0y"):t.toLocaleDateString("vi-VN",{day:"numeric",month:"short",year:t.getFullYear()!==n.getFullYear()?"numeric":void 0})}catch(t){return""}},lr=e=>{let t=0;for(const n of e)t+=1,n.replies&&n.replies.length>0&&(t+=lr(n.replies));return t},cr=async(e,t,n)=>{try{const r=(0,h.gf)();if(!r)throw new Error("No authentication token found");const a=await fetch("".concat(s.J,"/comments/").concat(encodeURIComponent(e)),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({content:n,userId:t})});if(!a.ok){const e=await a.text();return console.error("Create comment failed: HTTP ".concat(a.status,": ").concat(e)),null}const o=await a.json();return console.log("\u2705 Comment created successfully:",o),o}catch(r){return console.error("Create comment error:",r),null}},ur=async(e,t,n,r)=>{try{const a=(0,h.gf)();if(!a)throw new Error("No authentication token found");const o=await fetch("".concat(s.J,"/comments/").concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t),"/reply"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({content:r,userId:n})});if(!o.ok){const e=await o.text();return console.error("Reply to comment failed: HTTP ".concat(o.status,": ").concat(e)),null}const i=await o.json();return console.log("\u2705 Reply created successfully:",i),i}catch(a){return console.error("Reply to comment error:",a),null}},dr=async(e,t,n,r)=>{try{const a=(0,h.gf)();if(!a)throw new Error("No authentication token found");const o=await fetch("".concat(s.J,"/comments/").concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t),"?userId=").concat(encodeURIComponent(n),"&content=").concat(encodeURIComponent(r)),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)}});if(!o.ok){const e=await o.text();return console.error("Update comment failed: HTTP ".concat(o.status,": ").concat(e)),null}const i=await o.json();return console.log("\u2705 Comment updated successfully:",i),i}catch(a){return console.error("Update comment error:",a),null}},hr=async(e,t,n)=>{try{const r=(0,h.gf)();if(!r)throw new Error("No authentication token found");const a=await fetch("".concat(s.J,"/comments/").concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t),"?userId=").concat(encodeURIComponent(n)),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(r)}});if(!a.ok){const e=await a.text();return console.error("Delete comment failed: HTTP ".concat(a.status,": ").concat(e)),!1}return console.log("\u2705 Comment deleted successfully"),!0}catch(r){return console.error("Delete comment error:",r),!1}};async function mr(e,t){const n=(0,h.gf)();if(!n)throw new Error("No JWT token found");const r=await fetch("".concat(s.J,"/shares/").concat(e,"?userId=").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});if(!r.ok)throw new Error(await r.text()||"Failed to delete share")}async function fr(e){const t=(0,h.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(s.J,"/shares/user/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error(await n.text()||"Failed to get shares");return n.json()}async function pr(e){const t=(0,h.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(s.J,"/shares/feed/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error(await n.text()||"Failed to get feed");return n.json()}async function gr(e){const t=(0,h.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(s.J,"/shares/count/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error(await n.text()||"Failed to count shares");return n.json()}async function vr(e,t){const n=(0,h.gf)();if(!n)throw new Error("No JWT token found");const r=await fetch("".concat(s.J,"/shares/").concat(e,"/like"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)});if(!r.ok)throw new Error(await r.text()||"Failed to like share");return r.json()}async function br(e,t){const n=(0,h.gf)();if(!n)throw new Error("No JWT token found");const r=await fetch("".concat(s.J,"/shares/").concat(e,"/like?userId=").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});if(!r.ok)throw new Error(await r.text()||"Failed to unlike share")}async function yr(e,t){const n=(0,h.gf)();if(!n)throw new Error("No JWT token found");const r=await fetch("".concat(s.J,"/shares/").concat(e,"/like/check?userId=").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}});if(!r.ok)throw new Error(await r.text()||"Failed to check like");return r.json()}async function xr(e){const t=(0,h.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(s.J,"/shares/").concat(e,"/like/count"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error(await n.text()||"Failed to get like count");return n.json()}async function wr(e,t){const n=(0,h.gf)();if(!n)throw new Error("No JWT token found");const r=await fetch("".concat(s.J,"/shares/").concat(e,"/comments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)});if(!r.ok)throw new Error(await r.text()||"Failed to create comment");return r.json()}async function Nr(e,t){const n=(0,h.gf)();if(!n)throw new Error("No JWT token found");const r=await fetch("".concat(s.J,"/shares/comments/").concat(e,"/reply"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)});if(!r.ok)throw new Error(await r.text()||"Failed to reply comment");return r.json()}async function kr(e,t){const n=(0,h.gf)();if(!n)throw new Error("No JWT token found");const r=await fetch("".concat(s.J,"/shares/comments/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)});if(!r.ok)throw new Error(await r.text()||"Failed to update comment");return r.json()}async function Sr(e,t){const n=(0,h.gf)();if(!n)throw new Error("No JWT token found");const r=await fetch("".concat(s.J,"/shares/comments/").concat(e,"?userId=").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});if(!r.ok)throw new Error(await r.text()||"Failed to delete comment")}async function jr(e){const t=(0,h.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(s.J,"/shares/").concat(e,"/comments"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error(await n.text()||"Failed to get comments");return n.json()}const Cr=e=>{let{images:t,currentIndex:n,onClose:r,onNext:a,onPrev:o}=e;return(0,c.jsx)("div",{className:"image-viewer",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,c.jsxs)("div",{className:"image-viewer__container",children:[(0,c.jsx)("button",{className:"image-viewer__close",onClick:r,"aria-label":"\u0110\xf3ng",children:"\u2715"}),t.length>1&&(0,c.jsxs)("div",{className:"image-viewer__counter",children:[n+1," / ",t.length]}),t.length>1&&n>0&&(0,c.jsx)("button",{className:"image-viewer__nav image-viewer__nav--prev",onClick:o,"aria-label":"\u1ea2nh tr\u01b0\u1edbc",children:"\u2039"}),(0,c.jsx)("div",{className:"image-viewer__image-wrapper",children:(0,c.jsx)("img",{src:t[n],alt:"\u1ea2nh ".concat(n+1),className:"image-viewer__image"})}),t.length>1&&n<t.length-1&&(0,c.jsx)("button",{className:"image-viewer__nav image-viewer__nav--next",onClick:a,"aria-label":"\u1ea2nh ti\u1ebfp theo",children:"\u203a"})]})})},_r=()=>{const{id:e}=(0,a.g)(),n=(0,a.Zp)(),[r,o]=(0,t.useState)(null),[l,u]=(0,t.useState)(!0),[d,m]=(0,t.useState)(!1),[f,p]=(0,t.useState)({idUser:"",firstName:"",lastName:"",phoneNumber:"",dateOfBirth:"",gender:!0}),[g,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)({type:"",text:""}),[x,w]=(0,t.useState)(!1),[N,k]=(0,t.useState)(!1),[S,j]=(0,t.useState)(null),[C,_]=(0,t.useState)(null),[E,A]=(0,t.useState)(!1),T=(0,t.useRef)(null),[I,R]=(0,t.useState)({}),[O,P]=(0,t.useState)([]),L=(0,t.useRef)(0),[U,D]=(0,t.useState)([]),[z,V]=(0,t.useState)(!0),[W,H]=(0,t.useState)(0),[q,J]=(0,t.useState)(!0),[K,G]=(0,t.useState)(!1),X=(0,t.useRef)(null),Y=(0,t.useRef)(null),[Z,ee]=(0,t.useState)(!1),[te,ne]=(0,t.useState)([]),[re,ae]=(0,t.useState)(0),[oe,ie]=(0,t.useState)({}),[se,le]=(0,t.useState)({}),[ce,ue]=(0,t.useState)({}),[de,he]=(0,t.useState)({}),[me,fe]=(0,t.useState)({}),[pe,ge]=(0,t.useState)({}),[ve,be]=(0,t.useState)({}),[ye,xe]=(0,t.useState)({}),[we,Ne]=(0,t.useState)({}),[ke,Se]=(0,t.useState)({}),[je,Ce]=(0,t.useState)({}),[_e,Ee]=(0,t.useState)({}),[Ae,Te]=(0,t.useState)({}),[Ie,Re]=(0,t.useState)({}),[Oe,Pe]=(0,t.useState)({}),[Le,Ue]=(0,t.useState)({}),[De,Fe]=(0,t.useState)({}),[ze,Me]=(0,t.useState)(!1),[Be,Ve]=(0,t.useState)(!1),[We,He]=(0,t.useState)(!1),[qe,Je]=(0,t.useState)({}),Ke=(0,t.useRef)(null);(0,t.useEffect)(()=>{(async()=>{if(e)try{const t=await Cn.get("https://unpessimistically-unbewailed-christy.ngrok-free.dev/api/users/search/findByIdUser?IdUser=".concat(e));o(t.data);const n=(0,h.ug)(),r=(null===n||void 0===n?void 0:n.id)===e;w(r),r&&p({idUser:t.data.idUser,firstName:t.data.firstName||"",lastName:t.data.lastName||"",phoneNumber:t.data.phoneNumber||"",dateOfBirth:$e(t.data.dateOfBirth||""),gender:t.data.gender})}catch(t){console.error("L\u1ed7i khi t\u1ea3i th\xf4ng tin user:",t)}finally{u(!1)}})()},[e]),(0,t.useEffect)(()=>{(async()=>{if(!e||x)return void Me(!1);const t=(0,h.ug)();if(null!==t&&void 0!==t&&t.id){Ve(!0);try{const t=(await M()).some(t=>t.userId===e);Me(t)}catch(n){console.error("Error checking friendship:",n),Me(!1)}finally{Ve(!1)}}else Me(!1)})()},[e,x]);const Ge=e=>new Date(e).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),$e=e=>{if(!e)return"";try{return new Date(e).toISOString().split("T")[0]}catch(t){return""}},Qe=e=>{const{name:t,value:n}=e.target;p(e=>(0,i.A)((0,i.A)({},e),{},{[t]:n}))},Xe=e=>{p(t=>(0,i.A)((0,i.A)({},t),{},{gender:e}))},Ye=()=>{m(!0),y({type:"",text:""})},Ze=()=>{m(!1),y({type:"",text:""}),r&&p({idUser:r.idUser,firstName:r.firstName||"",lastName:r.lastName||"",phoneNumber:r.phoneNumber||"",dateOfBirth:$e(r.dateOfBirth||""),gender:r.gender})},et=()=>{var e;x&&(null===(e=T.current)||void 0===e||e.click())},tt=()=>{k(!1),_(null),j(null)},nt=async()=>{v(!0),y({type:"",text:""}),R({});try{const e={};f.firstName.trim()||(e.firstName="H\u1ecd kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),f.lastName.trim()||(e.lastName="T\xean kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng");const t=/^(0|\+84)[3-9][0-9]{8}$/;f.phoneNumber&&!t.test(f.phoneNumber)&&(e.phoneNumber="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7");const n=$e(f.dateOfBirth);if(n&&!/^\d{4}-\d{2}-\d{2}$/.test(n)&&(e.dateOfBirth="Ng\xe0y sinh kh\xf4ng h\u1ee3p l\u1ec7"),Object.keys(e).length)throw R(e),new Error("Vui l\xf2ng s\u1eeda c\xe1c l\u1ed7i \u0111\u01b0\u1ee3c \u0111\xe1nh d\u1ea5u");const r={idUser:f.idUser,firstName:f.firstName.trim(),lastName:f.lastName.trim(),phoneNumber:f.phoneNumber.trim(),dateOfBirth:n,gender:f.gender};console.log("Sending data to API (PUT):",r);const a=await(async e=>{try{var t;const r=(0,h.gf)(),a=await fetch("".concat(s.J,"/users/update-profile"),{method:"PUT",headers:(0,i.A)({"Content-Type":"application/json"},r?{Authorization:"Bearer ".concat(r)}:{}),body:JSON.stringify(e)});let o;var n;if(o=(a.headers.get("content-type")||"").includes("application/json")?await a.json():{message:await a.text(),success:a.ok},!a.ok)throw new Error((null===(n=o)||void 0===n?void 0:n.message)||"HTTP ".concat(a.status));return{success:!0,message:(null===(t=o)||void 0===t?void 0:t.message)||"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng",data:o}}catch(r){return console.error("Update profile error:",r),{success:!1,message:r.message||"C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i"}}})(r);if(!a.success)throw new Error(a.message);rt("success","C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng!"),m(!1),o(e=>e?(0,i.A)((0,i.A)({},e),r):null)}catch(n){var e,t;console.error("Update profile error:",n),y({type:"error",text:n.message||(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"C\u1eadp nh\u1eadt th\xf4ng tin th\u1ea5t b\u1ea1i"}),I&&0!==Object.keys(I).length||rt("error",n.message||"C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i")}finally{v(!1)}},rt=(e,t)=>{const n=++L.current;P(r=>[...r,{id:n,type:e,text:t}]),setTimeout(()=>at(n),3800)},at=e=>{P(t=>t.filter(t=>t.id!==e))},ot=(0,t.useMemo)(()=>{if(!r)return"";return"".concat(r.firstName||""," ").concat(r.lastName||"").trim()||r.username},[r]),it=(0,t.useMemo)(()=>{if(!r)return[];const e=[{icon:Fn,label:"H\u1ecd v\xe0 t\xean",value:ot||"Ch\u01b0a c\u1eadp nh\u1eadt"},{icon:zn,label:"T\xean ng\u01b0\u1eddi d\xf9ng",value:r.username?"@".concat(r.username):"Ch\u01b0a c\u1eadp nh\u1eadt"},{icon:Fn,label:"Gi\u1edbi t\xednh",value:r.gender?"Nam":"N\u1eef"}];return x&&e.push({icon:Mn,label:"Email",value:r.email||"Ch\u01b0a c\u1eadp nh\u1eadt"},{icon:Bn,label:"\u0110i\u1ec7n tho\u1ea1i",value:r.phoneNumber||"Ch\u01b0a c\u1eadp nh\u1eadt"},{icon:Vn,label:"Ng\xe0y sinh",value:r.dateOfBirth||"Ch\u01b0a c\u1eadp nh\u1eadt"},{icon:Wn,label:"T\xe0i kho\u1ea3n",value:r.status?"\u0110\xe3 x\xe1c th\u1ef1c":"Ch\u01b0a x\xe1c th\u1ef1c"},{icon:Hn,label:"Ng\xe0y t\u1ea1o",value:Ge(r.createdAt)},{icon:Hn,label:"C\u1eadp nh\u1eadt cu\u1ed1i",value:Ge(r.updatedAt)}),e},[r,ot,x]),st=(0,t.useMemo)(()=>Math.max(0,Math.round(200*Math.random()+150)),[]),lt=(0,t.useMemo)(()=>Math.max(4,Math.round(20*Math.random())),[]),ct=(0,t.useCallback)(e=>{const t=new Date,n=new Date(e.createdAt),r=Math.floor((t.getTime()-n.getTime())/6e4);let a="";a=r<1?"V\u1eeba xong":r<60?"".concat(r," ph\xfat tr\u01b0\u1edbc"):r<1440?"".concat(Math.floor(r/60)," gi\u1edd tr\u01b0\u1edbc"):"".concat(Math.floor(r/1440)," ng\xe0y tr\u01b0\u1edbc");let o="public";return"PUBLIC"===e.privacyStatusName?o="public":"FRIENDS"===e.privacyStatusName?o="friends":"PRIVATE"===e.privacyStatusName&&(o="private"),{id:e.idPoster,authorId:e.idUser,authorName:e.userName,authorAvatar:e.userAvatar||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=120&q=80",time:a,audience:o,content:e.content,images:e.imageUrls,videos:e.videos,reactions:0,comments:0,shares:0,isShare:!1}},[]),ut=(0,t.useCallback)(e=>{const t=new Date,n=new Date(e.createdAt),r=Math.floor((t.getTime()-n.getTime())/6e4);let a="";a=r<1?"V\u1eeba xong":r<60?"".concat(r," ph\xfat tr\u01b0\u1edbc"):r<1440?"".concat(Math.floor(r/60)," gi\u1edd tr\u01b0\u1edbc"):"".concat(Math.floor(r/1440)," ng\xe0y tr\u01b0\u1edbc");let o="public";return"PUBLIC"===e.privacyStatusName?o="public":"FRIENDS"===e.privacyStatusName?o="friends":"PRIVATE"===e.privacyStatusName&&(o="private"),{id:e.idShare,authorId:e.idUser,authorName:e.userName,authorAvatar:e.userAvatar||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=120&q=80",time:a,audience:o,content:e.content,reactions:e.likeCount||0,comments:e.commentCount||0,shares:0,isShare:!0,shareId:e.idShare,shareContent:e.content,shareUserId:e.idUser,shareUserName:e.userName,shareUserAvatar:e.userAvatar,shareCreatedAt:e.createdAt,sharePrivacy:o,originalPosterId:e.originalPoster.idPoster,originalAuthorName:e.originalPoster.userName,originalAuthorAvatar:e.originalPoster.userAvatar,originalContent:e.originalPoster.content,originalImages:e.originalPoster.images,originalVideos:e.originalPoster.videos}},[]),dt=(0,t.useCallback)((e,t)=>{const n=e=>({idComment:e.idCommentShare,idPoster:t,content:e.content,idUser:e.idUser,parentCommentId:e.parentCommentId||null,createdAt:e.createdAt,updatedAt:e.updatedAt||e.createdAt,userName:e.userName,userAvatar:e.userAvatar,replyCount:e.replyCount||(e.replies?e.replies.length:0),replies:e.replies?e.replies.map(e=>n(e)):[]});return n(e)},[]),ht=(0,t.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e){0===t?V(!0):G(!0);try{const r=(0,h.ug)();Ke.current=r;const[a,o]=await Promise.all([Yn(e),fr(e)]);let s=a||[],l=o||[];if(!x){let t=!1;if(null!==r&&void 0!==r&&r.id)try{t=(await M()).some(t=>t.userId===e)}catch(n){console.error("Error checking friendship:",n)}t?(s=s.filter(e=>"PUBLIC"===e.privacyStatusName||"FRIENDS"===e.privacyStatusName),l=l.filter(e=>"PUBLIC"===e.privacyStatusName||"FRIENDS"===e.privacyStatusName)):(s=s.filter(e=>"PUBLIC"===e.privacyStatusName),l=l.filter(e=>"PUBLIC"===e.privacyStatusName))}const c=s.map(e=>ct(e)),u=await Promise.all(l.map(async e=>{const t=await(0,B.kl)(e.idUser),n=await Zn(e.originalPoster.idPoster),r=t&&("".concat(t.firstName||""," ").concat(t.lastName||"").trim()||t.username)||e.userName,a=(null===n||void 0===n?void 0:n.userName)||e.originalPoster.userName,o=ut(e);return(0,i.A)((0,i.A)({},o),{},{authorName:r,originalAuthorName:a,originalImages:(null===n||void 0===n?void 0:n.imageUrls)||[],originalVideos:(null===n||void 0===n?void 0:n.videos)||[]})})),d=[...c,...u].sort((e,t)=>{const n=e=>{if(e.isShare&&e.shareCreatedAt)return new Date(e.shareCreatedAt).getTime();const t=e.time;if("V\u1eeba xong"===t)return Date.now();const n=t.match(/(\d+)\s+(ph\xfat|gi\u1edd|ng\xe0y)/);if(!n)return 0;const r=parseInt(n[1]),a=n[2],o=Date.now();return"ph\xfat"===a?o-60*r*1e3:"gi\u1edd"===a?o-60*r*60*1e3:"ng\xe0y"===a?o-24*r*60*60*1e3:0};return n(t)-n(e)}),m=5,f=t*m,p=f+m,g=d.slice(f,p);g.length<m&&J(!1),D(0===t?g:e=>[...e,...g]);const v={},b={};await Promise.all(g.map(async e=>{try{if(e.isShare){const t=await xr(e.id),n="number"===typeof t?t:t.likeCount||0;if(v[e.id]=n,null!==r&&void 0!==r&&r.id){const t=await yr(e.id,r.id);b[e.id]=t.isLiked||!1}else b[e.id]=!1}else{const t=await rr(e.id);v[e.id]=t,null!==r&&void 0!==r&&r.id?b[e.id]=ar(e.id,r.id):b[e.id]=!1}}catch(n){console.error("\u274c Error fetching likes for post ".concat(e.id,":"),n),v[e.id]=0,b[e.id]=!1}})),0===t?(ie(v),le(b)):(ie(e=>(0,i.A)((0,i.A)({},e),v)),le(e=>(0,i.A)((0,i.A)({},e),b)));const y={};await Promise.all(g.map(async e=>{try{if(e.isShare){const t=await jr(e.id),n=lr(t.map(t=>dt(t,e.id)));y[e.id]=n}else{const t=await ir(e.id),n=lr(t);y[e.id]=n}}catch(n){console.error("\u274c Error fetching comments for post ".concat(e.id,":"),n),y[e.id]=0}})),fe(0===t?y:e=>(0,i.A)((0,i.A)({},e),y))}catch(r){console.error("Error fetching posts for profile:",r),J(!1)}finally{0===t?V(!1):G(!1)}}},[e,x,ct,ut,dt]);(0,t.useEffect)(()=>{ht(0),H(0)},[e,ht]),(0,t.useEffect)(()=>(X.current&&X.current.disconnect(),X.current=new IntersectionObserver(e=>{if(e[0].isIntersecting&&q&&!K&&!z){console.log("\ud83d\udcdc Loading more posters...");const e=W+1;H(e),ht(e)}},{threshold:.5}),Y.current&&X.current.observe(Y.current),()=>{X.current&&X.current.disconnect()}),[q,K,z,W,ht]);const mt=async e=>{if(pe[e]||!1)ge(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1}));else{if(!de[e]){be(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0}));try{const t=U.find(t=>t.id===e);let n;if((null===t||void 0===t?void 0:t.isShare)||!1){n=(await jr(e)).map(t=>dt(t,e))}else n=await ir(e);const r=await ft(n);he(t=>(0,i.A)((0,i.A)({},t),{},{[e]:r}))}catch(t){console.error("\u274c Error loading comments:",t)}finally{be(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1}))}}ge(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0}))}},ft=async e=>{const t={},n=async e=>{if(!t[e.idUser])try{const n=await(0,B.kl)(e.idUser);t[e.idUser]=n}catch(o){console.error("Error fetching user ".concat(e.idUser,":"),o),t[e.idUser]=null}const r=t[e.idUser],a=(0,i.A)((0,i.A)({},e),{},{userName:(null===r||void 0===r?void 0:r.username)||"Ng\u01b0\u1eddi d\xf9ng",userAvatar:(null===r||void 0===r?void 0:r.avatar)||"",userFirstName:(null===r||void 0===r?void 0:r.firstName)||"",userLastName:(null===r||void 0===r?void 0:r.lastName)||""});return e.replies&&e.replies.length>0&&(a.replies=await Promise.all(e.replies.map(e=>n(e)))),a};return Promise.all(e.map(n))},pt=async e=>{var t;const n=Ke.current;if(null===n||void 0===n||!n.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 b\xecnh lu\u1eadn");const r=null===(t=ye[e])||void 0===t?void 0:t.trim();if(!r)return;const a=U.find(t=>t.id===e),o=(null===a||void 0===a?void 0:a.isShare)||!1;Ne(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0}));try{let t;if(o){const a=await wr(e,{userId:n.id,content:r});t={idComment:a.idCommentShare,idPoster:e,content:a.content,idUser:a.idUser,parentCommentId:a.parentCommentId||null,createdAt:a.createdAt,updatedAt:a.updatedAt||a.createdAt,replies:[],replyCount:0}}else t=await cr(e,n.id,r);if(t){const r=await(0,B.kl)(n.id),a=(0,i.A)((0,i.A)({},t),{},{userName:(null===r||void 0===r?void 0:r.username)||n.username||"Ng\u01b0\u1eddi d\xf9ng",userAvatar:(null===r||void 0===r?void 0:r.avatar)||n.avatar||"",userFirstName:(null===r||void 0===r?void 0:r.firstName)||n.firstName||"",userLastName:(null===r||void 0===r?void 0:r.lastName)||n.lastName||"",replies:t.replies||[],replyCount:t.replyCount||0});he(t=>(0,i.A)((0,i.A)({},t),{},{[e]:[a,...t[e]||[]]})),fe(t=>(0,i.A)((0,i.A)({},t),{},{[e]:(t[e]||0)+1})),xe(t=>(0,i.A)((0,i.A)({},t),{},{[e]:""})),ge(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0}))}}catch(s){console.error("\u274c Error submitting comment:",s),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi th\xeam b\xecnh lu\u1eadn.")}finally{Ne(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1}))}},gt=(e,t)=>{Se(n=>{if(n[e]){const t=(0,i.A)({},n);return delete t[e],t}return(0,i.A)((0,i.A)({},n),{},{[e]:t})})},vt=async(e,t)=>{var n;const r=Ke.current;if(null===r||void 0===r||!r.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 tr\u1ea3 l\u1eddi b\xecnh lu\u1eadn");const a=null===(n=je[t])||void 0===n?void 0:n.trim();if(!a)return;const o=U.find(t=>t.id===e),s=(null===o||void 0===o?void 0:o.isShare)||!1;Ee(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0}));try{let n;if(s){const o=await Nr(t,{userId:r.id,content:a});n={idComment:o.idCommentShare,idPoster:e,content:o.content,idUser:o.idUser,parentCommentId:o.parentCommentId||null,createdAt:o.createdAt,updatedAt:o.updatedAt||o.createdAt,replies:[],replyCount:0}}else n=await ur(e,t,r.id,a);if(n){const a=await(0,B.kl)(r.id),o=(0,i.A)((0,i.A)({},n),{},{userName:(null===a||void 0===a?void 0:a.username)||r.username||"Ng\u01b0\u1eddi d\xf9ng",userAvatar:(null===a||void 0===a?void 0:a.avatar)||r.avatar||"",userFirstName:(null===a||void 0===a?void 0:a.firstName)||r.firstName||"",userLastName:(null===a||void 0===a?void 0:a.lastName)||r.lastName||"",replies:n.replies||[],replyCount:n.replyCount||0});he(n=>{const r=[...n[e]||[]],a=e=>e.map(e=>e.idComment===t?(0,i.A)((0,i.A)({},e),{},{replies:[o,...e.replies||[]],replyCount:(e.replyCount||0)+1}):e.replies&&e.replies.length>0?(0,i.A)((0,i.A)({},e),{},{replies:a(e.replies)}):e);return(0,i.A)((0,i.A)({},n),{},{[e]:a(r)})}),Ue(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0})),fe(t=>(0,i.A)((0,i.A)({},t),{},{[e]:(t[e]||0)+1})),Ce(e=>{const n=(0,i.A)({},e);return delete n[t],n}),Se(e=>{const n=(0,i.A)({},e);return delete n[t],n})}}catch(l){console.error("\u274c Error submitting reply:",l),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi th\xeam ph\u1ea3n h\u1ed3i.")}finally{Ee(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!1}))}},bt=(e,t,n)=>{Te(r=>{if(r[e]){const t=(0,i.A)({},r);return delete t[e],t}return Re(t=>(0,i.A)((0,i.A)({},t),{},{[e]:n})),(0,i.A)((0,i.A)({},r),{},{[e]:t})})},yt=async(e,t)=>{var n;const r=Ke.current;if(null===r||void 0===r||!r.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eeda b\xecnh lu\u1eadn");const a=null===(n=Ie[t])||void 0===n?void 0:n.trim();if(!a)return;const o=U.find(t=>t.id===e),s=(null===o||void 0===o?void 0:o.isShare)||!1;Pe(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0}));try{let n;if(s){const o=await kr(t,{userId:r.id,content:a});n={idComment:o.idCommentShare,idPoster:e,content:o.content,idUser:o.idUser,parentCommentId:o.parentCommentId||null,createdAt:o.createdAt,updatedAt:o.updatedAt||o.createdAt,replies:[],replyCount:0}}else n=await dr(e,t,r.id,a);if(n){const r=n.content,a=n.updatedAt;he(n=>{const o=[...n[e]||[]],s=e=>e.map(e=>e.idComment===t?(0,i.A)((0,i.A)({},e),{},{content:r,updatedAt:a}):e.replies&&e.replies.length>0?(0,i.A)((0,i.A)({},e),{},{replies:s(e.replies)}):e);return(0,i.A)((0,i.A)({},n),{},{[e]:s(o)})}),Re(e=>{const n=(0,i.A)({},e);return delete n[t],n}),Te(e=>{const n=(0,i.A)({},e);return delete n[t],n})}}catch(l){console.error("\u274c Error updating comment:",l),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt b\xecnh lu\u1eadn.")}finally{Pe(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!1}))}},xt=async(e,t)=>{const n=Ke.current;if(null===n||void 0===n||!n.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 x\xf3a b\xecnh lu\u1eadn");if(!window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a b\xecnh lu\u1eadn n\xe0y?"))return;const r=U.find(t=>t.id===e),a=(null===r||void 0===r?void 0:r.isShare)||!1;try{let r;a?(await Sr(t,n.id),r=!0):r=await hr(e,t,n.id),r&&(he(n=>{const r=[...n[e]||[]],a=e=>e.filter(e=>e.idComment!==t&&(e.replies&&e.replies.length>0&&(e.replies=a(e.replies)),!0));return(0,i.A)((0,i.A)({},n),{},{[e]:a(r)})}),fe(t=>(0,i.A)((0,i.A)({},t),{},{[e]:Math.max(0,(t[e]||0)-1)})))}catch(o){console.error("\u274c Error deleting comment:",o),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi x\xf3a b\xecnh lu\u1eadn.")}},wt=function(e,t){var n,r,o,s;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const u=e.replies&&e.replies.length>0,d=Le[e.idComment];return(0,c.jsxs)("div",{className:"fb-comment__reply-wrapper fb-comment__reply--depth-".concat(l),children:[(0,c.jsxs)("div",{className:"fb-comment fb-comment--reply",children:[(0,c.jsx)(a.k2,{to:"/user/".concat(e.idUser),className:"fb-post__author",children:(0,c.jsx)("img",{src:e.userAvatar||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:"".concat(e.userFirstName," ").concat(e.userLastName),className:"fb-comment__avatar"})}),(0,c.jsx)("div",{className:"fb-comment__content",children:Ae[e.idComment]?(0,c.jsxs)("div",{className:"fb-comment__edit",children:[(0,c.jsx)("input",{type:"text",value:Ie[e.idComment]||"",onChange:t=>Re(n=>(0,i.A)((0,i.A)({},n),{},{[e.idComment]:t.target.value})),onKeyDown:n=>{"Enter"!==n.key||n.shiftKey?"Escape"===n.key&&bt(e.idComment,t,e.content):(n.preventDefault(),yt(t,e.idComment))},className:"fb-comment__edit-field",disabled:Oe[e.idComment],autoFocus:!0}),(0,c.jsxs)("div",{className:"fb-comment__edit-actions",children:[(0,c.jsx)("button",{type:"button",onClick:()=>bt(e.idComment,t,e.content),disabled:Oe[e.idComment],children:"H\u1ee7y"}),(0,c.jsx)("button",{type:"button",onClick:()=>yt(t,e.idComment),disabled:Oe[e.idComment]||!(null!==(n=Ie[e.idComment])&&void 0!==n&&n.trim()),className:"btn-primary",children:Oe[e.idComment]?"\u0110ang l\u01b0u...":"L\u01b0u"})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"fb-comment__bubble",children:[(0,c.jsx)("strong",{children:e.userFirstName&&e.userLastName?"".concat(e.userFirstName," ").concat(e.userLastName).trim():e.userName||"Ng\u01b0\u1eddi d\xf9ng"}),(0,c.jsx)("p",{children:e.content})]}),(0,c.jsxs)("div",{className:"fb-comment__meta",children:[(0,c.jsx)("span",{children:sr(e.createdAt)}),(0,c.jsx)("button",{type:"button",children:"Th\xedch"}),(0,c.jsx)("button",{type:"button",onClick:()=>gt(e.idComment,t),children:"Ph\u1ea3n h\u1ed3i"}),(null===(r=Ke.current)||void 0===r?void 0:r.id)===e.idUser&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{type:"button",onClick:()=>bt(e.idComment,t,e.content),children:"S\u1eeda"}),(0,c.jsx)("button",{type:"button",onClick:()=>xt(t,e.idComment),children:"X\xf3a"})]})]}),u&&l<3&&(0,c.jsxs)("button",{type:"button",className:"fb-comment__view-replies",onClick:()=>{return t=e.idComment,void Ue(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!e[t]}));var t},children:[d?"\u25bc":"\u25b6"," ",e.replyCount||e.replies.length," ph\u1ea3n h\u1ed3i"]})]})})]}),ke[e.idComment]&&(0,c.jsxs)("div",{className:"fb-reply-input",children:[(0,c.jsx)("img",{src:(null===(o=Ke.current)||void 0===o?void 0:o.avatar)||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:"Your avatar",className:"fb-reply-input__avatar"}),(0,c.jsxs)("div",{className:"fb-reply-input__field-wrapper",children:[(0,c.jsx)("input",{type:"text",placeholder:"Vi\u1ebft ph\u1ea3n h\u1ed3i...",value:je[e.idComment]||"",onChange:t=>Ce(n=>(0,i.A)((0,i.A)({},n),{},{[e.idComment]:t.target.value})),onKeyDown:n=>{"Enter"!==n.key||n.shiftKey||(n.preventDefault(),vt(t,e.idComment))},className:"fb-reply-input__field",disabled:_e[e.idComment]}),(null===(s=je[e.idComment])||void 0===s?void 0:s.trim())&&(0,c.jsx)("button",{type:"button",onClick:()=>vt(t,e.idComment),disabled:_e[e.idComment],className:"fb-reply-input__submit",children:_e[e.idComment]?"...":"\u27a4"})]})]}),u&&d&&l<3&&(0,c.jsx)("div",{className:"fb-comment__replies",children:e.replies.map(e=>wt(e,t,l+1))})]},e.idComment)},Nt=(e,t)=>{ne(e),ae(t),ee(!0)},kt=e=>{Fe(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1}))},St=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];kt(e),await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a b\xe0i \u0111\u0103ng n\xe0y?")){Je(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0}));try{n?await mr(e,t):await er(e,t),D(t=>t.filter(t=>t.id!==e)),console.log("\u2705 Post deleted successfully")}catch(o){var r,a;console.error("Error deleting post:",o),alert((null===(r=o.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Kh\xf4ng th\u1ec3 x\xf3a b\xe0i \u0111\u0103ng")}finally{Je(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1}))}}}(e,t,n)};return l?(0,c.jsx)("div",{className:"loading-container",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"loading-spinner"}),(0,c.jsx)("p",{className:"loading-text",children:"\u23f3 \u0110ang t\u1ea3i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng..."})]})}):r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"fb-profile",children:[(0,c.jsx)("div",{className:"toast-container","aria-live":"polite","aria-atomic":"true",children:O.map(e=>(0,c.jsxs)("div",{className:"toast toast-".concat(e.type),role:"alert",children:[(0,c.jsx)("div",{className:"toast__text",children:e.text}),(0,c.jsx)("button",{type:"button",className:"toast__close",onClick:()=>at(e.id),"aria-label":"\u0110\xf3ng th\xf4ng b\xe1o",children:"\u2715"})]},e.id))}),(0,c.jsxs)("div",{className:"fb-profile__cover",children:[(0,c.jsx)("div",{className:"fb-profile__cover-image"}),x&&(0,c.jsxs)("button",{type:"button",className:"fb-btn fb-btn--cover",children:[(0,c.jsx)(qn,{size:16}),(0,c.jsx)("span",{children:"Ch\u1ec9nh s\u1eeda \u1ea3nh b\xeca"})]})]}),(0,c.jsxs)("div",{className:"fb-profile__top",children:[(0,c.jsx)("div",{className:"fb-profile__avatar-col",children:(0,c.jsxs)("div",{className:"avatar-container",children:[(0,c.jsx)("img",{src:S||(r.avatar&&""!==r.avatar.trim()?r.avatar:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQQEjGbsTwEJ2n8tZOeJWLkCivjuYDJBxQbIg&s"),alt:"\u1ea2nh \u0111\u1ea1i di\u1ec7n",className:"avatar"+(x?" avatar-hover":""),onClick:et,title:x?"Nh\u1ea5p \u0111\u1ec3 \u0111\u1ed5i avatar":""}),x&&(0,c.jsx)("div",{className:"avatar-overlay ".concat(E?"avatar-uploading":""),children:E?(0,c.jsx)("div",{className:"avatar-progress"}):(0,c.jsx)("span",{children:N?"L\u01b0u ho\u1eb7c hu\u1ef7":"\u0110\u1ed5i \u1ea3nh"})}),x&&!N&&(0,c.jsx)("button",{type:"button",className:"avatar-change-btn",onClick:et,children:"\u0110\u1ed5i"}),N&&(0,c.jsxs)("div",{className:"avatar-actions",children:[(0,c.jsx)("button",{type:"button",disabled:E,onClick:async()=>{if(C&&r)try{A(!0),y({type:"",text:""});const e=S,t=await(async(e,t)=>{try{var n,r;const o=(0,h.gf)();o||console.warn("\u26a0\ufe0f No JWT token found when attempting to change avatar");const l={idUser:e,avatar:t},c=await fetch("".concat(s.J,"/users/change-avatar"),{method:"PUT",headers:(0,i.A)({"Content-Type":"application/json"},o?{Authorization:"Bearer ".concat(o)}:{}),body:JSON.stringify(l)});let u;if(u=(c.headers.get("content-type")||"").includes("application/json")?await c.json():{message:await c.text(),success:c.ok},!c.ok){var a;if(401===c.status)throw new Error("401 Unauthorized: Token h\u1ebft h\u1ea1n ho\u1eb7c kh\xf4ng h\u1ee3p l\u1ec7. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i.");throw new Error((null===(a=u)||void 0===a?void 0:a.message)||"HTTP ".concat(c.status))}return{success:!0,message:(null===(n=u)||void 0===n?void 0:n.message)||"\u0110\u1ed5i avatar th\xe0nh c\xf4ng",avatar:(null===(r=u)||void 0===r?void 0:r.avatar)||t}}catch(o){return console.error("Change avatar error:",o),{success:!1,message:o.message||"\u0110\u1ed5i avatar th\u1ea5t b\u1ea1i"}}})(r.idUser,e);t.success?(o(n=>n?(0,i.A)((0,i.A)({},n),{},{avatar:t.avatar||e}):n),rt("success","C\u1eadp nh\u1eadt avatar th\xe0nh c\xf4ng!"),tt()):(rt("error",t.message||"\u0110\u1ed5i avatar th\u1ea5t b\u1ea1i"),(t.message.includes("401")||t.message.includes("Unauthorized"))&&setTimeout(()=>{window.confirm("Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 h\u1ebft h\u1ea1n. B\u1ea1n c\xf3 mu\u1ed1n \u0111\u0103ng nh\u1eadp l\u1ea1i kh\xf4ng?")&&(window.location.href="/login")},300))}catch(e){y({type:"error",text:e.message||"\u0110\u1ed5i avatar th\u1ea5t b\u1ea1i"})}finally{A(!1)}},className:"save-avatar-btn",children:E?"\u0110ang l\u01b0u...":"L\u01b0u"}),(0,c.jsx)("button",{type:"button",disabled:E,onClick:tt,className:"cancel-avatar-btn",children:"H\u1ee7y"})]}),(0,c.jsx)("input",{type:"file",ref:T,accept:"image/*",className:"visually-hidden","aria-labelledby":"avatar-upload",title:"Ch\u1ecdn \u1ea3nh \u0111\u1ea1i di\u1ec7n",placeholder:"Ch\u1ecdn \u1ea3nh \u0111\u1ea1i di\u1ec7n",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;R({});if(!["image/png","image/jpeg","image/jpg","image/gif","image/webp"].includes(n.type))return void y({type:"error",text:"\u0110\u1ecbnh d\u1ea1ng \u1ea3nh kh\xf4ng h\u1ee3p l\u1ec7. Ch\u1ec9 ch\u1ea5p nh\u1eadn PNG, JPG, GIF, WEBP."});if(n.size>2097152)return void y({type:"error",text:"K\xedch th\u01b0\u1edbc \u1ea3nh qu\xe1 l\u1edbn (> ".concat(2,"MB).")});_(n);const r=new FileReader;r.onload=()=>{j(r.result),k(!0),y({type:"",text:""})},r.readAsDataURL(n)}}),(0,c.jsx)("div",{className:"status-indicator ".concat(r.status?"status-online":"status-offline")})]})}),(0,c.jsxs)("div",{className:"fb-profile__info-col",children:[(0,c.jsx)("h1",{className:"fb-profile__name",children:ot}),(0,c.jsx)("div",{className:"fb-profile__meta",children:(0,c.jsxs)("span",{className:"fb-profile__friends",children:[(0,c.jsx)($,{size:16}),(0,c.jsxs)("span",{children:[st.toLocaleString("vi-VN")," b\u1ea1n b\xe8"]}),(0,c.jsx)("span",{className:"dot",children:"\u2022"}),(0,c.jsxs)("span",{children:[lt," b\u1ea1n chung"]})]})}),(0,c.jsxs)("div",{className:"fb-profile__badges",children:[(0,c.jsx)("span",{className:"fb-badge ".concat(r.enabled?"fb-badge--success":"fb-badge--danger"),children:r.enabled?"Ho\u1ea1t \u0111\u1ed9ng":"Kh\xf3a"}),(0,c.jsx)("span",{className:"fb-badge fb-badge--muted",children:r.gender?"Nam":"N\u1eef"})]})]}),(0,c.jsx)("div",{className:"fb-profile__actions",children:x?(0,c.jsxs)("div",{className:"fb-profile__action-group",children:[d?(0,c.jsxs)("div",{className:"fb-profile__action-edit",children:[(0,c.jsxs)("button",{type:"button",className:"fb-btn fb-btn--primary",onClick:nt,disabled:g,children:[(0,c.jsx)(Kn,{size:16}),(0,c.jsx)("span",{children:g?"\u0110ang l\u01b0u...":"L\u01b0u thay \u0111\u1ed5i"})]}),(0,c.jsxs)("button",{type:"button",className:"fb-btn fb-btn--light",onClick:Ze,children:[(0,c.jsx)(Gn,{size:16}),(0,c.jsx)("span",{children:"H\u1ee7y"})]})]}):(0,c.jsxs)("button",{type:"button",className:"fb-btn fb-btn--primary",onClick:Ye,children:[(0,c.jsx)(Jn,{size:16}),(0,c.jsx)("span",{children:"Ch\u1ec9nh s\u1eeda trang c\xe1 nh\xe2n"})]}),(0,c.jsxs)("button",{type:"button",className:"fb-btn fb-btn--light",children:[(0,c.jsx)($n,{size:16}),(0,c.jsx)("span",{children:"Th\xeam v\xe0o tin"})]})]}):(0,c.jsxs)("div",{className:"fb-profile__action-group",children:[!Be&&!ze&&(0,c.jsxs)("button",{type:"button",className:"fb-btn fb-btn--primary",onClick:async()=>{if(!e)return;const t=(0,h.ug)();if(null!==t&&void 0!==t&&t.id){He(!0);try{await F(e)?rt("success","\u0110\xe3 g\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n!"):rt("error","Kh\xf4ng th\u1ec3 g\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n")}catch(n){console.error("Error sending friend request:",n),rt("error","C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi l\u1eddi m\u1eddi")}finally{He(!1)}}else alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 th\xeam b\u1ea1n b\xe8")},disabled:We,children:[(0,c.jsx)(Q,{size:16}),(0,c.jsx)("span",{children:We?"\u0110ang g\u1eedi...":"Th\xeam b\u1ea1n b\xe8"})]}),!Be&&ze&&(0,c.jsxs)("button",{type:"button",className:"fb-btn fb-btn--secondary",children:[(0,c.jsx)($,{size:16}),(0,c.jsx)("span",{children:"B\u1ea1n b\xe8"})]}),(0,c.jsxs)("button",{type:"button",className:"fb-btn fb-btn--secondary",children:[(0,c.jsx)(Qn,{size:16}),(0,c.jsx)("span",{children:"Nh\u1eafn tin"})]}),(0,c.jsx)("button",{type:"button",className:"fb-btn fb-btn--icon","aria-label":"T\xf9y ch\u1ecdn kh\xe1c",children:(0,c.jsx)(Xn,{size:18})})]})})]}),(0,c.jsxs)("div",{className:"fb-profile__tabs",role:"tablist",children:[(0,c.jsx)("button",{type:"button",className:"fb-profile__tab fb-profile__tab--active",role:"tab","aria-selected":"true",children:"B\xe0i vi\u1ebft"}),(0,c.jsx)("button",{type:"button",className:"fb-profile__tab",role:"tab",children:"Chi ti\u1ebft v\u1ec1 D\u01b0\u01a1ng Thu\u1eadn Tri"}),(0,c.jsx)("button",{type:"button",className:"fb-profile__tab",role:"tab",children:"B\u1ea1n b\xe8"}),(0,c.jsx)("button",{type:"button",className:"fb-profile__tab",role:"tab",children:"\u1ea2nh"}),(0,c.jsx)("button",{type:"button",className:"fb-profile__tab",role:"tab",children:"Video"}),(0,c.jsx)("button",{type:"button",className:"fb-profile__tab",role:"tab",children:"Xem th\xeam"})]}),(0,c.jsxs)("div",{className:"fb-profile__layout",children:[(0,c.jsx)("aside",{className:"fb-profile__sidebar",children:d?(0,c.jsxs)("div",{className:"fb-card fb-profile__edit-card",children:[(0,c.jsx)("div",{className:"fb-card__header",children:(0,c.jsx)("h2",{children:"Ch\u1ec9nh s\u1eeda th\xf4ng tin"})}),(0,c.jsxs)("div",{className:"fb-profile__edit-body",children:[(0,c.jsxs)("div",{className:"form-grid",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",htmlFor:"profile-first-name",children:"H\u1ecd"}),(0,c.jsx)("input",{id:"profile-first-name",type:"text",name:"firstName",value:f.firstName,onChange:Qe,className:"form-input".concat(I.firstName?" error":""),placeholder:"Nh\u1eadp h\u1ecd c\u1ee7a b\u1ea1n",title:"H\u1ecd"}),I.firstName&&(0,c.jsx)("div",{className:"field-error",children:I.firstName})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",htmlFor:"profile-last-name",children:"T\xean"}),(0,c.jsx)("input",{id:"profile-last-name",type:"text",name:"lastName",value:f.lastName,onChange:Qe,className:"form-input".concat(I.lastName?" error":""),placeholder:"Nh\u1eadp t\xean c\u1ee7a b\u1ea1n",title:"T\xean"}),I.lastName&&(0,c.jsx)("div",{className:"field-error",children:I.lastName})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",htmlFor:"profile-phone-number",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,c.jsx)("input",{id:"profile-phone-number",type:"tel",name:"phoneNumber",value:f.phoneNumber,onChange:Qe,className:"form-input".concat(I.phoneNumber?" error":""),placeholder:"0909123456",title:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),I.phoneNumber&&(0,c.jsx)("div",{className:"field-error",children:I.phoneNumber})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",htmlFor:"profile-dob",children:"Ng\xe0y sinh"}),(0,c.jsx)("input",{id:"profile-dob",type:"date",name:"dateOfBirth",value:(e=>{if(!e)return"";try{return new Date(e).toISOString().split("T")[0]}catch(t){return""}})(f.dateOfBirth),onChange:Qe,className:"form-input".concat(I.dateOfBirth?" error":"")}),I.dateOfBirth&&(0,c.jsx)("div",{className:"field-error",children:I.dateOfBirth})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("span",{className:"form-label",children:"Gi\u1edbi t\xednh"}),(0,c.jsxs)("div",{className:"radio-group",children:[(0,c.jsxs)("label",{className:"radio-option",children:[(0,c.jsx)("input",{type:"radio",name:"gender",checked:!0===f.gender,onChange:()=>Xe(!0)}),(0,c.jsx)("span",{children:"Nam"})]}),(0,c.jsxs)("label",{className:"radio-option",children:[(0,c.jsx)("input",{type:"radio",name:"gender",checked:!1===f.gender,onChange:()=>Xe(!1)}),(0,c.jsx)("span",{children:"N\u1eef"})]})]})]})]}),(0,c.jsxs)("div",{className:"fb-profile__edit-actions",children:[(0,c.jsx)("button",{type:"button",className:"fb-btn fb-btn--primary",onClick:nt,disabled:g,children:g?"\u0110ang l\u01b0u...":"L\u01b0u thay \u0111\u1ed5i"}),(0,c.jsx)("button",{type:"button",className:"fb-btn fb-btn--light",onClick:Ze,disabled:g,children:"H\u1ee7y"})]}),b.text&&(0,c.jsx)("div",{className:"profile-message ".concat(b.type),children:b.text})]})]}):(0,c.jsxs)("div",{className:"fb-card fb-profile__about-card",children:[(0,c.jsxs)("div",{className:"fb-card__header",children:[(0,c.jsx)("h2",{children:"Gi\u1edbi thi\u1ec7u"}),x&&(0,c.jsx)("button",{type:"button",className:"fb-link-button",onClick:Ye,children:"Ch\u1ec9nh s\u1eeda"})]}),(0,c.jsx)("ul",{className:"fb-profile__about-list",children:it.map(e=>(0,c.jsxs)("li",{children:[(0,c.jsx)(e.icon,{size:18}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"label",children:e.label}),(0,c.jsx)("span",{className:"value",children:e.value||"Ch\u01b0a c\u1eadp nh\u1eadt"})]})]},e.label))})]})}),(0,c.jsxs)("section",{className:"fb-profile__main",children:[x&&(0,c.jsxs)("div",{className:"fb-card fb-profile__composer",children:[(0,c.jsxs)("div",{className:"fb-profile__composer-top",children:[(0,c.jsx)("img",{src:S||(r.avatar&&""!==r.avatar.trim()?r.avatar:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQQEjGbsTwEJ2n8tZOeJWLkCivjuYDJBxQbIg&s"),alt:"\u1ea2nh \u0111\u1ea1i di\u1ec7n c\u1ee7a b\u1ea1n"}),(0,c.jsx)("button",{type:"button",children:"B\u1ea1n \u0111ang ngh\u0129 g\xec th\u1ebf?"})]}),(0,c.jsxs)("div",{className:"fb-profile__composer-actions",children:[(0,c.jsx)("button",{type:"button",children:"\ud83c\udfa5 Video tr\u1ef1c ti\u1ebfp"}),(0,c.jsx)("button",{type:"button",children:"\ud83d\udcf7 \u1ea2nh/video"}),(0,c.jsx)("button",{type:"button",children:"\ud83d\ude0a C\u1ea3m x\xfac/ho\u1ea1t \u0111\u1ed9ng"})]})]}),(0,c.jsxs)("div",{className:"fb-profile__posts",children:[z?(0,c.jsx)("div",{className:"loading-text",children:"\u23f3 \u0110ang t\u1ea3i b\xe0i vi\u1ebft..."}):0===U.length?(0,c.jsx)("div",{className:"empty-state",children:"Ch\u01b0a c\xf3 b\xe0i vi\u1ebft n\xe0o."}):U.map((e,t)=>{var o,s;const l=e.id,u=()=>e.authorName||"Ng\u01b0\u1eddi d\xf9ng";return(0,c.jsxs)("article",{className:"fb-post",ref:t===U.length-1?Y:null,style:{position:"relative"},children:[qe[l]&&(0,c.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,borderRadius:"8px"},children:(0,c.jsxs)("div",{style:{textAlign:"center"},children:[(0,c.jsx)("div",{className:"spinner",style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"40px",height:"40px",animation:"spin 1s linear infinite",margin:"0 auto 10px"}}),(0,c.jsx)("p",{style:{color:"#333",fontWeight:"bold"},children:"\u0110ang x\xf3a b\xe0i vi\u1ebft..."})]})}),(0,c.jsxs)("header",{className:"fb-post__header",children:[(0,c.jsx)("img",{src:e.authorAvatar||(null===r||void 0===r?void 0:r.avatar)||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQQEjGbsTwEJ2n8tZOeJWLkCivjuYDJBxQbIg&s",alt:u()}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:u()}),(0,c.jsxs)("div",{className:"fb-post__meta",children:[(0,c.jsx)("span",{children:e.time}),(0,c.jsx)("span",{"aria-hidden":"true",children:"\xb7"}),(0,c.jsx)("span",{children:"public"===e.audience?"\ud83c\udf0d C\xf4ng khai":"friends"===e.audience?"\ud83d\udc65 B\u1ea1n b\xe8":"private"===e.audience?"\ud83d\udd12 Ch\u1ec9 m\xecnh t\xf4i":e.audience})]})]}),Ke.current&&e.authorId===Ke.current.id&&(0,c.jsxs)("div",{className:"fb-post__menu-wrapper",children:[(0,c.jsx)("button",{className:"fb-post__more","aria-label":"T\xf9y ch\u1ecdn b\xe0i vi\u1ebft",onClick:()=>(e=>{Fe(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!t[e]}))})(l),children:"\u22ef"}),De[l]&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"fb-post__menu-overlay",onClick:()=>kt(l)}),(0,c.jsxs)("div",{className:"fb-post__menu",children:[(0,c.jsxs)("button",{type:"button",onClick:()=>(e=>{kt(e),n("/poster/".concat(e,"/edit"))})(l),className:"fb-post__menu-item",children:[(0,c.jsx)("span",{className:"fb-post__menu-icon",children:"\u270f\ufe0f"}),(0,c.jsx)("span",{children:"Ch\u1ec9nh s\u1eeda b\xe0i vi\u1ebft"})]}),(0,c.jsxs)("button",{type:"button",onClick:()=>St(l,e.authorId,e.isShare),className:"fb-post__menu-item fb-post__menu-item--danger",children:[(0,c.jsx)("span",{className:"fb-post__menu-icon",children:"\ud83d\uddd1\ufe0f"}),(0,c.jsx)("span",{children:"X\xf3a b\xe0i vi\u1ebft"})]})]})]})]})]}),e.isShare&&e.shareContent&&(0,c.jsx)("p",{className:"fb-post__content",children:e.shareContent}),e.isShare&&e.originalPosterId?(0,c.jsxs)("div",{className:"fb-post__shared-content fb-post__shared-content--clickable",onClick:()=>n("/poster/".concat(e.originalPosterId)),children:[(0,c.jsxs)("div",{className:"fb-post__shared-header",children:[(0,c.jsx)("img",{src:e.originalAuthorAvatar||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:e.originalAuthorName}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:e.originalAuthorName}),(0,c.jsx)("span",{className:"fb-post__shared-meta",children:"B\xe0i vi\u1ebft g\u1ed1c"})]})]}),(0,c.jsx)("p",{className:"fb-post__shared-text",children:e.originalContent}),e.originalImages&&e.originalImages.length>0&&(0,c.jsx)("div",{className:"fb-post__shared-media",children:1===e.originalImages.length?(0,c.jsx)("img",{src:e.originalImages[0],alt:"\u1ea2nh g\u1ed1c",className:"fb-post__shared-image-single"}):(0,c.jsxs)("div",{className:"fb-post__image-grid ".concat(2===e.originalImages.length?"fb-post__image-grid--two":""),children:[e.originalImages.slice(0,4).map((e,t)=>(0,c.jsx)("img",{src:e,alt:"\u1ea2nh ".concat(t+1)},t)),e.originalImages.length>4&&(0,c.jsxs)("div",{className:"fb-post__image-more",children:["+",e.originalImages.length-4]})]})}),e.originalVideos&&e.originalVideos.length>0&&(0,c.jsx)("div",{className:"fb-post__shared-media",children:e.originalVideos.map((e,t)=>(0,c.jsx)("video",{src:e.url,controls:!0,className:"fb-post__shared-video",poster:e.thumbnailUrl,children:"Your browser does not support video."},t))})]}):(0,c.jsxs)(c.Fragment,{children:[!e.isShare&&(0,c.jsx)("p",{className:"fb-post__content",children:e.content}),!e.isShare&&e.images&&e.images.length>0&&(0,c.jsx)("figure",{className:"fb-post__image",children:1===e.images.length?e.images[0].startsWith("data:video/")?(0,c.jsx)("video",{src:e.images[0],controls:!0,className:"fb-post__video",children:"Your browser does not support video."}):(0,c.jsx)("img",{src:e.images[0],alt:"\u1ea2nh c\u1ee7a ".concat(u()),onClick:()=>Nt(e.images,0),className:"clickable-image"}):(0,c.jsxs)("div",{className:"fb-post__image-grid ".concat(2===e.images.length?"fb-post__image-grid--two":""),children:[e.images.slice(0,4).map((t,n)=>t.startsWith("data:video/")?(0,c.jsx)("video",{src:t,controls:!0,className:"fb-post__video-grid",children:"Your browser does not support video."},n):(0,c.jsx)("img",{src:t,alt:"\u1ea2nh ".concat(n+1," c\u1ee7a ").concat(u()),onClick:()=>Nt(e.images,n),className:"clickable-image"},n)),e.images.length>4&&(0,c.jsxs)("div",{className:"fb-post__image-more clickable-image",onClick:()=>Nt(e.images,3),children:["+",e.images.length-4]})]})}),!e.isShare&&e.videos&&e.videos.length>0&&(0,c.jsx)("figure",{className:"fb-post__image",children:e.videos.map((e,t)=>(0,c.jsx)("video",{src:e.url,controls:!0,className:"fb-post__video",poster:e.thumbnailUrl,children:"Your browser does not support video."},t))})]}),(0,c.jsxs)("footer",{className:"fb-post__footer",children:[(0,c.jsxs)("div",{className:"fb-post__stats",children:[(0,c.jsxs)("span",{className:oe[l]>0?"has-reactions":"",children:["\ud83d\udc4d ",(oe[l]||0).toLocaleString("vi-VN")]}),(0,c.jsxs)("span",{onClick:()=>mt(l),className:"fb-post__stats-clickable clickable-text",children:[me[l]||0," b\xecnh lu\u1eadn"]}),(0,c.jsx)("span",{children:"0 l\u01b0\u1ee3t chia s\u1ebb"})]}),(0,c.jsxs)("div",{className:"fb-post__actions",children:[(0,c.jsx)("button",{type:"button",className:"fb-post__action-btn ".concat(se[l]?"liked":""),onClick:()=>(async e=>{const t=Ke.current;if(null===t||void 0===t||!t.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 th\xedch b\xe0i vi\u1ebft");if(ce[e])return;const n=U.find(t=>t.id===e),r=(null===n||void 0===n?void 0:n.isShare)||!1,a=se[e]||!1,o=oe[e]||0;le(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!a})),ie(t=>(0,i.A)((0,i.A)({},t),{},{[e]:a?Math.max(0,o-1):o+1})),ue(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0}));try{if(r)if(a)await br(e,t.id);else{const n=await vr(e,{userId:t.id}),r="number"===typeof n?n:n.likeCount||0;ie(t=>(0,i.A)((0,i.A)({},t),{},{[e]:r}))}else{let n=!1;if(a?(n=await nr(e,t.id),n&&(or(e,t.id,!1),le(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1})))):(n=await tr(e,t.id),n&&(or(e,t.id,!0),le(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0})))),n){const t=await rr(e);ie(n=>(0,i.A)((0,i.A)({},n),{},{[e]:t}))}else le(t=>(0,i.A)((0,i.A)({},t),{},{[e]:a})),ie(t=>(0,i.A)((0,i.A)({},t),{},{[e]:o}))}}catch(s){console.error("\u274c Error toggling like:",s),le(t=>(0,i.A)((0,i.A)({},t),{},{[e]:a})),ie(t=>(0,i.A)((0,i.A)({},t),{},{[e]:o}))}finally{ue(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1}))}})(l),disabled:ce[l],children:se[l]?"\u2764\ufe0f \u0110\xe3 th\xedch":"\ud83d\udc4d Th\xedch"}),(0,c.jsx)("button",{type:"button",className:"fb-post__action-btn",onClick:()=>mt(l),children:"\ud83d\udcac B\xecnh lu\u1eadn"}),(0,c.jsx)("button",{type:"button",className:"fb-post__action-btn",children:"\u2197\ufe0f Chia s\u1ebb"})]}),pe[l]&&(0,c.jsxs)("div",{className:"fb-post__comments",children:[(0,c.jsxs)("div",{className:"fb-comment-input",children:[(0,c.jsx)("img",{src:(null===(o=Ke.current)||void 0===o?void 0:o.avatar)||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:"Your avatar",className:"fb-comment-input__avatar"}),(0,c.jsxs)("div",{className:"fb-comment-input__field",children:[(0,c.jsx)("input",{type:"text",placeholder:"Vi\u1ebft b\xecnh lu\u1eadn...",value:ye[l]||"",onChange:e=>xe(t=>(0,i.A)((0,i.A)({},t),{},{[l]:e.target.value})),onKeyPress:e=>{"Enter"!==e.key||we[l]||pt(l)},disabled:we[l]}),(null===(s=ye[l])||void 0===s?void 0:s.trim())&&(0,c.jsx)("button",{type:"button",onClick:()=>pt(l),disabled:we[l],className:"fb-comment-input__submit",children:we[l]?"...":"\u27a4"})]})]}),ve[l]?(0,c.jsx)("div",{className:"fb-comments-loading",children:"\u0110ang t\u1ea3i b\xecnh lu\u1eadn..."}):de[l]&&de[l].length>0?(0,c.jsx)("div",{className:"fb-comments-list",children:de[l].map(e=>{var t,n,r,o;return(0,c.jsxs)("div",{className:"fb-comment",children:[(0,c.jsx)(a.k2,{to:"/user/".concat(e.idUser),className:"fb-post__author",children:(0,c.jsx)("img",{src:e.userAvatar||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:"".concat(e.userFirstName," ").concat(e.userLastName),className:"fb-comment__avatar"})}),(0,c.jsxs)("div",{className:"fb-comment__content",children:[Ae[e.idComment]?(0,c.jsxs)("div",{className:"fb-comment__edit",children:[(0,c.jsx)("input",{type:"text",value:Ie[e.idComment]||"",onChange:t=>Re(n=>(0,i.A)((0,i.A)({},n),{},{[e.idComment]:t.target.value})),onKeyDown:t=>{"Enter"!==t.key||t.shiftKey?"Escape"===t.key&&bt(e.idComment,l,e.content):(t.preventDefault(),yt(l,e.idComment))},className:"fb-comment__edit-field",disabled:Oe[e.idComment],autoFocus:!0}),(0,c.jsxs)("div",{className:"fb-comment__edit-actions",children:[(0,c.jsx)("button",{type:"button",onClick:()=>bt(e.idComment,l,e.content),disabled:Oe[e.idComment],children:"H\u1ee7y"}),(0,c.jsx)("button",{type:"button",onClick:()=>yt(l,e.idComment),disabled:Oe[e.idComment]||!(null!==(t=Ie[e.idComment])&&void 0!==t&&t.trim()),className:"btn-primary",children:Oe[e.idComment]?"\u0110ang l\u01b0u...":"L\u01b0u"})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"fb-comment__bubble",children:[(0,c.jsx)("strong",{children:e.userFirstName&&e.userLastName?"".concat(e.userFirstName," ").concat(e.userLastName).trim():e.userName||"Ng\u01b0\u1eddi d\xf9ng"}),(0,c.jsx)("p",{children:e.content})]}),(0,c.jsxs)("div",{className:"fb-comment__meta",children:[(0,c.jsx)("span",{children:sr(e.createdAt)}),(0,c.jsx)("button",{type:"button",children:"Th\xedch"}),(0,c.jsx)("button",{type:"button",onClick:()=>gt(e.idComment,l),children:"Ph\u1ea3n h\u1ed3i"}),(null===(n=Ke.current)||void 0===n?void 0:n.id)===e.idUser&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{type:"button",onClick:()=>bt(e.idComment,l,e.content),children:"S\u1eeda"}),(0,c.jsx)("button",{type:"button",onClick:()=>xt(l,e.idComment),children:"X\xf3a"})]})]})]}),ke[e.idComment]&&(0,c.jsxs)("div",{className:"fb-reply-input",children:[(0,c.jsx)("img",{src:(null===(r=Ke.current)||void 0===r?void 0:r.avatar)||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:"Your avatar",className:"fb-reply-input__avatar"}),(0,c.jsxs)("div",{className:"fb-reply-input__field-wrapper",children:[(0,c.jsx)("input",{type:"text",placeholder:"Vi\u1ebft ph\u1ea3n h\u1ed3i...",value:je[e.idComment]||"",onChange:t=>Ce(n=>(0,i.A)((0,i.A)({},n),{},{[e.idComment]:t.target.value})),onKeyDown:t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),vt(l,e.idComment))},className:"fb-reply-input__field",disabled:_e[e.idComment]}),(null===(o=je[e.idComment])||void 0===o?void 0:o.trim())&&(0,c.jsx)("button",{type:"button",onClick:()=>vt(l,e.idComment),disabled:_e[e.idComment],className:"fb-reply-input__submit",children:_e[e.idComment]?"...":"\u27a4"})]})]}),e.replies&&e.replies.length>0&&(0,c.jsx)("div",{className:"fb-comment__replies",children:e.replies.map(e=>wt(e,l,1))})]})]},e.idComment)})}):(0,c.jsx)("div",{className:"fb-comments-empty",children:"Ch\u01b0a c\xf3 b\xecnh lu\u1eadn n\xe0o"})]})]})]},l)}),K&&(0,c.jsxs)("div",{className:"fb-loading-more",children:[(0,c.jsx)("div",{className:"fb-spinner"}),(0,c.jsx)("p",{children:"\u0110ang t\u1ea3i th\xeam b\xe0i vi\u1ebft..."})]}),!q&&U.length>0&&(0,c.jsx)("div",{className:"fb-no-more-posts",children:(0,c.jsx)("p",{children:"\u0110\xe3 hi\u1ec3n th\u1ecb t\u1ea5t c\u1ea3 b\xe0i vi\u1ebft"})})]})]})]})]}),Z&&(0,c.jsx)(Cr,{images:te,currentIndex:re,onClose:()=>{ee(!1)},onNext:()=>{ae(e=>Math.min(e+1,te.length-1))},onPrev:()=>{ae(e=>Math.max(e-1,0))}})]}):(0,c.jsx)("div",{className:"error-container",children:(0,c.jsxs)("div",{className:"error-message",children:[(0,c.jsx)("p",{children:"\u274c Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi d\xf9ng"}),(0,c.jsx)("a",{href:"/",className:"back-link",children:"\u2190 Quay l\u1ea1i trang ch\u1ee7"})]})})},Er=e=>{let{groupId:n,members:r,currentUserId:a,currentUserRole:o,creatorId:i,onMemberRemoved:s}=e;const[l,u]=(0,t.useState)(null),[d,h]=(0,t.useState)({show:!1,member:null}),m=()=>{h({show:!1,member:null})},f=e=>e.id!==i&&("ADMIN"===o&&e.id!==a||e.id===a);return(0,c.jsxs)("div",{className:"group-members-container",children:[(0,c.jsxs)("h3",{className:"members-title",children:["Th\xe0nh vi\xean (",r.length,")"]}),(0,c.jsx)("div",{className:"members-list",children:r.map(e=>(0,c.jsxs)("div",{className:"member-item",children:[(0,c.jsxs)("div",{className:"member-info",children:[(0,c.jsx)("div",{className:"member-avatar",children:e.avatar?(0,c.jsx)("img",{src:e.avatar,alt:e.username}):(0,c.jsx)("div",{className:"avatar-placeholder",children:e.username.charAt(0).toUpperCase()})}),(0,c.jsxs)("div",{className:"member-details",children:[(0,c.jsx)("span",{className:"member-name",children:e.username}),(0,c.jsx)("span",{className:"member-role ".concat(e.role.toLowerCase()),children:"ADMIN"===e.role?"Qu\u1ea3n tr\u1ecb vi\xean":"Th\xe0nh vi\xean"})]})]}),f(e)&&(0,c.jsx)("button",{className:"remove-member-btn",onClick:()=>(e=>{h({show:!0,member:e})})(e),disabled:l===e.id,title:e.id===a?"R\u1eddi kh\u1ecfi nh\xf3m":"X\xf3a th\xe0nh vi\xean",children:l===e.id?"...":e.id===a?"\ud83d\udeaa R\u1eddi":"\u274c"})]},e.id))}),d.show&&d.member&&(0,c.jsx)("div",{className:"modal-overlay",onClick:m,children:(0,c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,c.jsx)("h3",{children:"X\xe1c nh\u1eadn"}),(0,c.jsx)("p",{children:d.member.id===a?"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n r\u1eddi kh\u1ecfi nh\xf3m n\xe0y?":"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a ".concat(d.member.username," kh\u1ecfi nh\xf3m?")}),(0,c.jsxs)("div",{className:"modal-actions",children:[(0,c.jsx)("button",{onClick:async()=>{if(d.member)try{if(console.log("\ud83d\uddd1\ufe0f Removing member:",d.member),console.log("\ud83d\udce4 API Call Params:",{groupId:n,userId:d.member.userId,requesterId:a,userIdType:typeof d.member.userId,requesterIdType:typeof a}),!d.member.userId)return void alert("\u274c L\u1ed7i: Kh\xf4ng t\xecm th\u1ea5y userId c\u1ee7a th\xe0nh vi\xean. Data: "+JSON.stringify(d.member));u(d.member.userId),await(0,U.S9)(n,d.member.userId,a),console.log("\u2705 Member removed successfully"),s(d.member.userId),h({show:!1,member:null})}catch(e){console.error("\u274c Failed to remove member:",e),alert("L\u1ed7i x\xf3a th\xe0nh vi\xean:\n".concat(e.message||"Kh\xf4ng th\u1ec3 x\xf3a th\xe0nh vi\xean","\n\nChi ti\u1ebft: ").concat(JSON.stringify(e)))}finally{u(null)}},className:"btn-confirm",children:"X\xe1c nh\u1eadn"}),(0,c.jsx)("button",{onClick:m,className:"btn-cancel",children:"H\u1ee7y"})]})]})})]})},Ar=()=>{const{groupId:e}=(0,a.g)(),n=(0,a.Zp)(),[r,o]=(0,t.useState)([]),[i,s]=(0,t.useState)(!0),[l,u]=(0,t.useState)(null),[d,m]=(0,t.useState)(null),[f,p]=(0,t.useState)("MEMBER"),[g,v]=(0,t.useState)("");(0,t.useEffect)(()=>{const e=(0,h.ug)();e?(m(e),b()):n("/login")},[e]);const b=async()=>{if(e)try{s(!0);const t=await(0,U.Nk)(e);console.log("\ud83d\udccb Loaded group members:",t),o(t);const n=(0,h.ug)(),r=t.find(e=>e.userId===(null===n||void 0===n?void 0:n.id));r&&p(r.role);const a=t.find(e=>"ADMIN"===e.role);a&&v(a.userId),u(null)}catch(t){u(t.message||"Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch th\xe0nh vi\xean")}finally{s(!1)}},y=()=>{n("/chat")};return i?(0,c.jsx)("div",{className:"group-members-page",children:(0,c.jsxs)("div",{className:"loading-container",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsx)("p",{children:"\u0110ang t\u1ea3i danh s\xe1ch th\xe0nh vi\xean..."})]})}):l?(0,c.jsx)("div",{className:"group-members-page",children:(0,c.jsxs)("div",{className:"error-container",children:[(0,c.jsx)("h3",{children:"\u274c L\u1ed7i"}),(0,c.jsx)("p",{children:l}),(0,c.jsx)("button",{onClick:y,className:"back-btn",children:"Quay l\u1ea1i Chat"})]})}):(0,c.jsxs)("div",{className:"group-members-page",children:[(0,c.jsxs)("div",{className:"page-header",children:[(0,c.jsx)("button",{onClick:y,className:"back-button",children:"\u2190 Quay l\u1ea1i"}),(0,c.jsx)("h1",{children:"Qu\u1ea3n l\xfd th\xe0nh vi\xean nh\xf3m"})]}),(0,c.jsx)("div",{className:"page-content",children:e&&d&&(0,c.jsx)(Er,{groupId:e,members:r,currentUserId:d.id,currentUserRole:f,creatorId:g,onMemberRemoved:e=>{o(t=>t.filter(t=>t.userId!==e)),d&&e===d.id&&(alert("B\u1ea1n \u0111\xe3 b\u1ecb x\xf3a kh\u1ecfi nh\xf3m"),n("/chat"))}})})]})},Tr="https://unpessimistically-unbewailed-christy.ngrok-free.dev/api/weathers",Ir=async e=>{try{return(await Cn.get("".concat(Tr,"/forecast-5day"),{params:{city:e}})).data}catch(t){throw console.error("Error fetching 5-day forecast:",t),t}},Rr=()=>{var e;const[n,r]=(0,t.useState)(null),[a,o]=(0,t.useState)(null),[i,s]=(0,t.useState)(!0),[l,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[m,f]=(0,t.useState)(""),[p,g]=(0,t.useState)(!1);(0,t.useEffect)(()=>{v()},[]);const v=async()=>{try{s(!0),u(null);const t=await new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lon:t.coords.longitude})},e=>{t(e)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):t(new Error("Geolocation is not supported by your browser"))}),n=await(async(e,t)=>{try{return(await Cn.get("".concat(Tr,"/by-coordinates"),{params:{lat:e,lon:t}})).data}catch(l){throw console.error("Error fetching weather by coordinates:",l),l}})(t.lat,t.lon);if(n){if(r(n),n.name)try{const e=await Ir(n.name);o(e)}catch(e){console.error("Forecast fetch error:",e)}}else u("Kh\xf4ng th\u1ec3 l\u1ea5y th\xf4ng tin th\u1eddi ti\u1ebft")}catch(t){console.error("Weather fetch error:",t),t.message&&t.message.includes("Geolocation")?u("Vui l\xf2ng cho ph\xe9p truy c\u1eadp v\u1ecb tr\xed"):u("Kh\xf4ng th\u1ec3 t\u1ea3i th\u1eddi ti\u1ebft")}finally{s(!1)}},b=async e=>{if(e.trim())try{g(!0),u(null);const n=await(async e=>{try{return(await Cn.get("".concat(Tr,"/current"),{params:{city:e}})).data}catch(l){throw console.error("Error fetching current weather:",l),l}})(e);if(n){r(n);try{const t=await Ir(e);o(t)}catch(t){console.error("Forecast fetch error:",t)}}else u("Kh\xf4ng t\xecm th\u1ea5y th\xe0nh ph\u1ed1")}catch(n){console.error("City weather fetch error:",n),u("Kh\xf4ng t\xecm th\u1ea5y th\xe0nh ph\u1ed1 n\xe0y")}finally{g(!1)}},y=e=>e?"http://openweathermap.org/img/wn/".concat(e,"@2x.png"):"",x=e=>{const t=new Date(1e3*e),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const a=t.toLocaleDateString("vi-VN"),o=n.toLocaleDateString("vi-VN"),i=r.toLocaleDateString("vi-VN");return a===o?"H\xf4m nay":a===i?"Ng\xe0y mai":t.toLocaleDateString("vi-VN",{weekday:"short",day:"numeric",month:"numeric"})};if(i)return(0,c.jsx)("div",{className:"weather-widget",children:(0,c.jsxs)("div",{className:"weather-loading",children:[(0,c.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status",children:(0,c.jsx)("span",{className:"visually-hidden",children:"\u0110ang t\u1ea3i..."})}),(0,c.jsx)("span",{className:"ms-2",children:"\u0110ang t\u1ea3i th\u1eddi ti\u1ebft..."})]})});if(l)return(0,c.jsx)("div",{className:"weather-widget",children:(0,c.jsxs)("div",{className:"weather-error",children:[(0,c.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),(0,c.jsx)("span",{children:l}),(0,c.jsx)("button",{className:"btn btn-sm btn-link p-0 ms-2",onClick:v,title:"Th\u1eed l\u1ea1i",children:(0,c.jsx)("i",{className:"bi bi-arrow-clockwise"})})]})});if(!n||!n.main)return null;const w=null===(e=n.weather)||void 0===e?void 0:e[0],N=Math.round(n.main.temp),k=Math.round(n.main.feels_like),S=n.main.humidity,j=n.wind?Math.round(3.6*n.wind.speed):0,C=n.main.pressure,_=(null===w||void 0===w?void 0:w.description)||"N/A",E=null===w||void 0===w?void 0:w.icon,A=n.name||"V\u1ecb tr\xed c\u1ee7a b\u1ea1n",T=(()=>{if(!a||!a.list)return[];const e=new Map;return a.list.forEach(t=>{const n=new Date(1e3*t.dt),r=n.toLocaleDateString("vi-VN"),a=n.getHours();(!e.has(r)||Math.abs(a-12)<Math.abs(new Date(1e3*e.get(r).dt).getHours()-12))&&e.set(r,t)}),Array.from(e.values()).slice(0,5)})();return(0,c.jsxs)("div",{className:"weather-widget",children:[(0,c.jsxs)("h3",{className:"weather-title",children:[(0,c.jsx)("i",{className:"bi bi-cloud-sun me-2"}),"Th\u1eddi ti\u1ebft"]}),(0,c.jsxs)("div",{className:"weather-content",children:[(0,c.jsx)("form",{onSubmit:e=>{e.preventDefault(),m.trim()&&b(m)},className:"weather-search",children:(0,c.jsxs)("div",{className:"weather-search-wrapper",children:[(0,c.jsx)("input",{type:"text",value:m,onChange:e=>f(e.target.value),placeholder:"T\xecm ki\u1ebfm th\xe0nh ph\u1ed1...",className:"weather-search-input",disabled:p}),(0,c.jsx)("button",{type:"submit",className:"weather-search-btn",disabled:p||!m.trim(),title:"T\xecm ki\u1ebfm",children:(0,c.jsx)("i",{className:"bi bi-search"})}),(0,c.jsx)("button",{type:"button",className:"weather-location-btn",onClick:v,disabled:i,title:"V\u1ecb tr\xed c\u1ee7a t\xf4i",children:(0,c.jsx)("i",{className:"bi bi-geo-alt-fill"})})]})}),(0,c.jsxs)("div",{className:"weather-main",children:[(0,c.jsxs)("div",{className:"weather-location",children:[(0,c.jsx)("i",{className:"bi bi-geo-alt me-1"}),A]}),(0,c.jsxs)("div",{className:"weather-display",children:[E&&(0,c.jsx)("img",{src:y(E),alt:_,className:"weather-icon"}),(0,c.jsxs)("div",{className:"weather-temp-main",children:[(0,c.jsxs)("div",{className:"temp-value",children:[N,"\xb0C"]}),(0,c.jsx)("div",{className:"temp-description",children:_})]})]})]}),(0,c.jsxs)("div",{className:"weather-details",children:[(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("i",{className:"bi bi-thermometer-half"}),(0,c.jsxs)("span",{children:["C\u1ea3m gi\xe1c: ",k,"\xb0C"]})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("i",{className:"bi bi-droplet"}),(0,c.jsxs)("span",{children:["\u0110\u1ed9 \u1ea9m: ",S,"%"]})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("i",{className:"bi bi-wind"}),(0,c.jsxs)("span",{children:["Gi\xf3: ",j," km/h"]})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("i",{className:"bi bi-speedometer"}),(0,c.jsxs)("span",{children:["\xc1p su\u1ea5t: ",C," hPa"]})]})]}),T.length>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("button",{className:"btn btn-sm btn-outline-secondary w-100 mt-2",onClick:()=>h(!d),children:[(0,c.jsx)("i",{className:"bi bi-chevron-".concat(d?"up":"down"," me-1")}),d?"\u1ea8n":"Xem"," d\u1ef1 b\xe1o 5 ng\xe0y"]}),d&&(0,c.jsx)("div",{className:"forecast-container",children:T.map((e,t)=>{var n,r,a;return(0,c.jsxs)("div",{className:"forecast-day",children:[(0,c.jsx)("div",{className:"forecast-date",children:x(e.dt)}),(0,c.jsx)("img",{src:y(null===(n=e.weather[0])||void 0===n?void 0:n.icon),alt:null===(r=e.weather[0])||void 0===r?void 0:r.description,className:"forecast-icon"}),(0,c.jsxs)("div",{className:"forecast-temp",children:[Math.round(e.main.temp),"\xb0C"]}),(0,c.jsx)("div",{className:"forecast-desc",children:null===(a=e.weather[0])||void 0===a?void 0:a.description})]},e.dt)})})]}),(0,c.jsxs)("button",{className:"btn btn-sm btn-outline-primary w-100 mt-2",onClick:v,children:[(0,c.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"C\u1eadp nh\u1eadt"]})]}),(0,c.jsx)("style",{children:"\n        .weather-widget {\n          background: #fff;\n          border-radius: 8px;\n          padding: 16px;\n          margin-top: 16px;\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n        }\n\n        .weather-title {\n          font-size: 1.1rem;\n          font-weight: 600;\n          margin-bottom: 12px;\n          color: #1c1e21;\n          display: flex;\n          align-items: center;\n        }\n\n        .weather-content {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n        }\n\n        .weather-search {\n          width: 100%;\n        }\n\n        .weather-search-wrapper {\n          display: flex;\n          gap: 8px;\n          align-items: center;\n        }\n\n        .weather-search-input {\n          flex: 1;\n          padding: 8px 12px;\n          border: 1px solid #e4e6eb;\n          border-radius: 20px;\n          font-size: 0.9rem;\n          outline: none;\n          transition: border-color 0.2s;\n        }\n\n        .weather-search-input:focus {\n          border-color: #1877f2;\n        }\n\n        .weather-search-input:disabled {\n          background: #f0f2f5;\n          cursor: not-allowed;\n        }\n\n        .weather-search-btn,\n        .weather-location-btn {\n          width: 36px;\n          height: 36px;\n          border-radius: 50%;\n          border: none;\n          background: #1877f2;\n          color: white;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: background 0.2s;\n          flex-shrink: 0;\n        }\n\n        .weather-search-btn:hover:not(:disabled),\n        .weather-location-btn:hover:not(:disabled) {\n          background: #0f5aca;\n        }\n\n        .weather-search-btn:disabled,\n        .weather-location-btn:disabled {\n          background: #e4e6eb;\n          color: #65676b;\n          cursor: not-allowed;\n        }\n\n        .weather-location-btn {\n          background: #42b72a;\n        }\n\n        .weather-location-btn:hover:not(:disabled) {\n          background: #36a420;\n        }\n\n        .weather-main {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n\n        .weather-location {\n          font-size: 0.9rem;\n          color: #65676b;\n          display: flex;\n          align-items: center;\n        }\n\n        .weather-display {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n\n        .weather-icon {\n          width: 64px;\n          height: 64px;\n          object-fit: contain;\n        }\n\n        .weather-temp-main {\n          flex: 1;\n        }\n\n        .temp-value {\n          font-size: 2rem;\n          font-weight: bold;\n          color: #1c1e21;\n          line-height: 1;\n        }\n\n        .temp-description {\n          font-size: 0.9rem;\n          color: #65676b;\n          text-transform: capitalize;\n          margin-top: 4px;\n        }\n\n        .weather-details {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 8px;\n          padding-top: 12px;\n          border-top: 1px solid #e4e6eb;\n        }\n\n        .detail-item {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          font-size: 0.85rem;\n          color: #65676b;\n        }\n\n        .detail-item i {\n          font-size: 1rem;\n          color: #1877f2;\n        }\n\n        .weather-loading,\n        .weather-error {\n          display: flex;\n          align-items: center;\n          font-size: 0.9rem;\n          color: #65676b;\n        }\n\n        .weather-error {\n          color: #e4405f;\n        }\n\n        .weather-error .btn-link {\n          color: #1877f2;\n          text-decoration: none;\n        }\n\n        .weather-error .btn-link:hover {\n          opacity: 0.8;\n        }\n\n        .forecast-container {\n          display: flex;\n          flex-direction: column;\n          gap: 12px;\n          margin-top: 12px;\n          padding-top: 12px;\n          border-top: 1px solid #e4e6eb;\n          max-height: 400px;\n          overflow-y: auto;\n        }\n\n        .forecast-day {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 8px;\n          background: #f0f2f5;\n          border-radius: 8px;\n          transition: background 0.2s;\n        }\n\n        .forecast-day:hover {\n          background: #e4e6eb;\n        }\n\n        .forecast-date {\n          font-size: 0.85rem;\n          font-weight: 600;\n          color: #1c1e21;\n          min-width: 80px;\n        }\n\n        .forecast-icon {\n          width: 40px;\n          height: 40px;\n          object-fit: contain;\n        }\n\n        .forecast-temp {\n          font-size: 1.1rem;\n          font-weight: bold;\n          color: #1877f2;\n          min-width: 50px;\n        }\n\n        .forecast-desc {\n          font-size: 0.85rem;\n          color: #65676b;\n          text-transform: capitalize;\n          flex: 1;\n        }\n\n        @media (max-width: 768px) {\n          .weather-widget {\n            display: none;\n          }\n        }\n      "})]})},Or=[{id:1,name:"B\u1ea1n",image:"https://images.unsplash.com/photo-1545239351-1141bd82e8a6?auto=format&fit=crop&w=400&q=80",label:"T\u1ea1o tin",isCreate:!0},{id:2,name:"\u0110\u1ed3ng Qu\u1ed1c An",image:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80"},{id:3,name:"2000",image:"https://images.unsplash.com/photo-1575936123452-b67c3203c357?auto=format&fit=crop&w=400&q=80"},{id:4,name:"Wind Watch",image:"https://images.unsplash.com/photo-1524592094714-0f0654e20314?auto=format&fit=crop&w=400&q=80"},{id:5,name:"Anh \u0110a \u0110en",image:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=400&q=80"}],Pr=[{id:1,label:"B\u1ea1n b\xe8",icon:"\ud83d\udc65"},{id:2,label:"K\u1ef7 ni\u1ec7m",icon:"\ud83d\uddd3\ufe0f"},{id:3,label:"\u0110\xe3 l\u01b0u",icon:"\ud83d\udcd1"},{id:4,label:"Nh\xf3m",icon:"\ud83d\udc6a"},{id:5,label:"Marketplace",icon:"\ud83d\uded2"},{id:6,label:"Video tr\xean Watch",icon:"\ud83d\udcfa"},{id:7,label:"S\u1ef1 ki\u1ec7n",icon:"\ud83c\udf89"},{id:8,label:"Trang b\u1ea1n qu\u1ea3n l\xfd",icon:"\ud83d\udcc4"},{id:9,label:"Reels",icon:"\ud83c\udf9e\ufe0f"},{id:10,label:"Tr\xf2 ch\u01a1i",icon:"\ud83c\udfae"},{id:11,label:"V\u1ecb tr\xed",icon:"\ud83d\udccd"},{id:12,label:"Th\u1eddi ti\u1ebft",icon:"\u26c5"},{id:13,label:"Vi\u1ec7c l\xe0m",icon:"\ud83d\udcbc"},{id:14,label:"Ho\u1ea1t \u0111\u1ed9ng g\u1ea7n \u0111\xe2y",icon:"\ud83d\udd58"},{id:15,label:"Tin nh\u1eafn",icon:"\ud83d\udcac"},{id:16,label:"Trang c\xe1 nh\xe2n",icon:"\ud83d\ude4d\u200d\u2642\ufe0f"},{id:17,label:"C\xe0i \u0111\u1eb7t & Quy\u1ec1n ri\xeang t\u01b0",icon:"\u2699\ufe0f"},{id:18,label:"Trung t\xe2m h\u1ed7 tr\u1ee3",icon:"\u2753"},{id:19,label:"Ch\u01a1i game tr\xean cloud",icon:"\u2601\ufe0f\ud83c\udfae"},{id:20,label:"\u0110\u01a1n h\xe0ng Marketplace",icon:"\ud83d\udce6"},{id:21,label:"Kho\u1ea3nh kh\u1eafc",icon:"\ud83d\udcf8"},{id:22,label:"Nh\u1ea1c",icon:"\ud83c\udfb5"},{id:23,label:"Phim",icon:"\ud83c\udfac"},{id:24,label:"S\xe1ch",icon:"\ud83d\udcd8"},{id:25,label:"Ho\u1ea1t \u0111\u1ed9ng \u0111\u01b0\u1ee3c \u0111\u1ec1 xu\u1ea5t",icon:"\u2b50"},{id:26,label:"Ph\xf2ng h\u1ecdp m\u1eb7t",icon:"\ud83d\udcde"},{id:27,label:"Mua s\u1eafm tr\u1ef1c ti\u1ebfp",icon:"\ud83d\udecd\ufe0f"},{id:28,label:"\u1ee8ng d\u1ee5ng & Tr\xf2 ch\u01a1i",icon:"\ud83d\udcf1"},{id:29,label:"V\xed & Thanh to\xe1n",icon:"\ud83d\udcb3"},{id:30,label:"B\u1ea3ng x\u1ebfp h\u1ea1ng game",icon:"\ud83c\udfc6"}],Lr=()=>{var e,n;const r=(0,t.useRef)(null),o=(0,a.Zp)(),[l,u]=(0,t.useState)(!1),[d,m]=(0,t.useState)(!1),[f,p]=(0,t.useState)([]),[g,v]=(0,t.useState)(!0),[b,y]=(0,t.useState)(0),[x,w]=(0,t.useState)(!0),[N,k]=(0,t.useState)(!1),S=(0,t.useRef)(null),j=(0,t.useRef)(null),[C,_]=(0,t.useState)(!1),[E,A]=(0,t.useState)([]),[T,I]=(0,t.useState)(0),[R,L]=(0,t.useState)({}),[D,F]=(0,t.useState)({}),[z,V]=(0,t.useState)({}),[W,H]=(0,t.useState)({}),[q,J]=(0,t.useState)({}),[K,G]=(0,t.useState)({}),[$,Q]=(0,t.useState)({}),[X,Y]=(0,t.useState)({}),[Z,ee]=(0,t.useState)({}),[te,ne]=(0,t.useState)({}),[re,ae]=(0,t.useState)({}),[oe,ie]=(0,t.useState)({}),[se,le]=(0,t.useState)({}),[ce,ue]=(0,t.useState)({}),[de,he]=(0,t.useState)({}),[me,fe]=(0,t.useState)({}),[pe,ge]=(0,t.useState)({}),[ve,be]=(0,t.useState)({}),[ye,xe]=(0,t.useState)(null),[we,Ne]=(0,t.useState)(""),[ke,Se]=(0,t.useState)("PUBLIC"),[je,Ce]=(0,t.useState)(!1),[_e,Ee]=(0,t.useState)({}),[Ae,Te]=(0,t.useState)({}),Ie=(0,t.useRef)([]),Re=(0,t.useRef)(null),[Oe,Pe]=(0,t.useState)([]),[Le,Ue]=(0,t.useState)(!0),[De,Fe]=(0,t.useState)({}),ze=e=>e.userFirstName&&e.userLastName?"".concat(e.userFirstName," ").concat(e.userLastName):e.userName||"Ng\u01b0\u1eddi d\xf9ng",Me=(0,t.useCallback)(async()=>{try{const t=(0,h.ug)();if(null===t||void 0===t||!t.id)return void Ue(!1);const n=[],r=new Set;try{const a=await(0,U.Zn)(t.id);if(a&&a.length>0)for(const o of a){const a=o.participant1Id===t.id?o.participant2Id:o.participant1Id;if(!r.has(a))try{const e=await(0,B.kl)(a);if(e){const t="".concat(e.firstName||""," ").concat(e.lastName||"").trim()||e.username||"Ng\u01b0\u1eddi d\xf9ng";n.push({id:a,name:t,avatar:e.avatar,active:Math.random()>.5,type:"friend"}),r.add(a)}}catch(e){console.error("Failed to load user:",a,e)}}}catch(e){console.error("Failed to load conversations:",e)}try{const e=await M();e&&e.length>0&&e.forEach(e=>{const a=e.userId===t.id?e.friendId:e.userId,o=e.userId===t.id?e.friend:e.user;if(o&&a&&!r.has(a)){const e="".concat(o.firstName||""," ").concat(o.lastName||"").trim()||o.username||"B\u1ea1n b\xe8";n.push({id:a,name:e,avatar:o.avatar,active:Math.random()>.5,type:"friend"}),r.add(a)}})}catch(e){console.error("Failed to load friends:",e)}try{const e=await(0,U.P$)(t.id);e&&e.length>0&&e.forEach(e=>{n.push({id:e.id,name:e.groupName||"Nh\xf3m",avatar:void 0,active:!1,type:"group"})})}catch(e){console.error("Failed to load groups:",e)}console.log("\ud83d\udcdd Loaded contacts:",n.length,n),Pe(n),Ue(!1)}catch(t){console.error("Error loading contacts:",t),Ue(!1)}},[]),Be=(0,t.useCallback)((e,t)=>{const n=new Date(e.createdAt),r=new Date,a=Math.floor((r.getTime()-n.getTime())/6e4);let o="";o=a<60?"".concat(a," ph\xfat tr\u01b0\u1edbc"):a<1440?"".concat(Math.floor(a/60)," gi\u1edd tr\u01b0\u1edbc"):"".concat(Math.floor(a/1440)," ng\xe0y tr\u01b0\u1edbc");let i="public";return"PUBLIC"===e.privacyStatusName?i="public":"FRIENDS"===e.privacyStatusName?i="friends":"PRIVATE"===e.privacyStatusName&&(i="private"),{id:e.idPoster,authorId:e.idUser,authorName:ze(e),authorAvatar:e.userAvatar||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=120&q=80",time:o,audience:i,content:e.content,images:e.imageUrls&&e.imageUrls.length>0?e.imageUrls:void 0,image:e.imageUrls&&e.imageUrls.length>0?e.imageUrls[0]:void 0,videos:e.videos,reactions:0,comments:0,shares:0}},[]),Ve=(0,t.useCallback)(e=>{const t=new Date,n=new Date(e.createdAt),r=Math.floor((t.getTime()-n.getTime())/6e4);let a="";a=r<1?"V\u1eeba xong":r<60?"".concat(r," ph\xfat tr\u01b0\u1edbc"):r<1440?"".concat(Math.floor(r/60)," gi\u1edd tr\u01b0\u1edbc"):"".concat(Math.floor(r/1440)," ng\xe0y tr\u01b0\u1edbc");let o="public";return"PUBLIC"===e.privacyStatusName?o="public":"FRIENDS"===e.privacyStatusName?o="friends":"PRIVATE"===e.privacyStatusName&&(o="private"),{id:e.idShare,authorId:e.idUser,authorName:e.userName,authorAvatar:e.userAvatar||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=120&q=80",time:a,audience:o,content:e.content,reactions:e.likeCount||0,comments:e.commentCount||0,shares:0,isShare:!0,shareId:e.idShare,shareContent:e.content,shareUserId:e.idUser,shareUserName:e.userName,shareUserAvatar:e.userAvatar,shareCreatedAt:e.createdAt,sharePrivacy:o,originalPosterId:e.originalPoster.idPoster,originalAuthorName:e.originalPoster.userName,originalAuthorAvatar:e.originalPoster.userAvatar,originalContent:e.originalPoster.content,originalImages:e.originalPoster.images,originalVideos:e.originalPoster.videos}},[]),We=(0,t.useCallback)((e,t)=>{const n=e=>({idComment:e.idCommentShare,idPoster:t,content:e.content,idUser:e.idUser,parentCommentId:e.parentCommentId||null,createdAt:e.createdAt,updatedAt:e.updatedAt||e.createdAt,userName:e.userName,userAvatar:e.userAvatar,replyCount:e.replyCount||(e.replies?e.replies.length:0),replies:e.replies?e.replies.map(e=>n(e)):[]});return n(e)},[]),He=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{0===e?v(!0):k(!0);const t=(0,h.ug)();if(console.log("\ud83d\udcf1 Current user:",t),Re.current=t,null===t||void 0===t||!t.id)return console.warn("\u26a0\ufe0f No user logged in, cannot fetch posters"),p([]),void w(!1);console.log("\ud83d\udd0d Fetching visible posters for user:",t.id,"page:",e);const n=await(async e=>{try{return(await Cn.get("".concat(s.J,"/posters/feed/").concat(e))).data}catch(t){throw console.error("Error fetching visible posters:",t),t}})(t.id);console.log("\u2705 Received posters:",n.length,n),console.log("\ud83d\udd0d Fetching shares for user:",t.id);const r=await pr(t.id);console.log("\u2705 Received shares:",r.length,r);const a=n.map((e,t)=>{const n=Be(e,t);return e.videos&&e.videos.length>0&&console.log("\ud83c\udfa5 Poster with videos:",{posterId:e.idPoster,videos:e.videos,convertedPost:n}),n}),o=await Promise.all(r.map(async e=>{try{const t=await(0,B.kl)(e.idUser),n=await Zn(e.originalPoster.idPoster),r=t&&("".concat(t.firstName||""," ").concat(t.lastName||"").trim()||t.username)||e.userName,a=n?"".concat(n.userFirstName||""," ").concat(n.userLastName||"").trim()||n.userName:e.originalPoster.userName,o=Ve(e);return(0,i.A)((0,i.A)({},o),{},{authorName:r,originalAuthorName:a,originalImages:(null===n||void 0===n?void 0:n.imageUrls)||e.originalPoster.images||[],originalVideos:(null===n||void 0===n?void 0:n.videos)||e.originalPoster.videos||[]})}catch(t){return console.error("Error enriching share:",t),Ve(e)}})),l=[...a,...o].sort((e,t)=>e.isShare&&!t.isShare?-1:!e.isShare&&t.isShare?1:0),c=5,u=e*c,d=u+c,m=l.slice(u,d);m.length<c&&w(!1),p(0===e?m:e=>[...e,...m]),console.log("\u2705 Converted posts:",m.length);const f={},g={};await Promise.all(m.map(async e=>{try{if(e.isShare){const n=await xr(e.id);if(f[e.id]="number"===typeof n?n:(null===n||void 0===n?void 0:n.likeCount)||0,null!==t&&void 0!==t&&t.id){const n=await yr(e.id,t.id);g[e.id]=n.isLiked}}else{const n=await rr(e.id);f[e.id]=n,null!==t&&void 0!==t&&t.id&&(g[e.id]=ar(e.id,t.id))}}catch(n){console.error("\u274c Error fetching likes for ".concat(e.isShare?"share":"post"," ").concat(e.id,":"),n),f[e.id]=0,g[e.id]=!1}})),0===e?(L(f),F(g)):(L(e=>(0,i.A)((0,i.A)({},e),f)),F(e=>(0,i.A)((0,i.A)({},e),g))),console.log("\u2705 Like counts loaded:",f);const b={};await Promise.all(m.map(async e=>{try{if(e.isShare){const t=await jr(e.id),n=lr(t.map(t=>We(t,e.id)));b[e.id]=n}else{const t=await ir(e.id),n=lr(t);b[e.id]=n}}catch(t){console.error("\u274c Error fetching comments for ".concat(e.isShare?"share":"post"," ").concat(e.id,":"),t),b[e.id]=0}})),J(0===e?b:e=>(0,i.A)((0,i.A)({},e),b)),console.log("\u2705 Comment counts loaded:",b);const y={};await Promise.all(m.filter(e=>!e.isShare).map(async e=>{try{const t=await gr(e.id);y[e.id]=t.shareCount||0}catch(t){console.error("\u274c Error fetching shares for post ".concat(e.id,":"),t),y[e.id]=0}})),be(0===e?y:e=>(0,i.A)((0,i.A)({},e),y)),console.log("\u2705 Share counts loaded:",y)}catch(t){console.error("\u274c Error loading posters:",t),w(!1)}finally{0===e?v(!1):k(!1)}},[Be,Ve,We]);(0,t.useEffect)(()=>{He(0),y(0),Me()},[He,Me]),(0,t.useEffect)(()=>(S.current&&S.current.disconnect(),S.current=new IntersectionObserver(e=>{if(e[0].isIntersecting&&x&&!N&&!g){console.log("\ud83d\udcdc Loading more posts...");const e=b+1;y(e),He(e)}},{threshold:.5}),j.current&&S.current.observe(j.current),()=>{S.current&&S.current.disconnect()}),[x,N,g,b,He]),(0,t.useEffect)(()=>{const e=Re.current;if(null!==e&&void 0!==e&&e.id)return console.log("\ud83d\udd0c Setting up WebSocket subscriptions for poster feed..."),O(()=>{console.log("\u2705 WebSocket connected, subscribing to poster topics...");const t=P("/topic/posters",t=>{try{const n=JSON.parse(t.body);console.log("\ud83c\udd95 Received new poster:",n);const r=n.userId===e.id;if("PUBLIC"===n.privacyStatusName||r){const e=Be(n);p(t=>[e,...t]),console.log("\u2705 Added new poster to feed")}else console.log("\ud83d\udd12 Poster not visible to current user (privacy)")}catch(n){console.error("\u274c Error handling new poster:",n)}});t&&Ie.current.push(t);const n=P("/topic/posters/updated",e=>{try{const t=JSON.parse(e.body);console.log("\ud83d\udcdd Received updated poster:",t),p(e=>e.map(e=>e.id===t.idPoster?Be(t):e)),console.log("\u2705 Updated poster in feed")}catch(t){console.error("\u274c Error handling updated poster:",t)}});n&&Ie.current.push(n);const r=P("/topic/posters/deleted",e=>{try{const t=e.body;console.log("\ud83d\uddd1\ufe0f Received deleted poster ID:",t),p(e=>e.filter(e=>e.id!==t)),console.log("\u2705 Removed deleted poster from feed")}catch(t){console.error("\u274c Error handling deleted poster:",t)}});r&&Ie.current.push(r),console.log("\u2705 All poster WebSocket subscriptions set up")}),()=>{console.log("\ud83d\udd0c Unsubscribing from poster topics..."),Ie.current.forEach(e=>{try{e.unsubscribe()}catch(t){console.error("Error unsubscribing:",t)}}),Ie.current=[]};console.warn("\u26a0\ufe0f No user for WebSocket subscription")},[Be]);const qe=(0,t.useCallback)(()=>{const e=r.current;if(!e)return;const{scrollLeft:t,scrollWidth:n,clientWidth:a}=e;u(t>4),m(n-a-t>4)},[]);(0,t.useEffect)(()=>{const e=r.current;if(!e)return;qe(),e.addEventListener("scroll",qe);const t=()=>qe();return window.addEventListener("resize",t),()=>{e.removeEventListener("scroll",qe),window.removeEventListener("resize",t)}},[qe]);const Je=e=>{const t=r.current;if(!t)return;const n=.9*t.clientWidth;t.scrollBy({left:"next"===e?n:-n,behavior:"smooth"})},Ke=async e=>{if(K[e]||!1)G(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1}));else{if(!W[e]){Q(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0}));try{const t=f.find(t=>t.id===e),n=(null===t||void 0===t?void 0:t.isShare)||!1;let r=[];if(n){const t=await jr(e);console.log("\ud83d\udcdd Loaded share comments:",t),r=t.map(t=>We(t,e))}else r=await ir(e),console.log("\ud83d\udcdd Loaded poster comments:",r);const a=await Ge(r);H(t=>(0,i.A)((0,i.A)({},t),{},{[e]:a})),console.log("\u2705 Loaded comments for ".concat(n?"share":"post"," ").concat(e,":"),a)}catch(t){console.error("\u274c Error loading comments:",t)}finally{Q(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1}))}}G(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0}))}},Ge=async e=>{const t={},n=async e=>{if(!t[e.idUser])try{const n=await(0,B.kl)(e.idUser);t[e.idUser]=n}catch(o){console.error("Error fetching user ".concat(e.idUser,":"),o),t[e.idUser]=null}const r=t[e.idUser],a=(0,i.A)((0,i.A)({},e),{},{userName:(null===r||void 0===r?void 0:r.username)||"Ng\u01b0\u1eddi d\xf9ng",userAvatar:(null===r||void 0===r?void 0:r.avatar)||"",userFirstName:(null===r||void 0===r?void 0:r.firstName)||"",userLastName:(null===r||void 0===r?void 0:r.lastName)||""});return e.replies&&e.replies.length>0&&(a.replies=await Promise.all(e.replies.map(e=>n(e)))),a};return Promise.all(e.map(n))},$e=async e=>{var t;const n=Re.current;if(null===n||void 0===n||!n.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 b\xecnh lu\u1eadn");const r=null===(t=X[e])||void 0===t?void 0:t.trim();if(!r)return;const a=f.find(t=>t.id===e),o=(null===a||void 0===a?void 0:a.isShare)||!1;ee(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0}));try{let t;if(o){const a=await wr(e,{userId:n.id,content:r});t={idComment:a.idCommentShare,idPoster:e,content:a.content,idUser:a.idUser,parentCommentId:a.parentCommentId||null,createdAt:a.createdAt,updatedAt:a.updatedAt||a.createdAt}}else t=await cr(e,n.id,r);if(t){const r=await(0,B.kl)(n.id),a=(0,i.A)((0,i.A)({},t),{},{userName:(null===r||void 0===r?void 0:r.username)||n.username||"Ng\u01b0\u1eddi d\xf9ng",userAvatar:(null===r||void 0===r?void 0:r.avatar)||n.avatar||"",userFirstName:(null===r||void 0===r?void 0:r.firstName)||n.firstName||"",userLastName:(null===r||void 0===r?void 0:r.lastName)||n.lastName||"",replies:[],replyCount:0});H(t=>(0,i.A)((0,i.A)({},t),{},{[e]:[a,...t[e]||[]]})),J(t=>(0,i.A)((0,i.A)({},t),{},{[e]:(t[e]||0)+1})),Y(t=>(0,i.A)((0,i.A)({},t),{},{[e]:""})),G(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0})),console.log("\u2705 Comment added successfully to",o?"share":"post")}else alert("Kh\xf4ng th\u1ec3 th\xeam b\xecnh lu\u1eadn. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(s){console.error("\u274c Error submitting comment:",s),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi th\xeam b\xecnh lu\u1eadn.")}finally{ee(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1}))}},Qe=(e,t)=>{ae(n=>{if(n[e]){const t=(0,i.A)({},n);return delete t[e],t}return(0,i.A)((0,i.A)({},n),{},{[e]:t})})},Xe=async(e,t)=>{var n;const r=Re.current;if(null===r||void 0===r||!r.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 tr\u1ea3 l\u1eddi b\xecnh lu\u1eadn");const a=null===(n=oe[t])||void 0===n?void 0:n.trim();if(!a)return;const o=f.find(t=>t.id===e),s=(null===o||void 0===o?void 0:o.isShare)||!1;le(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0}));try{let n;if(s){const o=await Nr(t,{userId:r.id,content:a});n={idComment:o.idCommentShare,idPoster:e,content:o.content,idUser:o.idUser,parentCommentId:o.parentCommentId||null,createdAt:o.createdAt,updatedAt:o.updatedAt||o.createdAt,replies:[],replyCount:0}}else n=await ur(e,t,r.id,a);if(n){const a=await(0,B.kl)(r.id),o=(0,i.A)((0,i.A)({},n),{},{userName:(null===a||void 0===a?void 0:a.username)||r.username||"Ng\u01b0\u1eddi d\xf9ng",userAvatar:(null===a||void 0===a?void 0:a.avatar)||r.avatar||"",userFirstName:(null===a||void 0===a?void 0:a.firstName)||r.firstName||"",userLastName:(null===a||void 0===a?void 0:a.lastName)||r.lastName||"",replies:[],replyCount:0});H(n=>{const r=[...n[e]||[]],a=e=>e.map(e=>e.idComment===t?(0,i.A)((0,i.A)({},e),{},{replies:[o,...e.replies||[]],replyCount:(e.replyCount||0)+1}):e.replies&&e.replies.length>0?(0,i.A)((0,i.A)({},e),{},{replies:a(e.replies)}):e);return(0,i.A)((0,i.A)({},n),{},{[e]:a(r)})}),ge(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0})),J(t=>(0,i.A)((0,i.A)({},t),{},{[e]:(t[e]||0)+1})),ie(e=>{const n=(0,i.A)({},e);return delete n[t],n}),ae(e=>{const n=(0,i.A)({},e);return delete n[t],n}),console.log("\u2705 Reply added successfully")}else alert("Kh\xf4ng th\u1ec3 th\xeam ph\u1ea3n h\u1ed3i. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(l){console.error("\u274c Error submitting reply:",l),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi th\xeam ph\u1ea3n h\u1ed3i.")}finally{le(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!1}))}},Ye=(e,t,n)=>{ue(r=>{if(r[e]){const t=(0,i.A)({},r);return delete t[e],t}return he(t=>(0,i.A)((0,i.A)({},t),{},{[e]:n})),(0,i.A)((0,i.A)({},r),{},{[e]:t})})},Ze=async(e,t)=>{var n;const r=Re.current;if(null===r||void 0===r||!r.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eeda b\xecnh lu\u1eadn");const a=null===(n=de[t])||void 0===n?void 0:n.trim();if(!a)return;const o=f.find(t=>t.id===e),s=(null===o||void 0===o?void 0:o.isShare)||!1;fe(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0}));try{let n;if(s){const o=await kr(t,{userId:r.id,content:a});n={idComment:o.idCommentShare,idPoster:e,content:o.content,idUser:o.idUser,parentCommentId:o.parentCommentId||null,createdAt:o.createdAt,updatedAt:o.updatedAt||o.createdAt,replies:[],replyCount:0}}else n=await dr(e,t,r.id,a);if(n){const r=n.content,a=n.updatedAt;H(n=>{const o=[...n[e]||[]],s=e=>e.map(e=>e.idComment===t?(0,i.A)((0,i.A)({},e),{},{content:r,updatedAt:a}):e.replies&&e.replies.length>0?(0,i.A)((0,i.A)({},e),{},{replies:s(e.replies)}):e);return(0,i.A)((0,i.A)({},n),{},{[e]:s(o)})}),he(e=>{const n=(0,i.A)({},e);return delete n[t],n}),ue(e=>{const n=(0,i.A)({},e);return delete n[t],n}),console.log("\u2705 Comment updated successfully")}else alert("Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt b\xecnh lu\u1eadn. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(l){console.error("\u274c Error updating comment:",l),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt b\xecnh lu\u1eadn.")}finally{fe(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!1}))}},et=async(e,t)=>{const n=Re.current;if(null===n||void 0===n||!n.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 x\xf3a b\xecnh lu\u1eadn");if(!window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a b\xecnh lu\u1eadn n\xe0y?"))return;const r=f.find(t=>t.id===e),a=(null===r||void 0===r?void 0:r.isShare)||!1;try{let r;a?(await Sr(t,n.id),r=!0):r=await hr(e,t,n.id),r?(H(n=>{const r=[...n[e]||[]],a=e=>e.filter(e=>e.idComment!==t&&(e.replies&&e.replies.length>0&&(e.replies=a(e.replies)),!0));return(0,i.A)((0,i.A)({},n),{},{[e]:a(r)})}),J(t=>(0,i.A)((0,i.A)({},t),{},{[e]:Math.max(0,(t[e]||0)-1)})),console.log("\u2705 Comment deleted successfully")):alert("Kh\xf4ng th\u1ec3 x\xf3a b\xecnh lu\u1eadn. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(o){console.error("\u274c Error deleting comment:",o),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi x\xf3a b\xecnh lu\u1eadn.")}},tt=async e=>{const t=Re.current;if(null!==t&&void 0!==t&&t.id)if(we.trim()||"PUBLIC"===ke){Ce(!0);try{await async function(e){const t=(0,h.gf)();if(!t)throw new Error("No JWT token found");const n=await fetch("".concat(s.J,"/shares"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)});if(!n.ok)throw new Error(await n.text()||"Failed to create share");return n.json()}({posterId:e,userId:t.id,content:we.trim(),privacyStatusName:ke}),xe(null),Ne(""),Se("PUBLIC");const n=await gr(e);be(t=>(0,i.A)((0,i.A)({},t),{},{[e]:n.shareCount||0})),alert("Chia s\u1ebb b\xe0i vi\u1ebft th\xe0nh c\xf4ng!")}catch(n){console.error("\u274c Error creating share:",n),alert("Kh\xf4ng th\u1ec3 chia s\u1ebb b\xe0i vi\u1ebft. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{Ce(!1)}}else alert("Vui l\xf2ng nh\u1eadp n\u1ed9i dung chia s\u1ebb");else alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 chia s\u1ebb b\xe0i vi\u1ebft")},nt=(e,t)=>{A(e),I(t),_(!0)},rt=function(e,t){var n,r,o,s;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const u=e.replies&&e.replies.length>0,d=pe[e.idComment];return(0,c.jsxs)("div",{className:"fb-comment__reply-wrapper fb-comment__reply--depth-".concat(l),children:[(0,c.jsxs)("div",{className:"fb-comment fb-comment--reply",children:[(0,c.jsx)(a.k2,{to:"/user/".concat(e.idUser),className:"fb-post__author",children:(0,c.jsx)("img",{src:e.userAvatar||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:"".concat(e.userFirstName," ").concat(e.userLastName),className:"fb-comment__avatar"})}),(0,c.jsx)("div",{className:"fb-comment__content",children:ce[e.idComment]?(0,c.jsxs)("div",{className:"fb-comment__edit",children:[(0,c.jsx)("input",{type:"text",value:de[e.idComment]||"",onChange:t=>he(n=>(0,i.A)((0,i.A)({},n),{},{[e.idComment]:t.target.value})),onKeyDown:n=>{"Enter"!==n.key||n.shiftKey?"Escape"===n.key&&Ye(e.idComment,t,e.content):(n.preventDefault(),Ze(t,e.idComment))},className:"fb-comment__edit-field",disabled:me[e.idComment],autoFocus:!0}),(0,c.jsxs)("div",{className:"fb-comment__edit-actions",children:[(0,c.jsx)("button",{type:"button",onClick:()=>Ye(e.idComment,t,e.content),disabled:me[e.idComment],children:"H\u1ee7y"}),(0,c.jsx)("button",{type:"button",onClick:()=>Ze(t,e.idComment),disabled:me[e.idComment]||!(null!==(n=de[e.idComment])&&void 0!==n&&n.trim()),className:"btn-primary",children:me[e.idComment]?"\u0110ang l\u01b0u...":"L\u01b0u"})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"fb-comment__bubble",children:[(0,c.jsx)("strong",{children:e.userFirstName&&e.userLastName?"".concat(e.userFirstName," ").concat(e.userLastName).trim():e.userName||"Ng\u01b0\u1eddi d\xf9ng"}),(0,c.jsx)("p",{children:e.content})]}),(0,c.jsxs)("div",{className:"fb-comment__meta",children:[(0,c.jsx)("span",{children:sr(e.createdAt)}),(0,c.jsx)("button",{type:"button",children:"Th\xedch"}),(0,c.jsx)("button",{type:"button",onClick:()=>Qe(e.idComment,t),children:"Ph\u1ea3n h\u1ed3i"}),(null===(r=Re.current)||void 0===r?void 0:r.id)===e.idUser&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{type:"button",onClick:()=>Ye(e.idComment,t,e.content),children:"S\u1eeda"}),(0,c.jsx)("button",{type:"button",onClick:()=>et(t,e.idComment),children:"X\xf3a"})]})]}),u&&l<3&&(0,c.jsxs)("button",{type:"button",className:"fb-comment__view-replies",onClick:()=>{return t=e.idComment,void ge(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!e[t]}));var t},children:[d?"\u25bc":"\u25b6"," ",e.replyCount||e.replies.length," ph\u1ea3n h\u1ed3i"]})]})})]}),re[e.idComment]&&(0,c.jsxs)("div",{className:"fb-reply-input",children:[(0,c.jsx)("img",{src:(null===(o=Re.current)||void 0===o?void 0:o.avatar)||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:"Your avatar",className:"fb-reply-input__avatar"}),(0,c.jsxs)("div",{className:"fb-reply-input__field-wrapper",children:[(0,c.jsx)("input",{type:"text",placeholder:"Vi\u1ebft ph\u1ea3n h\u1ed3i...",value:oe[e.idComment]||"",onChange:t=>ie(n=>(0,i.A)((0,i.A)({},n),{},{[e.idComment]:t.target.value})),onKeyDown:n=>{"Enter"!==n.key||n.shiftKey||(n.preventDefault(),Xe(t,e.idComment))},className:"fb-reply-input__field",disabled:se[e.idComment]}),(null===(s=oe[e.idComment])||void 0===s?void 0:s.trim())&&(0,c.jsx)("button",{type:"button",onClick:()=>Xe(t,e.idComment),disabled:se[e.idComment],className:"fb-reply-input__submit",children:se[e.idComment]?"...":"\u27a4"})]})]}),u&&d&&l<3&&(0,c.jsx)("div",{className:"fb-comment__replies",children:e.replies.map(e=>rt(e,t,l+1))})]},e.idComment)};return(0,c.jsxs)("div",{className:"fb-home",children:[(0,c.jsxs)("main",{className:"fb-main",children:[(0,c.jsxs)("aside",{className:"fb-sidebar","aria-label":"Ph\xedm t\u1eaft",children:[(0,c.jsx)("ul",{children:Pr.map(e=>(0,c.jsxs)("li",{children:[(0,c.jsx)("span",{className:"icon","aria-hidden":"true",children:e.icon}),(0,c.jsx)("span",{children:e.label})]},e.id))}),(0,c.jsx)(a.N_,{to:"/settings",className:"fb-sidebar__more",children:"Xem th\xeam"}),(0,c.jsx)(Rr,{})]}),(0,c.jsxs)("section",{className:"fb-feed","aria-label":"B\u1ea3ng tin",children:[(0,c.jsxs)("div",{className:"fb-stories-wrapper",children:[(0,c.jsx)("button",{type:"button",className:"fb-stories__nav prev",onClick:()=>Je("prev"),disabled:!l,"aria-label":"Xem tin tr\u01b0\u1edbc",children:"\u2039"}),(0,c.jsx)("div",{className:"fb-stories","aria-label":"Tin n\u1ed5i b\u1eadt",ref:r,children:Or.map(e=>(0,c.jsxs)("article",{className:"fb-story ".concat(e.isCreate?"create":""),children:[(0,c.jsx)("img",{src:e.image,alt:e.name,className:"fb-story__image"}),(0,c.jsx)("div",{className:"fb-story__overlay"}),(0,c.jsx)("div",{className:"fb-story__content",children:e.isCreate?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"fb-story__plus",children:"\uff0b"}),(0,c.jsx)("span",{className:"fb-story__label",children:e.label})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"fb-story__avatar",children:e.name.charAt(0)}),(0,c.jsx)("span",{className:"fb-story__name",children:e.name})]})})]},e.id))}),(0,c.jsx)("button",{type:"button",className:"fb-stories__nav next",onClick:()=>Je("next"),disabled:!d,"aria-label":"Xem tin ti\u1ebfp",children:"\u203a"})]}),(0,c.jsxs)("section",{className:"fb-composer","aria-label":"T\u1ea1o b\xe0i vi\u1ebft",children:[(0,c.jsxs)("div",{className:"fb-composer__top",children:[(0,c.jsx)("img",{src:(null===(e=Re.current)||void 0===e?void 0:e.avatar)||"https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=80&q=80",alt:"\u1ea2nh \u0111\u1ea1i di\u1ec7n c\u1ee7a b\u1ea1n"}),(0,c.jsxs)("button",{type:"button",onClick:()=>o("/create-poster"),children:[(null===(n=Re.current)||void 0===n?void 0:n.lastName)||"B\u1ea1n"," \u01a1i, b\u1ea1n \u0111ang ngh\u0129 g\xec th\u1ebf?"]})]}),(0,c.jsxs)("div",{className:"fb-composer__actions",children:[(0,c.jsx)("button",{type:"button",onClick:()=>o("/create-poster"),children:"\ud83c\udfa5 Video tr\u1ef1c ti\u1ebfp"}),(0,c.jsx)("button",{type:"button",onClick:()=>o("/create-poster"),children:"\ud83d\udcf7 \u1ea2nh/video"}),(0,c.jsx)("button",{type:"button",onClick:()=>o("/create-poster"),children:"\ud83d\ude0a C\u1ea3m x\xfac/ho\u1ea1t \u0111\u1ed9ng"})]})]}),"     ",g?(0,c.jsx)("div",{className:"fb-loading",children:(0,c.jsx)("p",{children:"\u0110ang t\u1ea3i b\xe0i vi\u1ebft..."})}):0===f.length?(0,c.jsx)("div",{className:"fb-empty",children:(0,c.jsx)("p",{children:"Ch\u01b0a c\xf3 b\xe0i vi\u1ebft n\xe0o"})}):f.map((e,t)=>{var n,r;return(0,c.jsxs)("article",{className:"fb-post",ref:t===f.length-1?j:null,style:{position:"relative"},children:[te[e.id]&&(0,c.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,borderRadius:"8px"},children:(0,c.jsxs)("div",{style:{textAlign:"center"},children:[(0,c.jsx)("div",{className:"spinner",style:{border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",width:"40px",height:"40px",animation:"spin 1s linear infinite",margin:"0 auto 10px"}}),(0,c.jsx)("p",{style:{color:"#333",fontWeight:"bold"},children:"\u0110ang x\xf3a b\xe0i vi\u1ebft..."})]})}),(0,c.jsxs)("header",{className:"fb-post__header",children:[(0,c.jsx)(a.k2,{to:"/user/".concat(e.authorId),className:"fb-post__author",children:(0,c.jsx)("img",{src:e.authorAvatar,alt:"\u1ea2nh \u0111\u1ea1i di\u1ec7n c\u1ee7a ".concat(e.authorName)})}),(0,c.jsxs)("div",{style:{textAlign:"left"},children:[(0,c.jsx)("strong",{children:e.authorName}),e.isShare&&(0,c.jsx)("span",{className:"share-indicator",children:" \u0111\xe3 chia s\u1ebb m\u1ed9t b\xe0i vi\u1ebft"}),(0,c.jsxs)("div",{className:"fb-post__meta",children:[(0,c.jsx)("span",{children:e.time}),(0,c.jsx)("span",{"aria-hidden":"true",children:"\xb7"}),(0,c.jsxs)("span",{children:["public"===e.audience&&"\ud83c\udf0d C\xf4ng khai","friends"===e.audience&&"\ud83d\udc65 B\u1ea1n b\xe8","private"===e.audience&&"\ud83d\udd12 Ch\u1ec9 m\xecnh t\xf4i"]})]})]}),e.isShare&&Re.current&&e.authorId===Re.current.id&&(0,c.jsx)("button",{className:"fb-post__delete-share",onClick:()=>(async e=>{const t=Re.current;if(null!==t&&void 0!==t&&t.id){if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a b\xe0i chia s\u1ebb n\xe0y?"))try{await mr(e,t.id),p(t=>t.filter(t=>t.id!==e)),alert("\u0110\xe3 x\xf3a b\xe0i chia s\u1ebb th\xe0nh c\xf4ng!")}catch(n){console.error("\u274c Error deleting share:",n),alert("Kh\xf4ng th\u1ec3 x\xf3a b\xe0i chia s\u1ebb. Vui l\xf2ng th\u1eed l\u1ea1i.")}}else alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 x\xf3a chia s\u1ebb")})(e.id),title:"X\xf3a b\xe0i chia s\u1ebb",children:"\ud83d\uddd1\ufe0f"}),!e.isShare&&(0,c.jsx)("button",{className:"fb-post__more","aria-label":"T\xf9y ch\u1ecdn b\xe0i vi\u1ebft",children:"\u22ef"})]}),e.isShare&&e.shareContent&&(0,c.jsx)("p",{className:"fb-post__content",children:e.shareContent}),e.isShare&&e.originalPosterId?(0,c.jsxs)("div",{className:"fb-post__shared-content fb-post__shared-content--clickable",onClick:()=>o("/poster/".concat(e.originalPosterId)),children:[(0,c.jsxs)("div",{className:"shared-post-header",children:[(0,c.jsx)("img",{src:e.originalAuthorAvatar||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:e.originalAuthorName,className:"shared-post-avatar"}),(0,c.jsx)("div",{children:(0,c.jsx)("strong",{children:e.originalAuthorName})})]}),(0,c.jsx)("p",{className:"shared-post-content",children:e.originalContent}),e.originalImages&&e.originalImages.length>0&&(0,c.jsx)("div",{className:"shared-post-images",children:e.originalImages.slice(0,3).map((e,t)=>(0,c.jsx)("img",{src:e,alt:"Shared ".concat(t+1)},t))}),e.originalVideos&&e.originalVideos.length>0&&(0,c.jsx)("div",{className:"shared-post-videos",children:e.originalVideos.slice(0,1).map((e,t)=>(0,c.jsx)("video",{src:e.url,controls:!0,poster:e.thumbnailUrl,onClick:e=>e.stopPropagation()},t))})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"fb-post__content-wrapper",children:[(0,c.jsx)("p",{className:"fb-post__content ".concat(De[e.id]?"expanded":""),style:{margin:"0"},children:e.content}),e.content&&e.content.length>200&&(0,c.jsx)("button",{type:"button",className:"fb-post__see-more",onClick:()=>Fe(t=>(0,i.A)((0,i.A)({},t),{},{[e.id]:!t[e.id]})),children:De[e.id]?"\u1ea8n b\u1edbt":"Xem th\xeam"})]}),e.images&&e.images.length>0&&(0,c.jsx)("figure",{className:"fb-post__image",children:1===e.images.length?e.images[0].startsWith("data:video/")?(0,c.jsx)("video",{src:e.images[0],controls:!0,className:"fb-post__video",children:"Your browser does not support video."}):(0,c.jsx)("img",{src:e.images[0],alt:"\u1ea2nh c\u1ee7a ".concat(e.authorName),onClick:()=>nt(e.images,0)}):(0,c.jsxs)("div",{className:"fb-post__image-grid ".concat(2===e.images.length?"fb-post__image-grid--two":""),children:[e.images.slice(0,4).map((t,n)=>t.startsWith("data:video/")?(0,c.jsx)("video",{src:t,controls:!0,className:"fb-post__video-grid",children:"Your browser does not support video."},n):(0,c.jsx)("img",{src:t,alt:"\u1ea2nh ".concat(n+1," c\u1ee7a ").concat(e.authorName),onClick:()=>nt(e.images,n)},n)),e.images.length>4&&(0,c.jsxs)("div",{className:"fb-post__image-more",onClick:()=>nt(e.images,3),children:["+",e.images.length-4]})]})}),e.videos&&e.videos.length>0&&(0,c.jsx)("figure",{className:"fb-post__image",children:e.videos.map((t,n)=>(0===n&&console.log("\ud83c\udfa5 Rendering videos for post:",e.id,e.videos),console.log("\ud83c\udfac Video URL:",t.url),t.url?(0,c.jsx)("div",{className:"fb-post__video-wrapper",children:(0,c.jsxs)("video",{src:t.url,controls:!0,controlsList:"nodownload",className:"fb-post__video",poster:t.thumbnailUrl,preload:"metadata",onLoadStart:()=>console.log("\ud83d\udcf9 Video loading started:",t.url),onCanPlay:()=>console.log("\u2705 Video can play:",t.url),onError:e=>{var n,r,a,o;console.error("\u274c Video load error:",{error:e,url:t.url,type:null===(n=e.currentTarget)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.code,message:null===(a=e.currentTarget)||void 0===a||null===(o=a.error)||void 0===o?void 0:o.message})},children:[(0,c.jsx)("source",{src:t.url,type:"video/mp4"}),(0,c.jsx)("source",{src:t.url,type:"video/webm"}),"Your browser does not support the video tag."]})},n):(console.error("\u274c Video URL is empty!"),null)))})]}),(0,c.jsxs)("footer",{className:"fb-post__footer",children:[(0,c.jsxs)("div",{className:"fb-post__stats",children:[(0,c.jsxs)("span",{className:R[e.id]>0?"has-reactions":"",children:["\ud83d\udc4d ",(R[e.id]||0).toLocaleString("vi-VN")]}),(0,c.jsxs)("span",{onClick:()=>Ke(e.id),className:"fb-post__stats-clickable",children:[q[e.id]||0," b\xecnh lu\u1eadn"]}),(0,c.jsxs)("span",{children:[e.shares," l\u01b0\u1ee3t chia s\u1ebb"]})]}),(0,c.jsxs)("div",{className:"fb-post__actions",children:[(0,c.jsx)("button",{type:"button",className:"fb-post__action-btn ".concat(D[e.id]?"liked":""),onClick:()=>(async e=>{const t=Re.current;if(null===t||void 0===t||!t.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 th\xedch b\xe0i vi\u1ebft");if(z[e])return;const n=f.find(t=>t.id===e),r=(null===n||void 0===n?void 0:n.isShare)||!1,a=D[e]||!1,o=R[e]||0;F(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!a})),L(t=>(0,i.A)((0,i.A)({},t),{},{[e]:a?Math.max(0,o-1):o+1})),V(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!0}));try{let n=!1;if(r)if(a){await br(e,t.id),n=!0;const r=await xr(e),a="number"===typeof r?r:(null===r||void 0===r?void 0:r.likeCount)||0;L(t=>(0,i.A)((0,i.A)({},t),{},{[e]:a})),console.log("\u2705 Unliked share:",e)}else{const r=await vr(e,{userId:t.id});n=!!r,n&&L(t=>(0,i.A)((0,i.A)({},t),{},{[e]:r.likeCount})),console.log("\u2705 Liked share:",e)}else a?(n=await nr(e,t.id),n&&(or(e,t.id,!1),console.log("\u2705 Unliked post:",e))):(n=await tr(e,t.id),n&&(or(e,t.id,!0),console.log("\u2705 Liked post:",e)));if(n){if(!r){const t=await rr(e);L(n=>(0,i.A)((0,i.A)({},n),{},{[e]:t}))}}else F(t=>(0,i.A)((0,i.A)({},t),{},{[e]:a})),L(t=>(0,i.A)((0,i.A)({},t),{},{[e]:o}))}catch(s){console.error("\u274c Error toggling like:",s),F(t=>(0,i.A)((0,i.A)({},t),{},{[e]:a})),L(t=>(0,i.A)((0,i.A)({},t),{},{[e]:o}))}finally{V(t=>(0,i.A)((0,i.A)({},t),{},{[e]:!1}))}})(e.id),disabled:z[e.id],children:D[e.id]?"\u2764\ufe0f \u0110\xe3 th\xedch":"\ud83d\udc4d Th\xedch"}),(0,c.jsx)("button",{type:"button",className:"fb-post__action-btn",onClick:()=>Ke(e.id),children:"\ud83d\udcac B\xecnh lu\u1eadn"}),!e.isShare&&(0,c.jsxs)("button",{type:"button",className:"fb-post__action-btn",onClick:()=>(e=>{const t=Re.current;null!==t&&void 0!==t&&t.id?xe(e):alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 chia s\u1ebb b\xe0i vi\u1ebft")})(e.id),children:["\u2197\ufe0f Chia s\u1ebb (",ve[e.id]||0,")"]}),(0,c.jsx)("button",{type:"button",onClick:()=>o("/poster/".concat(e.id)),className:"fb-post__action-btn btn-view-detail",children:"\ud83d\udcc4 Xem chi ti\u1ebft"})]}),K[e.id]&&(0,c.jsxs)("div",{className:"fb-post__comments",children:[(0,c.jsxs)("div",{className:"fb-comment-input",children:[(0,c.jsx)("img",{src:(null===(n=Re.current)||void 0===n?void 0:n.avatar)||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:"Your avatar",className:"fb-comment-input__avatar"}),(0,c.jsxs)("div",{className:"fb-comment-input__field",children:[(0,c.jsx)("input",{type:"text",placeholder:"Vi\u1ebft b\xecnh lu\u1eadn...",value:X[e.id]||"",onChange:t=>Y(n=>(0,i.A)((0,i.A)({},n),{},{[e.id]:t.target.value})),onKeyPress:t=>{"Enter"!==t.key||Z[e.id]||$e(e.id)},disabled:Z[e.id]}),(null===(r=X[e.id])||void 0===r?void 0:r.trim())&&(0,c.jsx)("button",{type:"button",onClick:()=>$e(e.id),disabled:Z[e.id],className:"fb-comment-input__submit",children:Z[e.id]?"...":"\u27a4"})]})]}),$[e.id]?(0,c.jsx)("div",{className:"fb-comments-loading",children:"\u0110ang t\u1ea3i b\xecnh lu\u1eadn..."}):W[e.id]&&W[e.id].length>0?(0,c.jsx)("div",{className:"fb-comments-list",children:W[e.id].map(t=>{var n,r,o,s;return(0,c.jsxs)("div",{className:"fb-comment",children:[(0,c.jsx)(a.k2,{to:"/user/".concat(t.idUser),className:"fb-post__author",children:(0,c.jsx)("img",{src:t.userAvatar||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:"".concat(t.userFirstName," ").concat(t.userLastName),className:"fb-comment__avatar"})}),(0,c.jsxs)("div",{className:"fb-comment__content",children:[ce[t.idComment]?(0,c.jsxs)("div",{className:"fb-comment__edit",children:[(0,c.jsx)("input",{type:"text",value:de[t.idComment]||"",onChange:e=>he(n=>(0,i.A)((0,i.A)({},n),{},{[t.idComment]:e.target.value})),onKeyDown:n=>{"Enter"!==n.key||n.shiftKey?"Escape"===n.key&&Ye(t.idComment,e.id,t.content):(n.preventDefault(),Ze(e.id,t.idComment))},className:"fb-comment__edit-field",disabled:me[t.idComment],autoFocus:!0}),(0,c.jsxs)("div",{className:"fb-comment__edit-actions",children:[(0,c.jsx)("button",{type:"button",onClick:()=>Ye(t.idComment,e.id,t.content),disabled:me[t.idComment],children:"H\u1ee7y"}),(0,c.jsx)("button",{type:"button",onClick:()=>Ze(e.id,t.idComment),disabled:me[t.idComment]||!(null!==(n=de[t.idComment])&&void 0!==n&&n.trim()),className:"btn-primary",children:me[t.idComment]?"\u0110ang l\u01b0u...":"L\u01b0u"})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"fb-comment__bubble",children:[(0,c.jsx)("strong",{children:t.userFirstName&&t.userLastName?"".concat(t.userFirstName," ").concat(t.userLastName).trim():t.userName||"Ng\u01b0\u1eddi d\xf9ng"}),(0,c.jsx)("p",{children:t.content})]}),(0,c.jsxs)("div",{className:"fb-comment__meta",children:[(0,c.jsx)("span",{children:sr(t.createdAt)}),(0,c.jsx)("button",{type:"button",children:"Th\xedch"}),(0,c.jsx)("button",{type:"button",onClick:()=>Qe(t.idComment,e.id),children:"Ph\u1ea3n h\u1ed3i"}),(null===(r=Re.current)||void 0===r?void 0:r.id)===t.idUser&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{type:"button",onClick:()=>Ye(t.idComment,e.id,t.content),children:"S\u1eeda"}),(0,c.jsx)("button",{type:"button",onClick:()=>et(e.id,t.idComment),children:"X\xf3a"})]})]})]}),re[t.idComment]&&(0,c.jsxs)("div",{className:"fb-reply-input",children:[(0,c.jsx)("img",{src:(null===(o=Re.current)||void 0===o?void 0:o.avatar)||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=80&q=80",alt:"Your avatar",className:"fb-reply-input__avatar"}),(0,c.jsxs)("div",{className:"fb-reply-input__field-wrapper",children:[(0,c.jsx)("input",{type:"text",placeholder:"Vi\u1ebft ph\u1ea3n h\u1ed3i...",value:oe[t.idComment]||"",onChange:e=>ie(n=>(0,i.A)((0,i.A)({},n),{},{[t.idComment]:e.target.value})),onKeyDown:n=>{"Enter"!==n.key||n.shiftKey||(n.preventDefault(),Xe(e.id,t.idComment))},className:"fb-reply-input__field",disabled:se[t.idComment]}),(null===(s=oe[t.idComment])||void 0===s?void 0:s.trim())&&(0,c.jsx)("button",{type:"button",onClick:()=>Xe(e.id,t.idComment),disabled:se[t.idComment],className:"fb-reply-input__submit",children:se[t.idComment]?"...":"\u27a4"})]})]}),t.replies&&t.replies.length>0&&(0,c.jsx)("div",{className:"fb-comment__replies",children:t.replies.map(t=>rt(t,e.id,1))})]})]},t.idComment)})}):(0,c.jsx)("div",{className:"fb-comments-empty",children:"Ch\u01b0a c\xf3 b\xecnh lu\u1eadn n\xe0o"})]}),ye===e.id&&(0,c.jsx)("div",{className:"share-modal-overlay",onClick:()=>xe(null),children:(0,c.jsxs)("div",{className:"share-modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"share-modal__header",children:[(0,c.jsx)("h3",{children:"Chia s\u1ebb b\xe0i vi\u1ebft"}),(0,c.jsx)("button",{type:"button",className:"share-modal__close",onClick:()=>xe(null),children:"\xd7"})]}),(0,c.jsxs)("div",{className:"share-modal__body",children:[(0,c.jsxs)("div",{className:"share-modal__privacy",children:[(0,c.jsx)("label",{children:"Quy\u1ec1n ri\xeang t\u01b0:"}),(0,c.jsxs)("select",{value:ke,onChange:e=>Se(e.target.value),children:[(0,c.jsx)("option",{value:"PUBLIC",children:"\ud83c\udf0d C\xf4ng khai"}),(0,c.jsx)("option",{value:"FRIENDS",children:"\ud83d\udc65 B\u1ea1n b\xe8"}),(0,c.jsx)("option",{value:"PRIVATE",children:"\ud83d\udd12 Ch\u1ec9 m\xecnh t\xf4i"})]})]}),(0,c.jsx)("textarea",{className:"share-modal__textarea",placeholder:"Chia s\u1ebb suy ngh\u0129 c\u1ee7a b\u1ea1n...",value:we,onChange:e=>Ne(e.target.value),rows:4}),(0,c.jsxs)("div",{className:"share-modal__original",children:[(0,c.jsxs)("div",{className:"share-original-header",children:[(0,c.jsx)("img",{src:e.authorAvatar,alt:e.authorName}),(0,c.jsx)("span",{children:e.authorName})]}),(0,c.jsx)("p",{children:e.content}),e.images&&e.images.length>0&&(0,c.jsx)("div",{className:"share-original-images",children:e.images.slice(0,3).map((e,t)=>(0,c.jsx)("img",{src:e,alt:"Preview ".concat(t+1)},t))})]})]}),(0,c.jsxs)("div",{className:"share-modal__footer",children:[(0,c.jsx)("button",{type:"button",className:"btn-cancel",onClick:()=>xe(null),disabled:je,children:"H\u1ee7y"}),(0,c.jsx)("button",{type:"button",className:"btn-share",onClick:()=>tt(e.id),disabled:je,children:je?"\u0110ang chia s\u1ebb...":"Chia s\u1ebb ngay"})]})]})}),(ve[e.id]||0)>0&&(0,c.jsx)("div",{className:"post-shares-section"})]})]},e.id)}),N&&(0,c.jsxs)("div",{className:"fb-loading-more",children:[(0,c.jsx)("div",{className:"fb-spinner"}),(0,c.jsx)("p",{children:"\u0110ang t\u1ea3i th\xeam b\xe0i vi\u1ebft..."})]}),!x&&f.length>0&&(0,c.jsx)("div",{className:"fb-no-more-posts",children:(0,c.jsx)("p",{children:"\u0110\xe3 hi\u1ec3n th\u1ecb t\u1ea5t c\u1ea3 b\xe0i vi\u1ebft"})})]}),(0,c.jsxs)("aside",{className:"fb-rightbar","aria-label":"Li\xean h\u1ec7",children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,c.jsx)("h3",{style:{margin:0},children:"Ng\u01b0\u1eddi li\xean h\u1ec7"}),!Le&&Oe.length>0&&(0,c.jsxs)("span",{style:{fontSize:"0.85rem",color:"#65676b",fontWeight:"500"},children:[Oe.filter(e=>"friend"===e.type).length," b\u1ea1n b\xe8, ",Oe.filter(e=>"group"===e.type).length," nh\xf3m"]})]}),Le?(0,c.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#65676b"},children:(0,c.jsx)("p",{children:"\u0110ang t\u1ea3i..."})}):0===Oe.length?(0,c.jsxs)("div",{style:{textAlign:"center",padding:"20px",color:"#65676b"},children:[(0,c.jsx)("p",{children:"Ch\u01b0a c\xf3 li\xean h\u1ec7"}),(0,c.jsx)("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"H\xe3y k\u1ebft b\u1ea1n ho\u1eb7c tham gia nh\xf3m \u0111\u1ec3 b\u1eaft \u0111\u1ea7u chat!"})]}):(0,c.jsxs)(c.Fragment,{children:[Oe.filter(e=>"friend"===e.type).length>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{style:{fontSize:"0.8rem",color:"#65676b",fontWeight:"600",marginTop:"16px",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:["B\u1ea1n b\xe8 (",Oe.filter(e=>"friend"===e.type).length,")"]}),(0,c.jsx)("ul",{style:{marginBottom:"16px"},children:Oe.filter(e=>"friend"===e.type).map(e=>(0,c.jsxs)("li",{onClick:()=>o("/chat"),style:{cursor:"pointer"},title:"Chat v\u1edbi ".concat(e.name),children:[(0,c.jsxs)("div",{className:"avatar",children:[e.avatar?(0,c.jsx)("img",{src:e.avatar,alt:e.name}):(0,c.jsx)("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"#e4e6eb",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"bold",color:"#65676b"},children:e.name.charAt(0).toUpperCase()}),(0,c.jsx)("span",{className:e.active?"status active":"status","aria-hidden":"true"})]}),(0,c.jsx)("span",{children:e.name})]},e.id))})]}),Oe.filter(e=>"group"===e.type).length>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{style:{fontSize:"0.8rem",color:"#65676b",fontWeight:"600",marginTop:"16px",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Nh\xf3m (",Oe.filter(e=>"group"===e.type).length,")"]}),(0,c.jsx)("ul",{children:Oe.filter(e=>"group"===e.type).map(e=>(0,c.jsxs)("li",{onClick:()=>o("/chat"),style:{cursor:"pointer"},title:"Chat nh\xf3m ".concat(e.name),children:[(0,c.jsx)("div",{className:"avatar",children:(0,c.jsx)("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"#1877f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem"},children:"\ud83d\udc65"})}),(0,c.jsx)("span",{children:e.name})]},e.id))})]})]}),(0,c.jsxs)("div",{className:"fb-rightbar__download",children:[(0,c.jsx)("p",{children:"T\u1ea3i ChatWeb cho m\xe1y t\xednh \u0111\u1ec3 tr\xf2 chuy\u1ec7n nhanh h\u01a1n."}),(0,c.jsx)("a",{href:"https://www.microsoft.com/store/apps",target:"_blank",rel:"noreferrer noopener",children:"T\u1ea3i \u1ee9ng d\u1ee5ng"})]})]})]}),C&&(0,c.jsx)(Cr,{images:E,currentIndex:T,onClose:()=>{_(!1)},onNext:()=>{I(e=>Math.min(e+1,E.length-1))},onPrev:()=>{I(e=>Math.max(e-1,0))}})]})},Ur=async e=>{try{const t=(0,h.gf)(),n=await fetch("".concat(s.J,"/gemini/ask"),{method:"POST",headers:(0,i.A)({"Content-Type":"application/json"},t&&{Authorization:"Bearer ".concat(t)}),body:JSON.stringify({prompt:e})});if(!n.ok){const e=await n.text();throw new Error("HTTP ".concat(n.status,": ").concat(e))}const r=n.headers.get("content-type");if(r&&r.includes("application/json")){const e=await n.json();return e.response||e.message||"Kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i t\u1eeb AI"}return await n.text()||"Kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i t\u1eeb AI"}catch(t){throw console.error("Gemini API error:",t),t}},Dr=e=>e&&""!==e.trim()?e.trim().length<2?"C\xe2u h\u1ecfi qu\xe1 ng\u1eafn":e.length>2e3?"C\xe2u h\u1ecfi qu\xe1 d\xe0i (t\u1ed1i \u0111a 2000 k\xfd t\u1ef1)":null:"Vui l\xf2ng nh\u1eadp c\xe2u h\u1ecfi",Fr=()=>{const e=(0,a.Zp)(),[n,r]=(0,t.useState)(""),[o,i]=(0,t.useState)("PUBLIC"),[l,u]=(0,t.useState)([]),[d,m]=(0,t.useState)([]),[f,p]=(0,t.useState)([]),[g,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)(""),[x,w]=(0,t.useState)(!1),[N,k]=(0,t.useState)(!1),[S,j]=(0,t.useState)(null),[C,_]=(0,t.useState)(null),E=(0,t.useRef)(null),A=(0,h.ug)(),T=()=>null!==A&&void 0!==A&&A.firstName&&null!==A&&void 0!==A&&A.lastName?"".concat(A.lastName):(null===A||void 0===A?void 0:A.username)||"Ng\u01b0\u1eddi d\xf9ng";return(0,c.jsxs)("div",{className:"create-poster",children:[g&&(0,c.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,c.jsxs)("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"12px",textAlign:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[(0,c.jsx)("div",{className:"spinner",style:{border:"4px solid #f3f3f3",borderTop:"4px solid #1877f2",borderRadius:"50%",width:"50px",height:"50px",animation:"spin 1s linear infinite",margin:"0 auto 15px"}}),(0,c.jsx)("p",{style:{color:"#333",fontWeight:"bold",fontSize:"16px"},children:"\ud83d\udce4 \u0110ang \u0111\u0103ng b\xe0i vi\u1ebft..."})]})}),(0,c.jsxs)("div",{className:"create-poster__container",children:[(0,c.jsxs)("div",{className:"create-poster__header",children:[(0,c.jsx)("button",{className:"create-poster__back",onClick:()=>e("/home"),type:"button",children:"\u2190 Quay l\u1ea1i"}),(0,c.jsx)("h2",{children:"T\u1ea1o b\xe0i vi\u1ebft"})]}),(0,c.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!n.trim())return void y("\u274c Vui l\xf2ng nh\u1eadp n\u1ed9i dung b\xe0i vi\u1ebft");if(null===A||void 0===A||!A.id)return void y("\u274c B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 t\u1ea1o b\xe0i vi\u1ebft");if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(A.id))return y("\u274c User ID kh\xf4ng h\u1ee3p l\u1ec7: ".concat(A.id)),void console.error("\u274c Invalid UUID format:",A.id);if(["PUBLIC","FRIENDS","PRIVATE"].includes(o))try{v(!0),y("");const t=[],r=[];l.forEach((e,n)=>{"video"===f[n]?r.push(e):t.push(e)});const a={idUser:A.id,content:n.trim(),privacyStatusName:o};t.length>0&&(a.imageUrls=t),r.length>0&&(a.videoUrls=r),console.log("\ud83d\udce4 Creating poster with data:"),console.log("  \ud83d\udc64 User ID:",A.id),console.log("  \ud83d\udcdd Content:",n.trim().substring(0,50)+"..."),console.log("  \ud83d\udd12 Privacy:",o),console.log("  \ud83d\udcf7 Images:",t.length),console.log("  \ud83c\udfac Videos:",r.length),console.log("  \ufffd Payload size:",JSON.stringify(a).length,"bytes"),console.log("\ud83d\udce6 Full payload:",a);const i=await(async e=>{try{var t,n;console.log("\ud83c\udf10 API Call - POST /api/posters"),console.log("\ud83d\udccd URL:","".concat(s.J,"/posters")),console.log("\ud83d\udce6 Request payload:",{idUser:e.idUser,content:e.content.substring(0,100)+(e.content.length>100?"...":""),privacyStatusName:e.privacyStatusName,imageUrlsCount:(null===(t=e.imageUrls)||void 0===t?void 0:t.length)||0,videoUrlsCount:(null===(n=e.videoUrls)||void 0===n?void 0:n.length)||0,payloadSize:JSON.stringify(e).length+" bytes"});const r=await Cn.post("".concat(s.J,"/posters"),e);return console.log("\u2705 Response status:",r.status),console.log("\u2705 Response data:",r.data),r.data}catch(b){var r,a,o,i,l,c,u;throw console.error("\u274c Error creating poster:"),console.error("  Status:",null===(r=b.response)||void 0===r?void 0:r.status),console.error("  Status Text:",null===(a=b.response)||void 0===a?void 0:a.statusText),console.error("  Response Data:",null===(o=b.response)||void 0===o?void 0:o.data),console.error("  Request URL:",null===(i=b.config)||void 0===i?void 0:i.url),console.error("  Request Method:",null===(l=b.config)||void 0===l?void 0:l.method),console.error("  Request Headers:",null===(c=b.config)||void 0===c?void 0:c.headers),null!==(u=b.response)&&void 0!==u&&u.data&&console.error("  Backend Error Message:","string"===typeof b.response.data?b.response.data:JSON.stringify(b.response.data,null,2)),b}})(a);console.log("\u2705 Poster created:",i),e("/home")}catch(h){var r,a,i,c,u,d;console.error("\u274c Error creating poster:",h),console.error("\u274c Response data:",null===(r=h.response)||void 0===r?void 0:r.data),console.error("\u274c Response status:",null===(a=h.response)||void 0===a?void 0:a.status),console.error("\u274c Response headers:",null===(i=h.response)||void 0===i?void 0:i.headers);const e=(null===(c=h.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message)||(null===(d=h.response)||void 0===d?void 0:d.data)||"L\u1ed7i khi t\u1ea1o b\xe0i vi\u1ebft";y("string"===typeof e?e:JSON.stringify(e))}finally{v(!1)}else y("\u274c Privacy status kh\xf4ng h\u1ee3p l\u1ec7: ".concat(o))},className:"create-poster__form",children:[(0,c.jsxs)("div",{className:"create-poster__user",children:[(0,c.jsx)("img",{src:(null===A||void 0===A?void 0:A.avatar)||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=120&q=80",alt:T()}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:T()}),(0,c.jsx)("div",{className:"create-poster__privacy",children:(0,c.jsxs)("select",{value:o,onChange:e=>i(e.target.value),"aria-label":"Quy\u1ec1n ri\xeang t\u01b0",children:[(0,c.jsx)("option",{value:"PUBLIC",children:"\ud83c\udf0d C\xf4ng khai"}),(0,c.jsx)("option",{value:"FRIENDS",children:"\ud83d\udc65 B\u1ea1n b\xe8"}),(0,c.jsx)("option",{value:"PRIVATE",children:"\ud83d\udd12 Ch\u1ec9 m\xecnh t\xf4i"})]})})]})]}),(0,c.jsx)("textarea",{className:"create-poster__textarea",placeholder:"".concat(T()," \u01a1i, b\u1ea1n \u0111ang ngh\u0129 g\xec th\u1ebf?"),value:n,onChange:e=>r(e.target.value),rows:8,ref:E}),S&&(0,c.jsx)("div",{className:"create-poster__ai-box ".concat(C?"ai-toxic":"ai-safe"),role:"status",children:C?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("strong",{children:"\u26a0\ufe0f C\u1ea3nh b\xe1o t\u1eeb AI:"}),(0,c.jsx)("p",{children:S})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("strong",{children:"\u2705 Ph\u1ea3n h\u1ed3i t\u1eeb AI:"}),(0,c.jsx)("p",{children:S})]})}),d.length>0&&(0,c.jsx)("div",{className:"create-poster__previews",children:d.map((e,t)=>(0,c.jsxs)("div",{className:"create-poster__preview",children:["video"===f[t]?(0,c.jsx)("video",{src:e,controls:!0,className:"create-poster__preview-video",children:"Your browser does not support video."}):(0,c.jsx)("img",{src:e,alt:"Preview ".concat(t+1)}),(0,c.jsx)("button",{type:"button",className:"create-poster__remove",onClick:()=>(e=>{u(t=>t.filter((t,n)=>n!==e)),m(t=>t.filter((t,n)=>n!==e)),p(t=>t.filter((t,n)=>n!==e))})(t),children:"\u2715"})]},t))}),(0,c.jsxs)("div",{className:"create-poster__actions",children:[(0,c.jsxs)("label",{className:"create-poster__action-btn",children:[(0,c.jsx)("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:async e=>{const t=e.target.files;if(!t)return;const n=Array.from(t);if(n.length+l.length>10)y("Ch\u1ec9 \u0111\u01b0\u1ee3c t\u1ea3i l\xean t\u1ed1i \u0111a 10 \u1ea3nh/video");else{for(const e of n){const t=e.type.startsWith("video/")?52428800:5242880;if(e.size>t)return void y("".concat(e.name," qu\xe1 l\u1edbn. Video t\u1ed1i \u0111a 50MB, \u1ea3nh t\u1ed1i \u0111a 5MB (\u0111\u1ec3 tr\xe1nh l\u1ed7i upload)"))}try{const e=await Promise.all(n.map(e=>(e=>new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=e=>n(e)}))(e))),t=n.map(e=>e.type.startsWith("video/")?"video":"image");u(t=>[...t,...e]),m(t=>[...t,...e]),p(e=>[...e,...t]),y("")}catch(r){console.error("Error converting files:",r),y("L\u1ed7i khi t\u1ea3i \u1ea3nh/video")}}},className:"create-poster__file-input-hidden"}),"\ud83d\udcf7 \u1ea2nh/video"]}),(0,c.jsx)("button",{type:"button",className:"create-poster__action-btn",onClick:()=>w(e=>!e),children:"\ud83d\ude0a C\u1ea3m x\xfac"}),(0,c.jsx)("button",{type:"button",className:"create-poster__action-btn",onClick:async()=>{const e=Dr(n);if(e)y(e);else try{k(!0),j(null),_(null),y("");const e=await Ur(n);r(t=>t.trim().length<100?e:"".concat(t,"\n\n").concat(e)),_(!1),j("AI \u0111\xe3 t\u1ea1o n\u1ed9i dung v\xe0 th\xeam v\xe0o b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n."),console.log("\u2705 Content generated successfully")}catch(t){console.error("Ask AI error",t),y("L\u1ed7i khi g\u1ecdi AI: ".concat(t.message||"Vui l\xf2ng th\u1eed l\u1ea1i."))}finally{k(!1)}},disabled:N||!n.trim(),"aria-label":"H\u1ecfi AI ki\u1ec3m tra n\u1ed9i dung",children:N?"\u0110ang h\u1ecfi AI...":"\ud83e\udd16 H\u1ecfi AI"}),(0,c.jsx)("span",{className:"create-poster__action-btn",children:"\ud83d\udccd V\u1ecb tr\xed"})]}),x&&(0,c.jsxs)("div",{className:"create-poster__emoji-picker",role:"dialog","aria-label":"Ch\u1ecdn bi\u1ec3u t\u01b0\u1ee3ng c\u1ea3m x\xfac",children:[["\ud83d\ude0a","\ud83d\ude02","\ud83d\ude0d","\ud83d\udc4d","\ud83c\udf89","\ud83d\ude22","\ud83d\ude2e","\ud83d\udd25","\u2764\ufe0f","\ud83d\ude4c","\ud83d\udc4f","\ud83e\udd14","\ud83d\ude34","\ud83e\udd29","\ud83d\ude0e"].map(e=>(0,c.jsx)("button",{type:"button",className:"create-poster__emoji",onClick:()=>{const t=E.current;if(!t)return void r(t=>t+e);const a=t.selectionStart||0,o=t.selectionEnd||0,i=n.slice(0,a)+e+n.slice(o);r(i),setTimeout(()=>{t.focus(),t.selectionStart=t.selectionEnd=a+e.length},0)},children:e},e)),(0,c.jsx)("div",{className:"create-poster__emoji-footer",children:(0,c.jsx)("button",{type:"button",className:"create-poster__action-btn",onClick:()=>w(!1),children:"\u0110\xf3ng"})})]}),b&&(0,c.jsxs)("div",{className:"create-poster__error",children:["\u274c ",b]}),(0,c.jsx)("button",{type:"submit",className:"create-poster__submit",disabled:g||!n.trim(),children:g?"\u0110ang \u0111\u0103ng...":"\u0110\u0103ng b\xe0i"})]})]})]})},zr=(e,t)=>{var n,r,a,o;return{id:null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:"",username:null!==(r=null===t||void 0===t?void 0:t.username)&&void 0!==r?r:null===e||void 0===e?void 0:e.username,firstName:null===t||void 0===t?void 0:t.firstName,lastName:null!==(a=null===t||void 0===t?void 0:t.lastName)&&void 0!==a?a:null===e||void 0===e?void 0:e.lastName,avatar:null!==(o=null===t||void 0===t?void 0:t.avatar)&&void 0!==o?o:null===e||void 0===e?void 0:e.avatar,role:null===e||void 0===e?void 0:e.role,enabled:null===e||void 0===e?void 0:e.enabled}},Mr=()=>{const[e,n]=(0,t.useState)(null),[r,a]=(0,t.useState)(!0),[o,i]=(0,t.useState)(null),s=(0,t.useCallback)(async()=>{a(!0),i(null);try{if(!m())return void n(null);const t=(0,h.ug)();if(null===t||void 0===t||!t.id)return void n(null);const r=zr(t);try{const e=await(0,B.kl)(t.id);n(zr(t,e))}catch(e){console.error("Unable to fetch user profile from API:",e),n(r),i(e instanceof Error?e.message:"Kh\xf4ng th\u1ec3 t\u1ea3i th\xf4ng tin ng\u01b0\u1eddi d\xf9ng")}}finally{a(!1)}},[]);return(0,t.useEffect)(()=>{s()},[s]),(0,t.useEffect)(()=>{const e=()=>{s()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[s]),{user:e,loading:r,error:o,refresh:s}},Br=Mr,Vr=()=>{const{posterId:e}=(0,a.g)(),n=(0,a.Zp)(),{user:r}=Mr(),[o,s]=(0,t.useState)(null),[l,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(null),[m,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!1),[v,b]=(0,t.useState)([]),[y,x]=(0,t.useState)(0),[w,N]=(0,t.useState)(0),[k,S]=(0,t.useState)(!1),[j,C]=(0,t.useState)(!1),[_,E]=(0,t.useState)([]),[A,T]=(0,t.useState)(0),[I,R]=(0,t.useState)(!1),[O,P]=(0,t.useState)(""),[L,U]=(0,t.useState)(!1),[D,F]=(0,t.useState)(null),[z,M]=(0,t.useState)({}),[V,W]=(0,t.useState)({}),[H,q]=(0,t.useState)(null),[J,K]=(0,t.useState)({}),[G,$]=(0,t.useState)({}),[Q,X]=(0,t.useState)({}),Y=(0,t.useRef)(r);(0,t.useEffect)(()=>{Y.current=r},[r]);const Z=(0,t.useCallback)(async()=>{if(!e)return h("ID poster kh\xf4ng h\u1ee3p l\u1ec7"),void u(!1);try{u(!0),h(null);const t=await Zn(e);if(s(t),null!==r&&void 0!==r&&r.id){const t=await rr(e);N(t);const n=ar(e,r.id);S(n)}R(!0);const n=await ir(e),a=await ee(n);E(a),T(lr(n)),R(!1)}catch(a){var t,n;console.error("Error loading poster:",a),h((null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Poster Kh\xf4ng t\u1ed3n t\u1ea1i")}finally{u(!1)}},[e,r]);(0,t.useEffect)(()=>{Z()},[Z]);const ee=async e=>{const t={},n=async e=>{if(!t[e.idUser])try{const n=await(0,B.kl)(e.idUser);t[e.idUser]=n}catch(d){console.error("Error fetching user ".concat(e.idUser,":"),d),t[e.idUser]=null}const r=t[e.idUser],a=(0,i.A)((0,i.A)({},e),{},{userName:(null===r||void 0===r?void 0:r.username)||"Ng\u01b0\u1eddi d\xf9ng",userAvatar:(null===r||void 0===r?void 0:r.avatar)||"",userFirstName:(null===r||void 0===r?void 0:r.firstName)||"",userLastName:(null===r||void 0===r?void 0:r.lastName)||""});return e.replies&&e.replies.length>0&&(a.replies=await Promise.all(e.replies.map(e=>n(e)))),a};return Promise.all(e.map(n))},te=async()=>{if(!e||null===r||void 0===r||!r.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 b\xecnh lu\u1eadn");const t=O.trim();if(t){U(!0);try{const n=await cr(e,r.id,t);if(n){const e=await(0,B.kl)(r.id),t=(0,i.A)((0,i.A)({},n),{},{userName:(null===e||void 0===e?void 0:e.username)||r.username||"Ng\u01b0\u1eddi d\xf9ng",userAvatar:(null===e||void 0===e?void 0:e.avatar)||r.avatar||"",userFirstName:(null===e||void 0===e?void 0:e.firstName)||r.firstName||"",userLastName:(null===e||void 0===e?void 0:e.lastName)||r.lastName||"",replies:[],replyCount:0});E(e=>[t,...e]),T(e=>e+1),P(""),console.log("\u2705 Comment added successfully")}else alert("Kh\xf4ng th\u1ec3 th\xeam b\xecnh lu\u1eadn. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(d){console.error("\u274c Error submitting comment:",d),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi th\xeam b\xecnh lu\u1eadn.")}finally{U(!1)}}},ne=async t=>{var n;if(!e||null===r||void 0===r||!r.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 tr\u1ea3 l\u1eddi b\xecnh lu\u1eadn");const a=null===(n=z[t])||void 0===n?void 0:n.trim();if(a){W(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0}));try{const n=await ur(e,t,r.id,a);if(n){const e=await(0,B.kl)(r.id),a=(0,i.A)((0,i.A)({},n),{},{userName:(null===e||void 0===e?void 0:e.username)||r.username||"Ng\u01b0\u1eddi d\xf9ng",userAvatar:(null===e||void 0===e?void 0:e.avatar)||r.avatar||"",userFirstName:(null===e||void 0===e?void 0:e.firstName)||r.firstName||"",userLastName:(null===e||void 0===e?void 0:e.lastName)||r.lastName||"",replies:[],replyCount:0});E(e=>{const n=e=>e.map(e=>e.idComment===t?(0,i.A)((0,i.A)({},e),{},{replies:[a,...e.replies||[]],replyCount:(e.replyCount||0)+1}):e.replies&&e.replies.length>0?(0,i.A)((0,i.A)({},e),{},{replies:n(e.replies)}):e);return n(e)}),T(e=>e+1),M(e=>{const n=(0,i.A)({},e);return delete n[t],n}),F(null),console.log("\u2705 Reply added successfully")}else alert("Kh\xf4ng th\u1ec3 th\xeam ph\u1ea3n h\u1ed3i. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(d){console.error("\u274c Error submitting reply:",d),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi th\xeam ph\u1ea3n h\u1ed3i.")}finally{W(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!1}))}}},re=(e,t)=>{q(n=>n===e?null:(K(n=>(0,i.A)((0,i.A)({},n),{},{[e]:t})),e))},ae=async t=>{var n;if(!e||null===r||void 0===r||!r.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eeda b\xecnh lu\u1eadn");const a=null===(n=J[t])||void 0===n?void 0:n.trim();if(a){$(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0}));try{const n=await dr(e,t,r.id,a);n?(E(e=>{const r=e=>e.map(e=>e.idComment===t?(0,i.A)((0,i.A)({},e),{},{content:n.content,updatedAt:n.updatedAt}):e.replies&&e.replies.length>0?(0,i.A)((0,i.A)({},e),{},{replies:r(e.replies)}):e);return r(e)}),K(e=>{const n=(0,i.A)({},e);return delete n[t],n}),q(null),console.log("\u2705 Comment updated successfully")):alert("Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt b\xecnh lu\u1eadn. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(d){console.error("\u274c Error updating comment:",d),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt b\xecnh lu\u1eadn.")}finally{$(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!1}))}}},oe=async t=>{if(e&&null!==r&&void 0!==r&&r.id){if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a b\xecnh lu\u1eadn n\xe0y?"))try{await hr(e,t,r.id)?(E(e=>{const n=e=>e.filter(e=>e.idComment!==t&&(e.replies&&e.replies.length>0&&(e.replies=n(e.replies)),!0));return n(e)}),T(e=>Math.max(0,e-1)),console.log("\u2705 Comment deleted successfully")):alert("Kh\xf4ng th\u1ec3 x\xf3a b\xecnh lu\u1eadn. Vui l\xf2ng th\u1eed l\u1ea1i.")}catch(d){console.error("\u274c Error deleting comment:",d),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi x\xf3a b\xecnh lu\u1eadn.")}}else alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 x\xf3a b\xecnh lu\u1eadn")},ie=function(e,t){var n,a;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const s=e.replies&&e.replies.length>0,l=Q[e.idComment],u=e.userFirstName&&e.userLastName?"".concat(e.userFirstName," ").concat(e.userLastName).trim():e.userName||"Ng\u01b0\u1eddi d\xf9ng",d=e.userAvatar||"/default-avatar.png";return(0,c.jsxs)("div",{className:"fb-comment__reply-wrapper fb-comment__reply--depth-".concat(o),children:[(0,c.jsxs)("div",{className:"fb-comment fb-comment--reply",children:[(0,c.jsx)("img",{src:d,alt:u,className:"fb-comment__avatar"}),(0,c.jsx)("div",{className:"fb-comment__content",children:H===e.idComment?(0,c.jsxs)("div",{className:"fb-comment__edit",children:[(0,c.jsx)("input",{type:"text",value:J[e.idComment]||"",onChange:t=>K(n=>(0,i.A)((0,i.A)({},n),{},{[e.idComment]:t.target.value})),onKeyDown:t=>{"Enter"!==t.key||t.shiftKey?"Escape"===t.key&&re(e.idComment,e.content):(t.preventDefault(),ae(e.idComment))},className:"fb-comment__edit-field",disabled:G[e.idComment],autoFocus:!0}),(0,c.jsxs)("div",{className:"fb-comment__edit-actions",children:[(0,c.jsx)("button",{type:"button",onClick:()=>re(e.idComment,e.content),disabled:G[e.idComment],children:"H\u1ee7y"}),(0,c.jsx)("button",{type:"button",onClick:()=>ae(e.idComment),disabled:G[e.idComment]||!(null!==(n=J[e.idComment])&&void 0!==n&&n.trim()),className:"btn-primary",children:G[e.idComment]?"\u0110ang l\u01b0u...":"L\u01b0u"})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"fb-comment__bubble",children:[(0,c.jsx)("strong",{children:u}),(0,c.jsx)("p",{children:e.content})]}),(0,c.jsxs)("div",{className:"fb-comment__actions",children:[(0,c.jsx)("button",{type:"button",children:"Th\xedch"}),(0,c.jsx)("button",{type:"button",onClick:()=>F(t=>t===e.idComment?null:e.idComment),children:"Ph\u1ea3n h\u1ed3i"}),(null===r||void 0===r?void 0:r.id)===e.idUser&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{type:"button",onClick:()=>re(e.idComment,e.content),children:"Ch\u1ec9nh s\u1eeda"}),(0,c.jsx)("button",{type:"button",onClick:()=>oe(e.idComment),children:"X\xf3a"})]}),(0,c.jsx)("time",{children:sr(e.createdAt)}),e.updatedAt&&new Date(e.updatedAt).getTime()!==new Date(e.createdAt).getTime()&&(0,c.jsx)("span",{className:"fb-comment__edited",children:" \u2022 \u0110\xe3 ch\u1ec9nh s\u1eeda"})]}),s&&o<3&&(0,c.jsxs)("button",{type:"button",className:"fb-comment__view-replies",onClick:()=>{return t=e.idComment,void X(e=>(0,i.A)((0,i.A)({},e),{},{[t]:!e[t]}));var t},children:[l?"\u25bc":"\u25b6"," ",e.replyCount||e.replies.length," ph\u1ea3n h\u1ed3i"]})]})})]}),D===e.idComment&&(0,c.jsxs)("div",{className:"fb-reply-input",children:[(0,c.jsx)("img",{src:(null===r||void 0===r?void 0:r.avatar)||"/default-avatar.png",alt:"Your avatar",className:"fb-reply-input__avatar"}),(0,c.jsxs)("div",{className:"fb-reply-input__field-wrapper",children:[(0,c.jsx)("input",{type:"text",placeholder:"Vi\u1ebft ph\u1ea3n h\u1ed3i...",value:z[e.idComment]||"",onChange:t=>M(n=>(0,i.A)((0,i.A)({},n),{},{[e.idComment]:t.target.value})),onKeyDown:t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),ne(e.idComment))},className:"fb-reply-input__field",disabled:V[e.idComment]}),(null===(a=z[e.idComment])||void 0===a?void 0:a.trim())&&(0,c.jsx)("button",{type:"button",onClick:()=>ne(e.idComment),disabled:V[e.idComment],className:"fb-reply-input__submit",children:V[e.idComment]?"...":"\u27a4"})]})]}),s&&l&&o<3&&(0,c.jsx)("div",{className:"fb-comment__replies",children:e.replies.map(e=>ie(e,t,o+1))})]},e.idComment)},se=(e,t)=>{b(e),x(t),g(!0)},le=e=>e.userFirstName&&e.userLastName?"".concat(e.userFirstName," ").concat(e.userLastName):e.userName||"Ng\u01b0\u1eddi d\xf9ng";if(l)return(0,c.jsx)("div",{className:"poster-detail-container",children:(0,c.jsxs)("div",{className:"poster-detail-loading",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsx)("p",{children:"\u0110ang t\u1ea3i..."})]})});if(d||!o)return(0,c.jsx)("div",{className:"poster-detail-container",children:(0,c.jsxs)("div",{className:"poster-detail-error",children:[(0,c.jsx)("h2",{children:"\u274c L\u1ed7i"}),(0,c.jsx)("p",{children:d||"Kh\xf4ng t\xecm th\u1ea5y b\xe0i \u0111\u0103ng"}),(0,c.jsx)("button",{onClick:()=>n("/home"),className:"btn-back",children:"Quay l\u1ea1i trang ch\u1ee7"})]})});r&&(r.id,o.idUser);return(0,c.jsxs)("div",{className:"poster-detail-container",children:[(0,c.jsxs)("div",{className:"poster-detail-wrapper",children:[(0,c.jsxs)("div",{className:"poster-detail-header",children:[(0,c.jsx)("button",{onClick:()=>n(-1),className:"btn-back-icon",children:"\u2190 Quay l\u1ea1i"}),(0,c.jsx)("h1",{children:"Chi ti\u1ebft b\xe0i \u0111\u0103ng"})]}),(0,c.jsxs)("article",{className:"poster-detail-card",children:[(0,c.jsx)("header",{className:"poster-detail-card__header",children:(0,c.jsxs)("div",{className:"poster-detail-card__author",children:[(0,c.jsx)("img",{src:o.userAvatar||"/default-avatar.png",alt:le(o),className:"poster-detail-card__avatar"}),(0,c.jsxs)("div",{className:"poster-detail-card__author-info",children:[(0,c.jsx)("h3",{className:"poster-detail-card__author-name",children:le(o)}),(0,c.jsxs)("div",{className:"poster-detail-card__meta",children:[(0,c.jsx)("time",{className:"poster-detail-card__time",children:(e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime(),r=Math.floor(n/6e4),a=Math.floor(n/36e5),o=Math.floor(n/864e5);return r<1?"V\u1eeba xong":r<60?"".concat(r," ph\xfat tr\u01b0\u1edbc"):a<24?"".concat(a," gi\u1edd tr\u01b0\u1edbc"):o<7?"".concat(o," ng\xe0y tr\u01b0\u1edbc"):t.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})(o.createdAt)}),(0,c.jsxs)("span",{className:"poster-detail-card__privacy",children:[(e=>{switch(e){case"PUBLIC":default:return"\ud83c\udf0d";case"FRIENDS":return"\ud83d\udc65";case"PRIVATE":return"\ud83d\udd12"}})(o.privacyStatusName)," ",(e=>{switch(e){case"PUBLIC":default:return"C\xf4ng khai";case"FRIENDS":return"B\u1ea1n b\xe8";case"PRIVATE":return"Ri\xeang t\u01b0"}})(o.privacyStatusName)]})]})]})]})}),(0,c.jsx)("div",{className:"poster-detail-card__content",children:(0,c.jsx)("p",{children:o.content})}),o.imageUrls&&o.imageUrls.length>0&&(0,c.jsx)("div",{className:"poster-detail-card__images",children:1===o.imageUrls.length?o.imageUrls[0].startsWith("data:video/")?(0,c.jsx)("video",{src:o.imageUrls[0],controls:!0,className:"poster-detail-card__video-single",children:"Your browser does not support video."}):(0,c.jsx)("img",{src:o.imageUrls[0],alt:"\u1ea2nh b\xe0i \u0111\u0103ng",className:"poster-detail-card__image-single",onClick:()=>se(o.imageUrls,0)}):(0,c.jsx)("div",{className:"poster-detail-card__image-grid ".concat(2===o.imageUrls.length?"grid-two":3===o.imageUrls.length?"grid-three":"grid-four-plus"),children:o.imageUrls.map((e,t)=>e.startsWith("data:video/")?(0,c.jsx)("video",{src:e,controls:!0,className:"poster-detail-card__video-grid-item",children:"Your browser does not support video."},t):(0,c.jsx)("img",{src:e,alt:"\u1ea2nh ".concat(t+1),className:"poster-detail-card__image-grid-item",onClick:()=>se(o.imageUrls,t)},t))})}),o.videos&&o.videos.length>0&&(0,c.jsx)("div",{className:"poster-detail-card__images",children:o.videos.map((e,t)=>(0,c.jsx)("video",{src:e.url,controls:!0,className:"poster-detail-card__video-single",poster:e.thumbnailUrl,children:"Your browser does not support video."},t))}),(0,c.jsxs)("div",{className:"poster-detail-card__stats-bar",children:[(0,c.jsx)("div",{className:"stats-left",children:(0,c.jsxs)("span",{className:w>0?"has-reactions":"",children:["\ud83d\udc4d ",w.toLocaleString("vi-VN")]})}),(0,c.jsxs)("div",{className:"stats-right",children:[(0,c.jsxs)("span",{className:"stats-item",children:[A," b\xecnh lu\u1eadn"]}),(0,c.jsx)("span",{className:"stats-item",children:"0 l\u01b0\u1ee3t chia s\u1ebb"})]})]}),(0,c.jsxs)("div",{className:"poster-detail-card__actions-bar",children:[(0,c.jsx)("button",{className:"action-btn ".concat(k?"active liked":""),onClick:async()=>{if(!e||null===r||void 0===r||!r.id)return void alert("Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 th\xedch b\xe0i vi\u1ebft");if(j)return;const t=k,n=w;S(!t),N(t?Math.max(0,n-1):n+1),C(!0);try{let a=!1;if(t?(a=await nr(e,r.id),a&&or(e,r.id,!1)):(a=await tr(e,r.id),a&&or(e,r.id,!0)),a){const t=await rr(e);N(t)}else S(t),N(n)}catch(d){console.error("\u274c Error toggling like:",d),S(t),N(n)}finally{C(!1)}},disabled:j,children:k?"\u2764\ufe0f \u0110\xe3 th\xedch":"\ud83d\udc4d Th\xedch"}),(0,c.jsx)("button",{className:"action-btn",children:"\ud83d\udcac B\xecnh lu\u1eadn"}),(0,c.jsx)("button",{className:"action-btn",children:"\u2197\ufe0f Chia s\u1ebb"})]}),(0,c.jsxs)("div",{className:"poster-detail-card__comments fb-post__comments",children:[(0,c.jsxs)("h3",{className:"comments-title",children:["B\xecnh lu\u1eadn (",A,")"]}),r&&(0,c.jsxs)("div",{className:"fb-comment-input",children:[(0,c.jsx)("img",{src:r.avatar||"/default-avatar.png",alt:r.username,className:"fb-comment-input__avatar"}),(0,c.jsxs)("div",{className:"fb-comment-input__field-wrapper",children:[(0,c.jsx)("input",{type:"text",placeholder:"Vi\u1ebft b\xecnh lu\u1eadn...",className:"fb-comment-input__field",value:O,onChange:e=>P(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),te())},disabled:L}),O.trim()&&(0,c.jsx)("button",{type:"button",onClick:te,disabled:L,className:"fb-comment-input__submit",children:L?"...":"\u27a4"})]})]}),I?(0,c.jsx)("div",{className:"fb-comments-loading",children:"\u0110ang t\u1ea3i b\xecnh lu\u1eadn..."}):_.length>0?(0,c.jsx)("div",{className:"fb-comments-list",children:_.map(t=>{var n,a;return(0,c.jsxs)("div",{className:"fb-comment",children:[(0,c.jsx)("img",{src:t.userAvatar||"/default-avatar.png",alt:"".concat(t.userFirstName," ").concat(t.userLastName),className:"fb-comment__avatar"}),(0,c.jsxs)("div",{className:"fb-comment__content",children:[H===t.idComment?(0,c.jsxs)("div",{className:"fb-comment__edit",children:[(0,c.jsx)("input",{type:"text",value:J[t.idComment]||"",onChange:e=>K(n=>(0,i.A)((0,i.A)({},n),{},{[t.idComment]:e.target.value})),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&re(t.idComment,t.content):(e.preventDefault(),ae(t.idComment))},className:"fb-comment__edit-field",disabled:G[t.idComment],autoFocus:!0}),(0,c.jsxs)("div",{className:"fb-comment__edit-actions",children:[(0,c.jsx)("button",{type:"button",onClick:()=>re(t.idComment,t.content),disabled:G[t.idComment],children:"H\u1ee7y"}),(0,c.jsx)("button",{type:"button",onClick:()=>ae(t.idComment),disabled:G[t.idComment]||!(null!==(n=J[t.idComment])&&void 0!==n&&n.trim()),className:"btn-primary",children:G[t.idComment]?"\u0110ang l\u01b0u...":"L\u01b0u"})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"fb-comment__bubble",children:[(0,c.jsx)("strong",{children:t.userFirstName&&t.userLastName?"".concat(t.userFirstName," ").concat(t.userLastName).trim():t.userName||"Ng\u01b0\u1eddi d\xf9ng"}),(0,c.jsx)("p",{children:t.content})]}),(0,c.jsxs)("div",{className:"fb-comment__meta",children:[(0,c.jsx)("span",{children:sr(t.createdAt)}),(0,c.jsx)("button",{type:"button",children:"Th\xedch"}),(0,c.jsx)("button",{type:"button",onClick:()=>{return e=t.idComment,void F(t=>t===e?null:e);var e},children:"Ph\u1ea3n h\u1ed3i"}),(null===r||void 0===r?void 0:r.id)===t.idUser&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{type:"button",onClick:()=>re(t.idComment,t.content),children:"S\u1eeda"}),(0,c.jsx)("button",{type:"button",onClick:()=>oe(t.idComment),children:"X\xf3a"})]})]})]}),D===t.idComment&&(0,c.jsxs)("div",{className:"fb-reply-input",children:[(0,c.jsx)("img",{src:(null===r||void 0===r?void 0:r.avatar)||"/default-avatar.png",alt:"Your avatar",className:"fb-reply-input__avatar"}),(0,c.jsxs)("div",{className:"fb-reply-input__field-wrapper",children:[(0,c.jsx)("input",{type:"text",placeholder:"Vi\u1ebft ph\u1ea3n h\u1ed3i...",value:z[t.idComment]||"",onChange:e=>M(n=>(0,i.A)((0,i.A)({},n),{},{[t.idComment]:e.target.value})),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ne(t.idComment))},className:"fb-reply-input__field",disabled:V[t.idComment]}),(null===(a=z[t.idComment])||void 0===a?void 0:a.trim())&&(0,c.jsx)("button",{type:"button",onClick:()=>ne(t.idComment),disabled:V[t.idComment],className:"fb-reply-input__submit",children:V[t.idComment]?"...":"\u27a4"})]})]}),t.replies&&t.replies.length>0&&(0,c.jsx)("div",{className:"fb-comment__replies",children:t.replies.map(t=>ie(t,e||"",1))})]})]},t.idComment)})}):(0,c.jsx)("div",{className:"fb-comments-empty",children:"Ch\u01b0a c\xf3 b\xecnh lu\u1eadn n\xe0o"})]}),(0,c.jsx)("footer",{className:"poster-detail-card__footer",children:(0,c.jsxs)("div",{className:"poster-detail-card__stats",children:[(0,c.jsxs)("span",{children:["\ud83d\udcc5 \u0110\u0103ng l\xfac: ",new Date(o.createdAt).toLocaleString("vi-VN")]}),o.updatedAt!==o.createdAt&&(0,c.jsxs)("span",{children:["\u270f\ufe0f C\u1eadp nh\u1eadt: ",new Date(o.updatedAt).toLocaleString("vi-VN")]})]})})]})]}),p&&(0,c.jsx)(Cr,{images:v,currentIndex:y,onClose:()=>{g(!1)},onNext:()=>{x(e=>(e+1)%v.length)},onPrev:()=>{x(e=>(e-1+v.length)%v.length)}})]})},Wr=()=>{const{posterId:e}=(0,a.g)(),n=(0,a.Zp)(),r=(0,h.ug)(),[o,i]=(0,t.useState)(""),[l,u]=(0,t.useState)("PUBLIC"),[d,m]=(0,t.useState)([]),[f,p]=(0,t.useState)([]),[g,v]=(0,t.useState)([]),[b,y]=(0,t.useState)([]),[x,w]=(0,t.useState)([]),[N,k]=(0,t.useState)(!0),[S,j]=(0,t.useState)(!1),[C,_]=(0,t.useState)(""),E=()=>null!==r&&void 0!==r&&r.firstName&&null!==r&&void 0!==r&&r.lastName?"".concat(r.lastName):(null===r||void 0===r?void 0:r.username)||"Ng\u01b0\u1eddi d\xf9ng",A=(0,t.useCallback)(async()=>{if(!e)return;const t=(0,h.ug)();if(t)try{k(!0);const n=await Zn(e);if(n.idUser!==t.id)return void _("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n ch\u1ec9nh s\u1eeda b\xe0i vi\u1ebft n\xe0y");if(i(n.content),u(n.privacyStatusName),n.imageUrls&&n.imageUrls.length>0&&(m(n.imageUrls),v(n.imageUrls),w(n.imageUrls.map(()=>"image"))),n.videos&&n.videos.length>0){console.log("\ud83d\udcf9 Loading videos for edit:",n.videos),y(n.videos);const e=n.videos.map(e=>e.url);v(t=>[...t,...e]);const t=new Array(n.videos.length).fill("video");w(e=>[...e,...t])}}catch(n){console.error("Error loading poster:",n),_("Kh\xf4ng th\u1ec3 t\u1ea3i b\xe0i vi\u1ebft")}finally{k(!1)}},[e]);(0,t.useEffect)(()=>{A()},[A]);return N?(0,c.jsx)("div",{className:"edit-poster",children:(0,c.jsxs)("div",{className:"edit-poster__loading",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsx)("p",{children:"\u0110ang t\u1ea3i b\xe0i vi\u1ebft..."})]})}):C&&!o?(0,c.jsx)("div",{className:"edit-poster",children:(0,c.jsxs)("div",{className:"edit-poster__error",children:[(0,c.jsx)("h2",{children:"\u274c L\u1ed7i"}),(0,c.jsx)("p",{children:C}),(0,c.jsx)("button",{onClick:()=>n(-1),className:"btn-back",children:"Quay l\u1ea1i"})]})}):(0,c.jsxs)("div",{className:"edit-poster",children:[S&&(0,c.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,c.jsxs)("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"12px",textAlign:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[(0,c.jsx)("div",{className:"spinner",style:{border:"4px solid #f3f3f3",borderTop:"4px solid #1877f2",borderRadius:"50%",width:"50px",height:"50px",animation:"spin 1s linear infinite",margin:"0 auto 15px"}}),(0,c.jsx)("p",{style:{color:"#333",fontWeight:"bold",fontSize:"16px"},children:"\u23f3 \u0110ang l\u01b0u thay \u0111\u1ed5i..."})]})}),(0,c.jsxs)("div",{className:"edit-poster__container",children:[(0,c.jsxs)("div",{className:"edit-poster__header",children:[(0,c.jsx)("button",{onClick:()=>n(-1),className:"btn-back-icon",children:"\u2190 Quay l\u1ea1i"}),(0,c.jsx)("h1",{children:"Ch\u1ec9nh s\u1eeda b\xe0i vi\u1ebft"})]}),(0,c.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),o.trim())if(null!==r&&void 0!==r&&r.id&&e)try{j(!0),_("");const t={idUser:r.id,content:o.trim(),privacyStatusName:l,imageUrls:d.length>0?d:[],videoUrls:b.length>0?b.map(e=>e.url):[]};console.log("\ud83d\udce4 Updating poster with data:",t),await(async(e,t)=>{try{return(await Cn.put("".concat(s.J,"/posters/").concat(e),t)).data}catch(C){throw console.error("Error updating poster:",C),C}})(e,t),alert("\u2705 \u0110\xe3 c\u1eadp nh\u1eadt b\xe0i vi\u1ebft th\xe0nh c\xf4ng!"),n("/poster/".concat(e))}catch(c){var a,i;console.error("Error updating poster:",c),_((null===(a=c.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)||"C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt b\xe0i vi\u1ebft")}finally{j(!1)}else _("Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin ng\u01b0\u1eddi d\xf9ng");else _("Vui l\xf2ng nh\u1eadp n\u1ed9i dung b\xe0i vi\u1ebft")},className:"edit-poster__form",children:[(0,c.jsxs)("div",{className:"edit-poster__user",children:[(0,c.jsx)("img",{src:(null===r||void 0===r?void 0:r.avatar)||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=120&q=80",alt:E()}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:E()}),(0,c.jsx)("div",{className:"edit-poster__privacy",children:(0,c.jsxs)("select",{value:l,onChange:e=>u(e.target.value),title:"Quy\u1ec1n ri\xeang t\u01b0",children:[(0,c.jsx)("option",{value:"PUBLIC",children:"\ud83c\udf0d C\xf4ng khai"}),(0,c.jsx)("option",{value:"FRIENDS",children:"\ud83d\udc65 B\u1ea1n b\xe8"}),(0,c.jsx)("option",{value:"PRIVATE",children:"\ud83d\udd12 Ch\u1ec9 m\xecnh t\xf4i"})]})})]})]}),(0,c.jsx)("textarea",{className:"edit-poster__textarea",placeholder:"".concat(E()," \u01a1i, b\u1ea1n \u0111ang ngh\u0129 g\xec th\u1ebf?"),value:o,onChange:e=>i(e.target.value),rows:8}),g.length>0&&(0,c.jsx)("div",{className:"edit-poster__previews",children:g.map((e,t)=>(0,c.jsxs)("div",{className:"edit-poster__preview-item",children:["video"===x[t]?(0,c.jsx)("video",{src:e,controls:!0,className:"edit-poster__preview-video",children:"Your browser does not support video."}):(0,c.jsx)("img",{src:e,alt:"Preview ".concat(t+1)}),(0,c.jsx)("button",{type:"button",onClick:()=>(e=>{if("video"===x[e]){const t=x.slice(0,e).filter(e=>"video"===e).length;y(e=>e.filter((e,n)=>n!==t))}else{const t=x.slice(0,e).filter(e=>"image"===e).length;m(e=>e.filter((e,n)=>n!==t))}v(t=>t.filter((t,n)=>n!==e)),w(t=>t.filter((t,n)=>n!==e))})(t),className:"edit-poster__remove-btn",title:"video"===x[t]?"X\xf3a video":"X\xf3a \u1ea3nh",children:"\u2715"})]},t))}),C&&(0,c.jsxs)("div",{className:"edit-poster__error-msg",children:["\u26a0\ufe0f ",C]}),(0,c.jsxs)("div",{className:"edit-poster__actions",children:[(0,c.jsxs)("div",{className:"edit-poster__add-media",children:[(0,c.jsx)("label",{htmlFor:"image-upload",className:"edit-poster__media-btn",children:"\ud83d\udcf7 Th\xeam \u1ea3nh/video"}),(0,c.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",multiple:!0,onChange:async e=>{const t=e.target.files;if(!t)return;const n=Array.from(t);if(n.length+d.length>10)_("Ch\u1ec9 \u0111\u01b0\u1ee3c t\u1ea3i l\xean t\u1ed1i \u0111a 10 \u1ea3nh");else try{_("");const e=await Promise.all(n.map(e=>(e=>new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=e=>n(e)}))(e)));m(t=>[...t,...e]),v(t=>[...t,...e])}catch(r){console.error("Error converting images:",r),_("L\u1ed7i khi t\u1ea3i \u1ea3nh l\xean")}},className:"edit-poster__file-input"}),(0,c.jsxs)("span",{className:"edit-poster__image-count",children:[d.length,"/10 \u1ea3nh"]})]}),(0,c.jsx)("button",{type:"submit",className:"edit-poster__submit",disabled:S||!o.trim(),children:S?"\u23f3 \u0110ang l\u01b0u...":"\ud83d\udcbe L\u01b0u thay \u0111\u1ed5i"})]})]})]})]})},Hr=e=>{let{children:t}=e;const n=(0,a.zy)();return m()?t:(0,c.jsx)(a.C5,{to:"/login",replace:!0,state:{from:n}})},qr="https://unpessimistically-unbewailed-christy.ngrok-free.dev/api/notifications",Jr=async e=>{const t=await(async e=>{try{const t=await Cn.get("".concat("https://unpessimistically-unbewailed-christy.ngrok-free.dev/api/users","/").concat(e));return{actorName:"".concat(t.data.firstName||""," ").concat(t.data.lastName||"").trim()||t.data.username||"Ng\u01b0\u1eddi d\xf9ng",actorAvatar:t.data.avatar}}catch(t){return console.error("Error fetching actor info for ".concat(e,":"),t),{actorName:"Ng\u01b0\u1eddi d\xf9ng",actorAvatar:void 0}}})(e.actorId);return(0,i.A)((0,i.A)({},e),{},{id:e.idNotification,content:e.message,actorName:t.actorName,actorAvatar:t.actorAvatar})},Kr=async e=>{try{const t=await Cn.get("".concat(qr),{params:{userId:e}});return await Promise.all(t.data.map(e=>Jr(e)))}catch(t){throw console.error("Error fetching notifications:",t),t}},Gr=async e=>{try{const t=await Cn.get("".concat(qr,"/unread/count"),{params:{userId:e}});return"object"===typeof t.data&&void 0!==t.data.unreadCount?t.data.unreadCount:"number"===typeof t.data?t.data:0}catch(t){return console.error("Error counting unread notifications:",t),0}},$r=async(e,t)=>{try{await Cn.put("".concat(qr,"/").concat(e,"/read"),null,{params:{userId:t}})}catch(n){throw console.error("Error marking notification as read:",n),n}},Qr=async e=>{try{await Cn.put("".concat(qr,"/read-all"),null,{params:{userId:e}})}catch(t){throw console.error("Error marking all notifications as read:",t),t}},Xr=async(e,t)=>{try{await Cn.delete("".concat(qr,"/").concat(e),{params:{userId:t}})}catch(n){throw console.error("Error deleting notification:",n),n}},Yr=e=>{const t=new Date,n=new Date(e),r=t.getTime()-n.getTime(),a=Math.floor(r/6e4),o=Math.floor(r/36e5),i=Math.floor(r/864e5);return a<1?"V\u1eeba xong":a<60?"".concat(a," ph\xfat tr\u01b0\u1edbc"):o<24?"".concat(o," gi\u1edd tr\u01b0\u1edbc"):i<7?"".concat(i," ng\xe0y tr\u01b0\u1edbc"):n.toLocaleDateString("vi-VN")},Zr=e=>{switch(e){case"LIKE_POSTER":return{icon:"\u2764\ufe0f",color:"#e41e3f",bgColor:"#ffe7e7"};case"COMMENT_POSTER":return{icon:"\ud83d\udcac",color:"#1877f2",bgColor:"#e7f3ff"};case"REPLY_COMMENT":return{icon:"\u21a9\ufe0f",color:"#667eea",bgColor:"#e7e9ff"};case"LIKE_COMMENT":return{icon:"\ud83d\udc4d",color:"#42b883",bgColor:"#e7ffe9"};default:return{icon:"\ud83d\udd14",color:"#65676b",bgColor:"#f0f2f5"}}},ea=()=>{const[e,n]=(0,t.useState)(!1),[r,o]=(0,t.useState)([]),[l,u]=(0,t.useState)(0),[d,m]=(0,t.useState)(!1),f=(0,t.useRef)(null),p=(0,a.Zp)(),g=(0,h.F6)(),v=async()=>{if(g)try{const e=await Gr(g);u(e)}catch(e){console.error("Error loading unread count:",e)}};(0,t.useEffect)(()=>{e&&g&&(async()=>{if(g){m(!0);try{const e=await Kr(g);o(e)}catch(e){console.error("Error loading notifications:",e)}finally{m(!1)}}})()},[e,g]),(0,t.useEffect)(()=>{if(g){v();const e=setInterval(v,3e4);return()=>clearInterval(e)}},[g]),(0,t.useEffect)(()=>{const t=e=>{f.current&&!f.current.contains(e.target)&&n(!1)};return e&&document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[e]);const b=async e=>{if(g){if(!e.isRead)try{await $r(e.id,g),o(t=>t.map(t=>t.id===e.id?(0,i.A)((0,i.A)({},t),{},{isRead:!0}):t)),u(e=>Math.max(0,e-1))}catch(t){console.error("Error marking as read:",t)}n(!1);try{let n=null;"LIKE_POSTER"===e.notificationType?n=e.referenceId:"COMMENT_POSTER"!==e.notificationType&&"REPLY_COMMENT"!==e.notificationType&&"LIKE_COMMENT"!==e.notificationType||(n=await(async e=>{try{const t=(0,h.gf)();if(!t)throw new Error("No authentication token found");const n=await fetch("".concat(s.J,"/comments/comment/").concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}});if(!n.ok)return console.error("Get comment by ID failed: HTTP ".concat(n.status)),null;const r=await n.json();return console.log("\u2705 Got posterId ".concat(r.idPoster," from commentId ").concat(e)),r.idPoster||null}catch(t){return console.error("Error getting posterId from commentId:",t),null}})(e.referenceId)),n?p("/poster/".concat(n)):(console.error("Could not determine posterId from notification"),alert("Kh\xf4ng th\u1ec3 t\xecm th\u1ea5y b\xe0i vi\u1ebft li\xean quan"))}catch(t){console.error("Error navigating to poster:",t),alert("C\xf3 l\u1ed7i khi m\u1edf b\xe0i vi\u1ebft")}}};return(0,c.jsxs)("div",{className:"notification-bell",ref:f,children:[(0,c.jsxs)("button",{className:"notification-bell__button",onClick:()=>{n(!e)},children:[(0,c.jsx)("span",{className:"notification-bell__icon",children:"\ud83d\udd14"}),l>0&&(0,c.jsx)("span",{className:"notification-bell__badge",children:l>99?"99+":l})]}),e&&(0,c.jsxs)("div",{className:"notification-dropdown",children:[(0,c.jsxs)("div",{className:"notification-dropdown__header",children:[(0,c.jsx)("h3",{children:"Th\xf4ng b\xe1o"}),l>0&&(0,c.jsx)("button",{className:"notification-dropdown__mark-all",style:{width:"300px"},onClick:async()=>{if(g)try{await Qr(g),o(e=>e.map(e=>(0,i.A)((0,i.A)({},e),{},{isRead:!0}))),u(0)}catch(e){console.error("Error marking all as read:",e),alert("Kh\xf4ng th\u1ec3 \u0111\xe1nh d\u1ea5u t\u1ea5t c\u1ea3 l\xe0 \u0111\xe3 \u0111\u1ecdc")}},children:"\u0110\xe1nh d\u1ea5u t\u1ea5t c\u1ea3 l\xe0 \u0111\xe3 \u0111\u1ecdc"})]}),(0,c.jsx)("div",{className:"notification-dropdown__body",children:d?(0,c.jsxs)("div",{className:"notification-dropdown__loading",children:[(0,c.jsx)("div",{className:"spinner-small"}),(0,c.jsx)("p",{children:"\u0110ang t\u1ea3i..."})]}):0===r.length?(0,c.jsxs)("div",{className:"notification-dropdown__empty",children:[(0,c.jsx)("span",{className:"notification-dropdown__empty-icon",children:"\ud83d\udd14"}),(0,c.jsx)("p",{children:"Ch\u01b0a c\xf3 th\xf4ng b\xe1o n\xe0o"})]}):(0,c.jsx)("div",{className:"notification-list",children:r.map(e=>{const t=Zr(e.notificationType);return(0,c.jsxs)("div",{className:"notification-item ".concat(e.isRead?"":"notification-item--unread"),onClick:()=>b(e),children:[(0,c.jsxs)("div",{className:"notification-item__avatar-wrapper",children:[e.actorAvatar?(0,c.jsx)("img",{src:e.actorAvatar,alt:e.actorName,className:"notification-item__avatar"}):(0,c.jsx)("div",{className:"notification-item__avatar notification-item__avatar--default",children:"\ud83d\udc64"}),(0,c.jsx)("div",{className:"notification-item__type-icon notification-item__type-icon--".concat(e.notificationType.toLowerCase()),children:t.icon})]}),(0,c.jsxs)("div",{className:"notification-item__content",children:[(0,c.jsxs)("p",{className:"notification-item__text",children:[(0,c.jsx)("strong",{children:e.actorName})," ",e.content]}),(0,c.jsxs)("div",{className:"notification-item__meta",children:[(0,c.jsx)("span",{className:"notification-item__time",children:Yr(e.createdAt)}),!e.isRead&&(0,c.jsx)("span",{className:"notification-item__unread-dot",children:"\u2022"})]})]}),(0,c.jsx)("button",{className:"notification-item__delete",onClick:t=>(async(e,t)=>{if(t.stopPropagation(),g&&window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a th\xf4ng b\xe1o n\xe0y?"))try{await Xr(e,g);const t=r.find(t=>t.id===e);o(t=>t.filter(t=>t.id!==e)),t&&!t.isRead&&u(e=>Math.max(0,e-1))}catch(n){console.error("Error deleting notification:",n),alert("Kh\xf4ng th\u1ec3 x\xf3a th\xf4ng b\xe1o")}})(e.id,t),title:"X\xf3a th\xf4ng b\xe1o",children:"\u2715"})]},e.id)})})}),r.length>0&&(0,c.jsx)("div",{className:"notification-dropdown__footer",children:(0,c.jsx)("button",{className:"notification-dropdown__view-all",style:{width:"400px"},onClick:()=>{n(!1),p("/notifications")},children:"Xem t\u1ea5t c\u1ea3 th\xf4ng b\xe1o"})})]})]})},ta=()=>{var e;const n=(0,a.Zp)(),{user:r,refresh:o}=Br(),[i,s]=(0,t.useState)(!1),l=(0,t.useRef)(null);(0,t.useEffect)(()=>{r||s(!1)},[r]),(0,t.useEffect)(()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const u=(0,t.useMemo)(()=>r?r.firstName||r.lastName?[r.firstName,r.lastName].filter(Boolean).join(" "):r.username||"Ng\u01b0\u1eddi d\xf9ng":"",[r]);return(0,c.jsxs)("header",{className:"fb-header",children:[(0,c.jsxs)("div",{className:"fb-header__left",children:[(0,c.jsxs)("div",{className:"fb-logo",children:[(0,c.jsx)("img",{src:"http://res.cloudinary.com/dytdhvf3s/image/upload/v1760508458/User_5e3ca275-4ec3-45c3-8f53-f173871d002e.jpg",alt:"ChatBook Logo",className:"fb-logo__image"}),(0,c.jsx)("span",{className:"fb-logo__text",children:"ChatBook"})]}),(0,c.jsxs)("div",{className:"fb-search",children:[(0,c.jsx)("span",{className:"fb-search__icon",children:"\ud83d\udd0d"}),(0,c.jsx)("input",{type:"search",placeholder:"T\xecm ki\u1ebfm tr\xean ChatBook","aria-label":"T\xecm ki\u1ebfm"})]})]}),(0,c.jsxs)("nav",{className:"fb-header__center","aria-label":"\u0110i\u1ec1u h\u01b0\u1edbng ch\xednh",children:[(0,c.jsx)(a.k2,{to:"/home",children:(0,c.jsx)("button",{className:"active","aria-label":"Trang ch\u1ee7",children:"\ud83c\udfe0"})}),(0,c.jsx)(a.k2,{to:"/watch",children:(0,c.jsx)("button",{"aria-label":"Watch",children:"\ud83d\udcfa"})}),(0,c.jsx)(a.k2,{to:"/marketplace",children:(0,c.jsx)("button",{"aria-label":"Marketplace",children:"\ud83d\udecd\ufe0f"})}),(0,c.jsx)(a.k2,{to:"/friends",children:(0,c.jsx)("button",{"aria-label":"B\u1ea1n b\xe8",children:"\ud83d\udc65"})}),(0,c.jsx)(a.k2,{to:"/games",children:(0,c.jsx)("button",{"aria-label":"Tr\xf2 ch\u01a1i",children:"\ud83c\udfae"})})]}),(0,c.jsxs)("div",{className:"fb-header__right",children:[(0,c.jsx)("button",{"aria-label":"Menu",children:"\u2630"}),(0,c.jsx)(a.k2,{to:"/chat","aria-label":"Tin nh\u1eafn",children:"\ud83d\udcac"}),(0,c.jsx)(ea,{}),r?(0,c.jsxs)("div",{className:"fb-header__user",ref:l,children:[(0,c.jsx)("button",{type:"button",className:"fb-header__avatar-btn",onClick:()=>s(e=>!e),"aria-haspopup":"menu","aria-expanded":i,children:r.avatar?(0,c.jsx)("img",{src:r.avatar,alt:u,className:"fb-header__avatar"}):(0,c.jsx)("span",{className:"fb-header__avatar-fallback",children:(null===(e=u.charAt(0))||void 0===e?void 0:e.toUpperCase())||"U"})}),i&&(0,c.jsxs)("div",{className:"fb-header__dropdown",children:[(0,c.jsx)("div",{className:"fb-header__dropdown-name",children:u}),(0,c.jsx)("button",{type:"button",className:"fb-header__dropdown-item",onClick:()=>{s(!1),n("/user/".concat(r.id))},children:"Trang c\xe1 nh\xe2n"}),(0,c.jsx)("button",{type:"button",className:"fb-header__dropdown-item fb-header__dropdown-item--danger",onClick:()=>{s(!1),n("/change-password")},children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"}),(0,c.jsx)("button",{type:"button",className:"fb-header__dropdown-item fb-header__dropdown-item--danger",onClick:async()=>{(0,h.eF)(),s(!1),await o(),n("/")},children:"\u0110\u0103ng xu\u1ea5t"})]})]}):(0,c.jsx)(a.N_,{to:"/login",className:"fb-header__login-link",children:"\u0110\u0103ng nh\u1eadp"})]})]})},na=G("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),ra=G("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),aa=G("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),oa=G("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),ia=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(""),[o,i]=(0,t.useState)(!1),[s,l]=(0,t.useState)(""),[u,d]=(0,t.useState)(!1),h=(0,t.useRef)(null),m=(0,t.useRef)(null);(0,t.useEffect)(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e]),(0,t.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.focus()},[]);const f=async e=>{e.preventDefault();const t=r.trim(),o=Dr(t);if(o)return void l(o);const c={id:"user-".concat(Date.now()),content:t,sender:"user",timestamp:new Date};n(e=>[...e,c]),a(""),l(""),i(!0);try{const e=await Ur(t),r={id:"ai-".concat(Date.now()),content:e,sender:"ai",timestamp:new Date};n(e=>[...e,r])}catch(s){console.error("Error asking Gemini:",s);const t={id:"error-".concat(Date.now()),content:"Xin l\u1ed7i, \u0111\xe3 c\xf3 l\u1ed7i x\u1ea3y ra: ".concat(s.message||"Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i v\u1edbi AI"),sender:"ai",timestamp:new Date};n(e=>[...e,t])}finally{var u;i(!1),null===(u=m.current)||void 0===u||u.focus()}};return(0,c.jsxs)(c.Fragment,{children:[!u&&(0,c.jsx)("button",{type:"button",className:"gemini-chat__toggle",onClick:()=>d(!0),"aria-label":"M\u1edf ChatBook",children:(0,c.jsx)(Qn,{size:24,strokeWidth:1.8})}),u&&(0,c.jsx)("div",{className:"gemini-chat",children:(0,c.jsxs)("div",{className:"gemini-chat__container",children:[(0,c.jsx)("header",{className:"gemini-chat__header",children:(0,c.jsxs)("div",{className:"gemini-chat__header-content",children:[(0,c.jsx)("div",{className:"gemini-chat__header-icon",children:(0,c.jsx)(na,{size:24,strokeWidth:1.8})}),(0,c.jsxs)("div",{className:"gemini-chat__header-text",children:[(0,c.jsx)("h1",{children:"ChatBook Assistant"}),(0,c.jsx)("p",{children:"Tr\u1ee3 l\xfd AI th\xf4ng minh - H\u1ecfi b\u1ea5t c\u1ee9 \u0111i\u1ec1u g\xec"})]})]})}),(0,c.jsx)("div",{className:"gemini-chat__messages",children:0===e.length?(0,c.jsxs)("div",{className:"gemini-chat__empty",children:[(0,c.jsx)("div",{className:"gemini-chat__empty-icon",children:(0,c.jsx)(ra,{size:64,strokeWidth:1})}),(0,c.jsx)("h2",{children:"Ch\xe0o m\u1eebng \u0111\u1ebfn v\u1edbi ChatBook"}),(0,c.jsx)("p",{children:"\u0110\u1eb7t c\xe2u h\u1ecfi c\u1ee7a b\u1ea1n v\xe0 nh\u1eadn c\xe2u tr\u1ea3 l\u1eddi th\xf4ng minh t\u1eeb AI"}),(0,c.jsxs)("div",{className:"gemini-chat__suggestions",children:[(0,c.jsx)("button",{type:"button",onClick:()=>a("H\xe3y gi\u1ea3i th\xedch v\u1ec1 tr\xed tu\u1ec7 nh\xe2n t\u1ea1o"),children:"Tr\xed tu\u1ec7 nh\xe2n t\u1ea1o l\xe0 g\xec?"}),(0,c.jsx)("button",{type:"button",onClick:()=>a("C\xe1ch h\u1ecdc l\u1eadp tr\xecnh hi\u1ec7u qu\u1ea3"),children:"H\u1ecdc l\u1eadp tr\xecnh nh\u01b0 th\u1ebf n\xe0o?"}),(0,c.jsx)("button",{type:"button",onClick:()=>a("L\u1eddi khuy\xean cho ng\u01b0\u1eddi m\u1edbi b\u1eaft \u0111\u1ea7u"),children:"L\u1eddi khuy\xean cho newbie"})]})]}):(0,c.jsxs)(c.Fragment,{children:[e.map(e=>{return(0,c.jsxs)("div",{className:"gemini-chat__message gemini-chat__message--".concat(e.sender),children:[(0,c.jsx)("div",{className:"gemini-chat__message-avatar",children:"ai"===e.sender?(0,c.jsx)(ra,{size:20,strokeWidth:1.6}):(0,c.jsx)(Fn,{size:20,strokeWidth:1.6})}),(0,c.jsxs)("div",{className:"gemini-chat__message-content",children:[(0,c.jsxs)("div",{className:"gemini-chat__message-header",children:[(0,c.jsx)("span",{className:"gemini-chat__message-sender",children:"ai"===e.sender?"ChatBook":"B\u1ea1n"}),(0,c.jsx)("span",{className:"gemini-chat__message-time",children:(t=e.timestamp,t.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}))})]}),(0,c.jsx)("div",{className:"gemini-chat__message-text",children:e.content})]})]},e.id);var t}),o&&(0,c.jsxs)("div",{className:"gemini-chat__message gemini-chat__message--ai gemini-chat__message--loading",children:[(0,c.jsx)("div",{className:"gemini-chat__message-avatar",children:(0,c.jsx)(ra,{size:20,strokeWidth:1.6})}),(0,c.jsxs)("div",{className:"gemini-chat__message-content",children:[(0,c.jsx)("div",{className:"gemini-chat__message-header",children:(0,c.jsx)("span",{className:"gemini-chat__message-sender",children:"ChatBook"})}),(0,c.jsxs)("div",{className:"gemini-chat__message-text",children:[(0,c.jsx)(aa,{size:18,className:"gemini-chat__spinner"}),(0,c.jsx)("span",{children:"\u0110ang suy ngh\u0129..."})]})]})]}),(0,c.jsx)("div",{ref:h})]})}),(0,c.jsxs)("form",{className:"gemini-chat__form",onSubmit:f,children:[s&&(0,c.jsx)("div",{className:"gemini-chat__error",children:s}),(0,c.jsxs)("div",{className:"gemini-chat__input-wrapper",children:[(0,c.jsx)("textarea",{ref:m,className:"gemini-chat__input",placeholder:"Nh\u1eadp c\xe2u h\u1ecfi c\u1ee7a b\u1ea1n...",value:r,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),f(e))},rows:1,disabled:o}),(0,c.jsx)("button",{type:"submit",className:"gemini-chat__send-btn",disabled:o||!r.trim(),title:"G\u1eedi c\xe2u h\u1ecfi",children:o?(0,c.jsx)(aa,{size:20,className:"gemini-chat__spinner"}):(0,c.jsx)(oa,{size:20,strokeWidth:1.8})})]})]}),(0,c.jsx)("button",{type:"button",className:"gemini-chat__close",onClick:()=>d(!1),"aria-label":"\u0110\xf3ng chatbox",title:"\u0110\xf3ng",children:(0,c.jsx)(Gn,{size:20,strokeWidth:1.8})})]})})]})},sa=()=>{const[e,n]=(0,t.useState)([]),[r,o]=(0,t.useState)(0),[s,l]=(0,t.useState)(!0),[u,d]=(0,t.useState)("all"),m=(0,a.Zp)(),f=(0,h.F6)();(0,t.useEffect)(()=>{f&&(async()=>{if(f){l(!0);try{const[e,t]=await Promise.all([Kr(f),Gr(f)]);n(e),o(t)}catch(e){console.error("Error loading notifications:",e)}finally{l(!1)}}})()},[f]);const p="unread"===u?e.filter(e=>!e.isRead):e;return(0,c.jsx)("div",{className:"notification-page",children:(0,c.jsxs)("div",{className:"notification-page__container",children:[(0,c.jsxs)("div",{className:"notification-page__header",children:[(0,c.jsx)("h1",{children:"Th\xf4ng b\xe1o"}),(0,c.jsx)("button",{className:"btn-back-to-home",onClick:()=>m("/home"),children:"\u2190 Quay l\u1ea1i"})]}),(0,c.jsxs)("div",{className:"notification-page__controls",children:[(0,c.jsxs)("div",{className:"notification-tabs",children:[(0,c.jsxs)("button",{className:"notification-tab ".concat("all"===u?"active":""),onClick:()=>d("all"),children:["T\u1ea5t c\u1ea3 (",e.length,")"]}),(0,c.jsxs)("button",{className:"notification-tab ".concat("unread"===u?"active":""),onClick:()=>d("unread"),children:["Ch\u01b0a \u0111\u1ecdc (",r,")"]})]}),r>0&&(0,c.jsx)("button",{className:"btn-mark-all-read",onClick:async()=>{if(f)try{await Qr(f),n(e=>e.map(e=>(0,i.A)((0,i.A)({},e),{},{isRead:!0}))),o(0)}catch(e){console.error("Error marking all as read:",e),alert("Kh\xf4ng th\u1ec3 \u0111\xe1nh d\u1ea5u t\u1ea5t c\u1ea3 l\xe0 \u0111\xe3 \u0111\u1ecdc")}},children:"\u0110\xe1nh d\u1ea5u t\u1ea5t c\u1ea3 l\xe0 \u0111\xe3 \u0111\u1ecdc"})]}),(0,c.jsx)("div",{className:"notification-page__content",children:s?(0,c.jsxs)("div",{className:"notification-page__loading",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsx)("p",{children:"\u0110ang t\u1ea3i th\xf4ng b\xe1o..."})]}):0===p.length?(0,c.jsxs)("div",{className:"notification-page__empty",children:[(0,c.jsx)("span",{className:"empty-icon",children:"\ud83d\udd14"}),(0,c.jsx)("h3",{children:"unread"===u?"Kh\xf4ng c\xf3 th\xf4ng b\xe1o ch\u01b0a \u0111\u1ecdc":"Ch\u01b0a c\xf3 th\xf4ng b\xe1o n\xe0o"}),(0,c.jsx)("p",{children:"C\xe1c th\xf4ng b\xe1o m\u1edbi s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y"})]}):(0,c.jsx)("div",{className:"notification-page__list",children:p.map(t=>{const r=Zr(t.notificationType);return(0,c.jsxs)("div",{className:"notif-card ".concat(t.isRead?"":"notif-card--unread"),onClick:()=>(async e=>{if(f){if(!e.isRead)try{await $r(e.id,f),n(t=>t.map(t=>t.id===e.id?(0,i.A)((0,i.A)({},t),{},{isRead:!0}):t)),o(e=>Math.max(0,e-1))}catch(t){console.error("Error marking as read:",t)}m("/poster/".concat(e.referenceId))}})(t),children:[(0,c.jsxs)("div",{className:"notif-card__avatar-wrapper",children:[t.actorAvatar?(0,c.jsx)("img",{src:t.actorAvatar,alt:t.actorName,className:"notif-card__avatar"}):(0,c.jsx)("div",{className:"notif-card__avatar notif-card__avatar--default",children:"\ud83d\udc64"}),(0,c.jsx)("div",{className:"notif-card__type-icon notif-card__type-icon--".concat(t.notificationType.toLowerCase()),children:r.icon})]}),(0,c.jsxs)("div",{className:"notif-card__content",children:[(0,c.jsxs)("p",{className:"notif-card__text",children:[(0,c.jsx)("strong",{children:t.actorName})," ",t.content]}),(0,c.jsxs)("div",{className:"notif-card__meta",children:[(0,c.jsx)("span",{className:"notif-card__time",children:Yr(t.createdAt)}),!t.isRead&&(0,c.jsx)("span",{className:"notif-card__unread-badge",children:"M\u1edbi"})]})]}),(0,c.jsx)("button",{className:"notif-card__delete",onClick:r=>(async(t,r)=>{if(r.stopPropagation(),f&&window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a th\xf4ng b\xe1o n\xe0y?"))try{await Xr(t,f);const r=e.find(e=>e.id===t);n(e=>e.filter(e=>e.id!==t)),r&&!r.isRead&&o(e=>Math.max(0,e-1))}catch(a){console.error("Error deleting notification:",a),alert("Kh\xf4ng th\u1ec3 x\xf3a th\xf4ng b\xe1o")}})(t.id,r),title:"X\xf3a th\xf4ng b\xe1o",children:"\u2715"})]},t.id)})})})]})})},la=t.lazy(()=>n.e(740).then(n.bind(n,2740))),ca=t.lazy(()=>n.e(460).then(n.bind(n,9460))),ua=()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Rn,{}),(0,c.jsx)(a.sv,{}),(0,c.jsx)(On,{})]}),da=()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ta,{}),(0,c.jsx)(a.sv,{})]});const ha=function(){return(0,c.jsxs)("div",{className:"App",children:[(0,c.jsxs)(a.BV,{children:[(0,c.jsxs)(a.qh,{element:(0,c.jsx)(ua,{}),children:[(0,c.jsx)(a.qh,{path:"/login",element:(0,c.jsx)(f,{})}),(0,c.jsx)(a.qh,{path:"/forgot-password",element:(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)("div",{children:"Loading..."}),children:(0,c.jsx)(la,{})})}),(0,c.jsx)(a.qh,{path:"/register",element:(0,c.jsx)(d,{})}),(0,c.jsx)(a.qh,{path:"/",element:(0,c.jsx)(In,{})})]}),(0,c.jsxs)(a.qh,{element:(0,c.jsx)(da,{}),children:[(0,c.jsx)(a.qh,{path:"/friends",element:(0,c.jsx)(Y,{})}),(0,c.jsx)(a.qh,{path:"/chat",element:(0,c.jsx)(Tn,{})}),(0,c.jsx)(a.qh,{path:"/groups/:groupId/members",element:(0,c.jsx)(Ar,{})}),(0,c.jsx)(a.qh,{path:"/active/:email/:code",element:(0,c.jsx)(Dn,{})}),(0,c.jsx)(a.qh,{path:"/user/:id",element:(0,c.jsx)(_r,{})}),(0,c.jsx)(a.qh,{path:"/home",element:(0,c.jsx)(Hr,{children:(0,c.jsx)(Lr,{})})}),(0,c.jsx)(a.qh,{path:"/create-poster",element:(0,c.jsx)(Hr,{children:(0,c.jsx)(Fr,{})})}),(0,c.jsx)(a.qh,{path:"/change-password",element:(0,c.jsx)(Hr,{children:(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)("div",{children:"Loading..."}),children:(0,c.jsx)(ca,{})})})}),(0,c.jsx)(a.qh,{path:"/poster/:posterId",element:(0,c.jsx)(Hr,{children:(0,c.jsx)(Vr,{})})}),(0,c.jsx)(a.qh,{path:"/poster/:posterId/edit",element:(0,c.jsx)(Hr,{children:(0,c.jsx)(Wr,{})})}),(0,c.jsx)(a.qh,{path:"/notifications",element:(0,c.jsx)(Hr,{children:(0,c.jsx)(sa,{})})})]})]}),(0,c.jsx)(ia,{})]})},ma=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then(t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:o,getTTFB:i}=t;n(e),r(e),a(e),o(e),i(e)})};r.createRoot(document.getElementById("root")).render((0,c.jsx)(a.Kd,{children:(0,c.jsx)(ha,{})})),ma()})()})();
//# sourceMappingURL=main.d6bdfffc.js.map